<!DOCTYPE html>
<script src="katex.min.js"></script>
<link rel="stylesheet" href="katex.min.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
    input {
        width: 95%;
    }
    svg{
        max-width: 100%;
    }
    body {
        zoom: 1.6;
    }
    div{
        word-wrap: break-word;
    }
</style>
<body>
    <div id="output">
        <div></div>
        <div id="mymath"></div>
    </div>
</body>
<script>
function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}function dynamicAlloc(e){assert(DYNAMICTOP_PTR)
var t=HEAP32[DYNAMICTOP_PTR>>2],r=t+e+15&-16
return r>_emscripten_get_heap_size()&&abort("failure to dynamicAlloc - memory growth etc. is not supported there, call malloc/sbrk directly"),HEAP32[DYNAMICTOP_PTR>>2]=r,t}function getNativeTypeSize(e){switch(e){case"i1":case"i8":return 1
case"i16":return 2
case"i32":return 4
case"i64":return 8
case"float":return 4
case"double":return 8
default:if("*"===e[e.length-1])return 4
if("i"===e[0]){var t=parseInt(e.substr(1))
return assert(t%8===0,"getNativeTypeSize invalid bits "+t+", type "+e),t/8}return 0}}function warnOnce(e){warnOnce.shown||(warnOnce.shown={}),warnOnce.shown[e]||(warnOnce.shown[e]=1,err(e))}function setValue(e,t,r,n){switch(r=r||"i8","*"===r.charAt(r.length-1)&&(r="i32"),r){case"i1":HEAP8[e>>0]=t
break
case"i8":HEAP8[e>>0]=t
break
case"i16":HEAP16[e>>1]=t
break
case"i32":HEAP32[e>>2]=t
break
case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1]
break
case"float":HEAPF32[e>>2]=t
break
case"double":HEAPF64[e>>3]=t
break
default:abort("invalid type for setValue: "+r)}}function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(e){var t=Module["_"+e]
return assert(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function ccall(e,t,r,n,i){function o(e){return"string"===t?UTF8ToString(e):"boolean"===t?!!e:e}var a={string:function(e){var t=0
if(null!==e&&void 0!==e&&0!==e){var r=(e.length<<2)+1
t=stackAlloc(r),stringToUTF8(e,t,r)}return t},array:function(e){var t=stackAlloc(e.length)
return writeArrayToMemory(e,t),t}},s=getCFunc(e),u=[],c=0
if(assert("array"!==t,'Return type should not be "array".'),n)for(var l=0;l<n.length;l++){var d=a[r[l]]
d?(0===c&&(c=stackSave()),u[l]=d(n[l])):u[l]=n[l]}var m=s.apply(null,u)
return assert(!(i&&i.async),"async call is only supported with Emterpretify for now, see #9029"),m=o(m),0!==c&&stackRestore(c),m}function cwrap(e,t,r,n){return function(){return ccall(e,t,r,arguments,n)}}function allocate(e,t,r,n){var i,o
"number"==typeof e?(i=!0,o=e):(i=!1,o=e.length)
var a,s="string"==typeof t?t:null
if(a=r==ALLOC_NONE?n:[_malloc,stackAlloc,dynamicAlloc][r](Math.max(o,s?1:t.length)),i){var u
for(n=a,assert(0==(3&a)),u=a+(-4&o);u>n;n+=4)HEAP32[n>>2]=0
for(u=a+o;u>n;)HEAP8[n++>>0]=0
return a}if("i8"===s)return e.subarray||e.slice?HEAPU8.set(e,a):HEAPU8.set(new Uint8Array(e),a),a
for(var c,l,d,m=0;o>m;){var f=e[m]
c=s||t[m],0!==c?(assert(c,"Must know what type to store in allocate!"),"i64"==c&&(c="i32"),setValue(a+m,f,c),d!==c&&(l=getNativeTypeSize(c),d=c),m+=l):m++}return a}function getMemory(e){return runtimeInitialized?_malloc(e):dynamicAlloc(e)}function Pointer_stringify(e,t){abort("this function has been removed - you should use UTF8ToString(ptr, maxBytesToRead) instead!")}function UTF8ArrayToString(e,t,r){for(var n=t+r,i=t;e[i]&&!(i>=n);)++i
if(i-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,i))
for(var o="";i>t;){var a=e[t++]
if(128&a){var s=63&e[t++]
if(192!=(224&a)){var u=63&e[t++]
if(224==(240&a)?a=(15&a)<<12|s<<6|u:(240!=(248&a)&&warnOnce("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),a=(7&a)<<18|s<<12|u<<6|63&e[t++]),65536>a)o+=String.fromCharCode(a)
else{var c=a-65536
o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0
for(var i=r,o=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a)
if(s>=55296&&57343>=s){var u=e.charCodeAt(++a)
s=65536+((1023&s)<<10)|1023&u}if(127>=s){if(r>=o)break
t[r++]=s}else if(2047>=s){if(r+1>=o)break
t[r++]=192|s>>6,t[r++]=128|63&s}else if(65535>=s){if(r+2>=o)break
t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=o)break
s>=2097152&&warnOnce("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-i}function stringToUTF8(e,t,r){return assert("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r)
n>=55296&&57343>=n&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),127>=n?++t:t+=2047>=n?2:65535>=n?3:4}return t}function allocateUTF8(e){var t=lengthBytesUTF8(e)+1,r=_malloc(t)
return r&&stringToUTF8Array(e,HEAP8,r,t),r}function writeStringToMemory(e,t,r){warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!")
var n,i
r&&(i=t+lengthBytesUTF8(e),n=HEAP8[i]),stringToUTF8(e,t,1/0),r&&(HEAP8[i]=n)}function writeArrayToMemory(e,t){assert(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),HEAP8.set(e,t)}function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)assert(e.charCodeAt(n)===e.charCodeAt(n)&255),HEAP8[t++>>0]=e.charCodeAt(n)
r||(HEAP8[t>>0]=0)}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}function writeStackCookie(){assert(0==(3&STACK_MAX)),HEAPU32[(STACK_MAX>>2)-1]=34821223,HEAPU32[(STACK_MAX>>2)-2]=2310721022}function checkStackCookie(){var e=HEAPU32[(STACK_MAX>>2)-1],t=HEAPU32[(STACK_MAX>>2)-2];(34821223!=e||2310721022!=t)&&abort("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+t.toString(16)+" "+e.toString(16)),1668509029!==HEAP32[0]&&abort("Runtime error: The application has corrupted its heap memory area (address zero)!")}function abortStackOverflow(e){abort("Stack overflow! Attempted to allocate "+e+" bytes on the stack, but stack has only "+(STACK_MAX-stackSave()+e)+" bytes available!")}function abortFnPtrError(e,t){abort("Invalid function pointer "+e+" called with signature '"+t+"'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this). Build with ASSERTIONS=2 for more info.")}function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift()
if("function"!=typeof t){var r=t.func
"number"==typeof r?void 0===t.arg?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift())
callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){checkStackCookie(),assert(!runtimeInitialized),runtimeInitialized=!0,Module.noFSInit||FS.init.initialized||FS.init(),TTY.init(),PIPEFS.root=FS.mount(PIPEFS,{},null),callRuntimeCallbacks(__ATINIT__)}function preMain(){checkStackCookie(),FS.ignorePermissions=!1,callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){checkStackCookie(),runtimeExited=!0}function postRun(){if(checkStackCookie(),Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift())
callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}function getUniqueRunDependency(e){for(var t=e;;){if(!runDependencyTracking[e])return e
e=t+Math.random()}return e}function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),e?(assert(!runDependencyTracking[e]),runDependencyTracking[e]=1,null===runDependencyWatcher&&"undefined"!=typeof setInterval&&(runDependencyWatcher=setInterval(function(){if(ABORT)return clearInterval(runDependencyWatcher),void(runDependencyWatcher=null)
var e=!1
for(var t in runDependencyTracking)e||(e=!0,err("still waiting on run dependencies:")),err("dependency: "+t)
e&&err("(end of list)")},1e4))):err("warning: run dependency added without ID")}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),e?(assert(runDependencyTracking[e]),delete runDependencyTracking[e]):err("warning: run dependency removed without ID"),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled
dependenciesFulfilled=null,t()}}function isDataURI(e){return!0}function getBinary(){try{if(wasmBinary)return new Uint8Array(wasmBinary)
var e=tryParseAsDataURI(wasmBinaryFile)
if(e)return e
if(readBinary)return readBinary(wasmBinaryFile)
throw"both async and sync fetching of the wasm failed"}catch(t){abort(t)}}function getBinaryPromise(){return fetch("data").then(function(e){return e.arrayBuffer()})["catch"](function(){document.writeln("不支持")})}function createWasm(e){function t(e,t){var r=e.exports
Module.asm=r,removeRunDependency("wasm-instantiate")}function r(e){assert(Module===a,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),a=null,t(e.instance)}function n(e){return getBinaryPromise().then(function(e){var t=function(){var e=e||{}
return function(e){e.C=function(){this.G=0},e.C.prototype.create=function(e){this.H&&this.G===e||(this.H=new Uint8Array(e)),this.G=e,this.da=this.s=0},e.C.prototype.flush=function(){var e=this.s-this.da
if(0!==e){if(this.v.va)this.v.va(this.H,e)
else for(var t=0;e>t;t++)this.v.Sa(this.H[t])
this.s>=this.G&&(this.s=0),this.da=this.s}},e.C.prototype.T=function(){this.flush(),this.v=null},e.C.prototype.ea=function(e){this.T(),this.v=e},e.C.prototype.h=function(e){e||(this.s=this.da=0)},e.C.prototype.za=function(e,t){var r=this.s-e-1
for(0>r&&(r+=this.G);t--;)r>=this.G&&(r=0),this.H[this.s++]=this.H[r++],this.s>=this.G&&this.flush()},e.C.prototype.Ka=function(e){this.H[this.s++]=e,this.s>=this.G&&this.flush()},e.C.prototype.qa=function(e){return e=this.s-e-1,0>e&&(e+=this.G),this.H[e]},e.I=function(){},e.I.prototype.ea=function(e){this.v=e},e.I.prototype.T=function(){this.v=null},e.I.prototype.h=function(){var e=5
for(this.l=0,this.i=-1;e--;)this.l=this.l<<8|this.v.g()},e.I.prototype.Aa=function(e){for(var t,r=0;e--;)this.i>>>=1,t=this.l-this.i>>>31,this.l-=this.i&t-1,r=r<<1|1-t,0===(4278190080&this.i)&&(this.l=this.l<<8|this.v.g(),this.i<<=8)
return r},e.I.prototype.m=function(e,t){var r=e[t],n=(this.i>>>11)*r
return(2147483648^this.l)<(2147483648^n)?(this.i=n,e[t]+=2048-r>>>5,0===(4278190080&this.i)&&(this.l=this.l<<8|this.v.g(),this.i<<=8),0):(this.i-=n,this.l-=n,e[t]-=r>>>5,0===(4278190080&this.i)&&(this.l=this.l<<8|this.v.g(),this.i<<=8),1)},e.A=function(e,t){for(;t--;)e[t]=1024},e.o=function(e){this.aa=[],this.S=e},e.o.prototype.h=function(){e.A(this.aa,1<<this.S)},e.o.prototype.decode=function(e){for(var t=1,r=this.S;r--;)t=t<<1|e.m(this.aa,t)
return t-(1<<this.S)},e.o.prototype.La=function(e){for(var t,r=1,n=0,i=0;i<this.S;++i)t=e.m(this.aa,r),r=r<<1|t,n|=t<<i
return n},e.Ma=function(e,t,r,n){for(var i,o=1,a=0,s=0;n>s;++s)i=r.m(e,t+o),o=o<<1|i,a|=i<<s
return a},e.K=function(){this.U=[],this.Z=[],this.$=[],this.ga=new e.o(8),this.L=0},e.K.prototype.create=function(t){for(;this.L<t;++this.L)this.Z[this.L]=new e.o(3),this.$[this.L]=new e.o(3)},e.K.prototype.h=function(){var t=this.L
for(e.A(this.U,2);t--;)this.Z[t].h(),this.$[t].h()
this.ga.h()},e.K.prototype.decode=function(e,t){return 0===e.m(this.U,0)?this.Z[t].decode(e):0===e.m(this.U,1)?8+this.$[t].decode(e):16+this.ga.decode(e)},e.N=function(){this.R=[]},e.N.prototype.h=function(){e.A(this.R,768)},e.N.prototype.Ca=function(e){var t=1
do t=t<<1|e.m(this.R,t)
while(256>t)
return 255&t},e.N.prototype.Da=function(e,t){var r=1
do{var n=t>>7&1
t<<=1
var i=e.m(this.R,(1+n<<8)+r)
if(r=r<<1|i,n!==i){for(;256>r;)r=r<<1|e.m(this.R,r)
break}}while(256>r)
return 255&r},e.O=function(){},e.O.prototype.create=function(t,r){var n
if(!this.P||this.M!==r||this.ba!==t)for(this.ba=t,this.wa=(1<<t)-1,this.M=r,this.P=[],n=1<<this.M+this.ba;n--;)this.P[n]=new e.N},e.O.prototype.h=function(){for(var e=1<<this.M+this.ba;e--;)this.P[e].h()},e.O.prototype.Ga=function(e,t){return this.P[((e&this.wa)<<this.M)+((255&t)>>>8-this.M)]},e.B=function(){this.D=new e.C,this.j=new e.I,this.ha=[],this.ja=[],this.ka=[],this.la=[],this.ma=[],this.ia=[],this.J=[],this.oa=[],this.na=new e.o(4),this.X=new e.K,this.ca=new e.K,this.Y=new e.O,this.W=this.V=-1,this.J[0]=new e.o(6),this.J[1]=new e.o(6),this.J[2]=new e.o(6),this.J[3]=new e.o(6)},e.B.prototype.sa=function(e){return 0>e?!1:(this.V!==e&&(this.V=e,this.W=Math.max(this.V,1),this.D.create(Math.max(this.W,4096))),!0)},e.B.prototype.ta=function(e,t,r){var n=1<<r
return e>8||t>4||r>4?!1:(this.Y.create(t,e),this.X.create(n),this.ca.create(n),this.xa=n-1,!0)},e.B.prototype.Oa=function(e){if(!this.ta(e.Ha,e.Ia,e.Ja))throw Error("Incorrect stream properties")
if(!this.sa(e.Fa))throw Error("Invalid dictionary size")},e.B.prototype.Ba=function(e){if(13>e.size)return!1
var t=e.g(),r=t%9
t=~~(t/9)
var n=t%5
t=~~(t/5)
var i=e.g()
i|=e.g()<<8,i|=e.g()<<16,i+=16777216*e.g()
var o=e.g()
return o|=e.g()<<8,o|=e.g()<<16,o+=16777216*e.g(),e.g(),e.g(),e.g(),e.g(),{Ha:r,Ia:n,Ja:t,Fa:i,Qa:o}},e.B.prototype.h=function(){var t=4
for(this.D.h(!1),e.A(this.ha,192),e.A(this.ia,192),e.A(this.ja,12),e.A(this.ka,12),e.A(this.la,12),e.A(this.ma,12),e.A(this.oa,114),this.Y.h();t--;)this.J[t].h()
this.X.h(),this.ca.h(),this.na.h(),this.j.h()},e.B.prototype.pa=function(t,r,n){var i=0,o=0,a=0,s=0,u=0,c=0,l=0
for(this.j.ea(t),this.D.ea(r),this.h();0>n||n>c;)if(t=c&this.xa,0===this.j.m(this.ha,(i<<4)+t))l=this.Y.Ga(c++,l),l=i>=7?l.Da(this.j,this.D.qa(o)):l.Ca(this.j),this.D.Ka(l),i=4>i?0:i-(10>i?3:6)
else{if(1===this.j.m(this.ja,i))l=0,0===this.j.m(this.ka,i)?0===this.j.m(this.ia,(i<<4)+t)&&(i=7>i?9:11,l=1):(0===this.j.m(this.la,i)?r=a:(0===this.j.m(this.ma,i)?r=s:(r=u,u=s),s=a),a=o,o=r),0===l&&(l=2+this.ca.decode(this.j,t),i=7>i?8:11)
else if(u=s,s=a,a=o,l=2+this.X.decode(this.j,t),i=7>i?7:10,t=this.J[5>=l?l-2:3].decode(this.j),t>=4){if(r=(t>>1)-1,o=(2|1&t)<<r,14>t)o+=e.Ma(this.oa,o-t-1,this.j,r)
else if(o+=this.j.Aa(r-4)<<4,o+=this.na.La(this.j),0>o){if(-1===o)break
return!1}}else o=t
if(o>=c||o>=this.W)return!1
this.D.za(o,l),c+=l,l=this.D.qa(0)}return this.D.flush(),this.D.T(),this.j.T(),!0},e.B.prototype.Na=function(e){if(5>e.size)return!1
var t=e.g(),r=t%9
return t=~~(t/9),this.ta(r,t%5,~~(t/5))?(t=e.g(),t|=e.g()<<8,t|=e.g()<<16,t+=16777216*e.g(),this.sa(t)):!1},e.Ra=function(t,r,n,i){var o=new e.B
if(!o.Na(t))throw Error("Incorrect lzma stream properties")
if(!o.pa(r,n,i))throw Error("Error in lzma data stream")
return n},e.Ea=function(t,r){t instanceof ArrayBuffer&&(t=new e.ra(t)),!r&&e.F&&(r=new e.F)
var n=new e.B,i=n.Ba(t),o=i.Qa
if(n.Oa(i),!n.pa(t,r,o))throw Error("Error in lzma data stream")
return r},e.decode=e.Ea}(e),e=e||{},function(e){e.ra=function(e){this.ya=new Uint8Array(e),this.size=e.byteLength,this.offset=0},e.ra.prototype.g=function(){return this.ya[this.offset++]},e.F=function(t){this.size=0,this.u=[],t=t||[]
for(var r=0,n=t.length;n>r;r++)if(t[r]instanceof e.F)for(var i=t[r].u,o=0;o<i.length;o++)this.u.push(t[r].u[o]),this.size+=t[r].u[o].length
else this.u.push(t[r]),this.size+=t[r].length},e.F.prototype.va=function(e,t){if(!(t<=e.byteLength))throw Error("Buffer too small?")
this.u.push(e.slice(0,t)),this.size+=t},e.F.prototype.ua=function(){var e=this.size,t=this.u
if(1==t.length)return t[0]
try{for(var r=new Uint8Array(e),n=e=0;e<t.length;e++)r.set(t[e],n),n+=t[e].length
return t[0]=r,t.length=1,r}catch(i){}return null},e.F.prototype.forEach=function(e){for(var t=0;t<this.u.length;t++)e.call(this,this.u[t])},e.F.prototype.Pa=function(){return e.fa||this.ua(),e.fa.decode(this.ua())},e.F.prototype.toString=function(){var t=this.u,r=""
e.fa&&(t=[this.Pa()])
for(var n=0,i=t.length;i>n;n++)for(var o=0,a=t[n].length;a>o;o++)r+=String.fromCharCode(t[n][o])
return r}}(e),function(t){var r=new e.F
e.decode(t,r)
var n=new Uint8Array(r.size),i=0
return r.u.forEach(function(e){n.set(e,i),i+=e.length}),n}}()
return e=t(e),WebAssembly.instantiate(e,o)}).then(e,function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)})}function i(){return wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||"function"!=typeof fetch?n(r):void fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(e){var t=WebAssembly.instantiateStreaming(e,o)
return t.then(r,function(e){err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),n(r)})})}var o={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:asm2wasmImports}
addRunDependency("wasm-instantiate")
var a=Module
if(Module.instantiateWasm)try{var s=Module.instantiateWasm(o,t)
return s}catch(u){return err("Module.instantiateWasm callback failed with error: "+u),!1}return i(),{}}function _emscripten_asm_const_i(e){return ASM_CONSTS[e]()}function _emscripten_asm_const_d(e){return ASM_CONSTS[e]()}function _emscripten_asm_const_ii(e,t){return ASM_CONSTS[e](t)}function _emscripten_asm_const_iiiii(e,t,r,n,i){return ASM_CONSTS[e](t,r,n,i)}function _emscripten_asm_const_iiii(e,t,r,n){return ASM_CONSTS[e](t,r,n)}function _emscripten_asm_const_iii(e,t,r){return ASM_CONSTS[e](t,r)}function demangle(e){return warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g
return e.replace(t,function(e){var t=demangle(e)
return e===t?e:t+" ["+e+"]"})}function jsStackTrace(){var e=Error()
if(!e.stack){try{throw Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return""+e.stack}function stackTrace(){var e=jsStackTrace()
return Module.extraStackTrace&&(e+="\n"+Module.extraStackTrace()),demangleAll(e)}function ___setErrNo(e){return Module.___errno_location?HEAP32[Module.___errno_location()>>2]=e:err("failed to set errno from JS"),e}function _emscripten_set_main_loop_timing(e,t){if(Browser.mainLoop.timingMode=e,Browser.mainLoop.timingValue=t,!Browser.mainLoop.func)return console.error("emscripten_set_main_loop_timing: Cannot set timing mode for main loop since a main loop does not exist! Call emscripten_set_main_loop first to set one up."),1
if(0==e)Browser.mainLoop.scheduler=function(){var e=0|Math.max(0,Browser.mainLoop.tickStartTime+t-_emscripten_get_now())
setTimeout(Browser.mainLoop.runner,e)},Browser.mainLoop.method="timeout"
else if(1==e)Browser.mainLoop.scheduler=function(){Browser.requestAnimationFrame(Browser.mainLoop.runner)},Browser.mainLoop.method="rAF"
else if(2==e){if("undefined"==typeof setImmediate){var r=[],n="setimmediate",i=function(e){(e.data===n||e.data.target===n)&&(e.stopPropagation(),r.shift()())}
addEventListener("message",i,!0),setImmediate=function(e){r.push(e),ENVIRONMENT_IS_WORKER?(void 0===Module.setImmediates&&(Module.setImmediates=[]),Module.setImmediates.push(e),postMessage({target:n})):postMessage(n,"*")}}Browser.mainLoop.scheduler=function(){setImmediate(Browser.mainLoop.runner)},Browser.mainLoop.method="immediate"}return 0}function _emscripten_get_now(){abort()}function _emscripten_set_main_loop(e,t,r,n,i){Module.noExitRuntime=!0,assert(!Browser.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Browser.mainLoop.func=e,Browser.mainLoop.arg=n
var o
o=void 0!==n?function(){Module.dynCall_vi(e,n)}:function(){Module.dynCall_v(e)}
var a=Browser.mainLoop.currentlyRunningMainloop
if(Browser.mainLoop.runner=function(){if(!ABORT){if(Browser.mainLoop.queue.length>0){var e=Date.now(),t=Browser.mainLoop.queue.shift()
if(t.func(t.arg),Browser.mainLoop.remainingBlockers){var r=Browser.mainLoop.remainingBlockers,n=r%1==0?r-1:Math.floor(r)
t.counted?Browser.mainLoop.remainingBlockers=n:(n+=.5,Browser.mainLoop.remainingBlockers=(8*r+n)/9)}if(console.log('main loop blocker "'+t.name+'" took '+(Date.now()-e)+" ms"),Browser.mainLoop.updateStatus(),a<Browser.mainLoop.currentlyRunningMainloop)return
return void setTimeout(Browser.mainLoop.runner,0)}if(!(a<Browser.mainLoop.currentlyRunningMainloop)){if(Browser.mainLoop.currentFrameNumber=Browser.mainLoop.currentFrameNumber+1|0,1==Browser.mainLoop.timingMode&&Browser.mainLoop.timingValue>1&&Browser.mainLoop.currentFrameNumber%Browser.mainLoop.timingValue!=0)return void Browser.mainLoop.scheduler()
0==Browser.mainLoop.timingMode&&(Browser.mainLoop.tickStartTime=_emscripten_get_now()),GL.newRenderingFrameStarted(),"timeout"===Browser.mainLoop.method&&Module.ctx&&(err("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),Browser.mainLoop.method=""),Browser.mainLoop.runIter(o),checkStackCookie(),a<Browser.mainLoop.currentlyRunningMainloop||("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Browser.mainLoop.scheduler())}}},i||(t&&t>0?_emscripten_set_main_loop_timing(0,1e3/t):_emscripten_set_main_loop_timing(1,1),Browser.mainLoop.scheduler()),r)throw"SimulateInfiniteLoop"}function _SDL_GetTicks(){return Date.now()-SDL.startTime|0}function _SDL_LockSurface(e){var t=SDL.surfaces[e]
if(t.locked++,t.locked>1)return 0
if(t.buffer||(t.buffer=_malloc(t.width*t.height*4),HEAP32[e+20>>2]=t.buffer),HEAP32[e+20>>2]=t.buffer,e==SDL.screen&&Module.screenIsReadOnly&&t.image)return 0
if(SDL.defaults.discardOnLock){if(t.image||(t.image=t.ctx.createImageData(t.width,t.height)),!SDL.defaults.opaqueFrontBuffer)return}else t.image=t.ctx.getImageData(0,0,t.width,t.height)
if(e==SDL.screen&&SDL.defaults.opaqueFrontBuffer)for(var r=t.image.data,n=r.length,i=0;n/4>i;i++)r[4*i+3]=255
if(SDL.defaults.copyOnLock&&!SDL.defaults.discardOnLock){if(t.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+Error().stack
HEAPU8.set(t.image.data,t.buffer)}return 0}function _SDL_GL_SetAttribute(e,t){e in SDL.glAttributes||abort("Unknown SDL GL attribute ("+e+"). Please check if your SDL version is supported."),SDL.glAttributes[e]=t}function _SDL_GL_SwapBuffers(){Browser.doSwapBuffers&&Browser.doSwapBuffers()}function _SDL_GetError(){return SDL.errorMessage||(SDL.errorMessage=allocate(intArrayFromString("unknown SDL-emscripten error"),"i8",ALLOC_NORMAL)),SDL.errorMessage}function _SDL_Init(e){if(SDL.startTime=Date.now(),SDL.initFlags=e,!Module.doNotCaptureKeyboard){var t=Module.keyboardListeningElement||document
t.addEventListener("keydown",SDL.receiveEvent),t.addEventListener("keyup",SDL.receiveEvent),t.addEventListener("keypress",SDL.receiveEvent),window.addEventListener("focus",SDL.receiveEvent),window.addEventListener("blur",SDL.receiveEvent),document.addEventListener("visibilitychange",SDL.receiveEvent)}return window.addEventListener("unload",SDL.receiveEvent),SDL.keyboardState=_malloc(65536),_memset(SDL.keyboardState,0,65536),SDL.DOMEventToSDLEvent.keydown=768,SDL.DOMEventToSDLEvent.keyup=769,SDL.DOMEventToSDLEvent.keypress=771,SDL.DOMEventToSDLEvent.mousedown=1025,SDL.DOMEventToSDLEvent.mouseup=1026,SDL.DOMEventToSDLEvent.mousemove=1024,SDL.DOMEventToSDLEvent.wheel=1027,SDL.DOMEventToSDLEvent.touchstart=1792,SDL.DOMEventToSDLEvent.touchend=1793,SDL.DOMEventToSDLEvent.touchmove=1794,SDL.DOMEventToSDLEvent.unload=256,SDL.DOMEventToSDLEvent.resize=28673,SDL.DOMEventToSDLEvent.visibilitychange=512,SDL.DOMEventToSDLEvent.focus=512,SDL.DOMEventToSDLEvent.blur=512,SDL.DOMEventToSDLEvent.joystick_axis_motion=1536,SDL.DOMEventToSDLEvent.joystick_button_down=1539,SDL.DOMEventToSDLEvent.joystick_button_up=1540,0}function _SDL_AudioQuit(){for(var e=0;e<SDL.numChannels;++e)SDL.channels[e].audio&&(SDL.channels[e].audio.pause(),SDL.channels[e].audio=void 0)
SDL.music.audio&&SDL.music.audio.pause(),SDL.music.audio=void 0}function _SDL_Quit(){_SDL_AudioQuit(),out("SDL_Quit called (and ignored)")}function ___assert_fail(e,t,r,n){abort("Assertion failed: "+UTF8ToString(e)+", at: "+[t?UTF8ToString(t):"unknown filename",r,n?UTF8ToString(n):"unknown function"])}function ___buildEnvironment(e){var t,r,n=64,i=1024
___buildEnvironment.called?(r=HEAP32[e>>2],t=HEAP32[r>>2]):(___buildEnvironment.called=!0,ENV.USER=ENV.LOGNAME="web_user",ENV.PATH="/",ENV.PWD="/",ENV.HOME="/home/web_user",ENV.LANG="C.UTF-8",ENV.LANG=("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",ENV._=thisProgram,t=getMemory(i),r=getMemory(4*n),HEAP32[r>>2]=t,HEAP32[e>>2]=r)
var o=[],a=0
for(var s in ENV)if("string"==typeof ENV[s]){var u=s+"="+ENV[s]
o.push(u),a+=u.length}if(a>i)throw Error("Environment size exceeded TOTAL_ENV_SIZE!")
for(var c=4,l=0;l<o.length;l++){var u=o[l]
writeAsciiToMemory(u,t),HEAP32[r+l*c>>2]=t,t+=u.length+1}HEAP32[r+o.length*c>>2]=0}function _emscripten_get_now_is_monotonic(){return ENVIRONMENT_IS_NODE||"undefined"!=typeof dateNow||"object"==typeof performance&&performance&&"function"==typeof performance.now}function _clock_gettime(e,t){var r
if(0===e)r=Date.now()
else{if(1!==e||!_emscripten_get_now_is_monotonic())return ___setErrNo(22),-1
r=_emscripten_get_now()}return HEAP32[t>>2]=r/1e3|0,HEAP32[t+4>>2]=r%1e3*1e3*1e3|0,0}function ___clock_gettime(e,t){return _clock_gettime(e,t)}function ___cxa_allocate_exception(e){return _malloc(e)}function ___cxa_pure_virtual(){throw ABORT=!0,"Pure virtual function called!"}function ___cxa_throw(e,t,r){throw ___exception_infos[e]={ptr:e,adjusted:[e],type:t,destructor:r,refcount:0,caught:!1,rethrown:!1},___exception_last=e,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exceptions++:__ZSt18uncaught_exceptionv.uncaught_exceptions=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_uncaught_exceptions(){return __ZSt18uncaught_exceptionv.uncaught_exceptions}function ___lock(){}function ___map_file(e,t){return ___setErrNo(1),-1}function ___syscall10(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr()
return FS.unlink(r),0}catch(n){return void 0!==FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function ___syscall114(e,t){SYSCALLS.varargs=t
try{abort("cannot wait on child processes")}catch(r){return void 0!==FS&&r instanceof FS.ErrnoError||abort(r),-r.errno}}function ___syscall12(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr()
return FS.chdir(r),0}catch(n){return void 0!==FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function ___syscall140(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),i=SYSCALLS.get(),o=SYSCALLS.get(),a=SYSCALLS.get(),s=4294967296,u=n*s+(i>>>0),c=9007199254740992
return-c>=u||u>=c?-75:(FS.llseek(r,u,a),tempI64=[r.position>>>0,(tempDouble=r.position,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[o>>2]=tempI64[0],HEAP32[o+4>>2]=tempI64[1],r.getdents&&0===u&&0===a&&(r.getdents=null),0)}catch(l){return void 0!==FS&&l instanceof FS.ErrnoError||abort(l),-l.errno}}function ___syscall145(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),i=SYSCALLS.get()
return SYSCALLS.doReadv(r,n,i)}catch(o){return void 0!==FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),i=SYSCALLS.get()
return SYSCALLS.doWritev(r,n,i)}catch(o){return void 0!==FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function ___syscall183(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.get(),n=SYSCALLS.get()
if(0===n)return-22
var i=FS.cwd(),o=lengthBytesUTF8(i)
return o+1>n?-34:(stringToUTF8(i,r,n),r)}catch(a){return void 0!==FS&&a instanceof FS.ErrnoError||abort(a),-a.errno}}function ___syscall191(e,t){SYSCALLS.varargs=t
try{var r=(SYSCALLS.get(),SYSCALLS.get())
return HEAP32[r>>2]=-1,HEAP32[r+4>>2]=-1,HEAP32[r+8>>2]=-1,HEAP32[r+12>>2]=-1,0}catch(n){return void 0!==FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function ___syscall195(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr(),n=SYSCALLS.get()
return SYSCALLS.doStat(FS.stat,r,n)}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall196(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr(),n=SYSCALLS.get()
return SYSCALLS.doStat(FS.lstat,r,n)}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall197(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get()
return SYSCALLS.doStat(FS.stat,r.path,n)}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall202(e,t){SYSCALLS.varargs=t
try{return 0}catch(r){return void 0!==FS&&r instanceof FS.ErrnoError||abort(r),-r.errno}}function ___syscall199(e,t){return ___syscall202(e,t)}function ___syscall20(e,t){SYSCALLS.varargs=t
try{return PROCINFO.pid}catch(r){return void 0!==FS&&r instanceof FS.ErrnoError||abort(r),-r.errno}}function ___syscall201(e,t){return ___syscall202(e,t)}function ___syscall220(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),i=SYSCALLS.get()
r.getdents||(r.getdents=FS.readdir(r.path))
for(var o=280,a=0,s=FS.llseek(r,0,1),u=Math.floor(s/o);u<r.getdents.length&&i>=a+o;){var c,l,d=r.getdents[u]
if("."===d[0])c=1,l=4
else{var m=FS.lookupNode(r.node,d)
c=m.id,l=FS.isChrdev(m.mode)?2:FS.isDir(m.mode)?4:FS.isLink(m.mode)?10:8}tempI64=[c>>>0,(tempDouble=c,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+a>>2]=tempI64[0],HEAP32[n+a+4>>2]=tempI64[1],tempI64=[(u+1)*o>>>0,(tempDouble=(u+1)*o,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+a+8>>2]=tempI64[0],HEAP32[n+a+12>>2]=tempI64[1],HEAP16[n+a+16>>1]=280,HEAP8[n+a+18>>0]=l,stringToUTF8(d,n+a+19,256),a+=o,u+=1}return FS.llseek(r,u*o,0),a}catch(f){return void 0!==FS&&f instanceof FS.ErrnoError||abort(f),-f.errno}}function ___syscall221(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get()
switch(n){case 0:var i=SYSCALLS.get()
if(0>i)return-22
var o
return o=FS.open(r.path,r.flags,0,i),o.fd
case 1:case 2:return 0
case 3:return r.flags
case 4:var i=SYSCALLS.get()
return r.flags|=i,0
case 12:var i=SYSCALLS.get(),a=0
return HEAP16[i+a>>1]=2,0
case 13:case 14:return 0
case 16:case 8:return-22
case 9:return ___setErrNo(22),-1
default:return-22}}catch(s){return void 0!==FS&&s instanceof FS.ErrnoError||abort(s),-s.errno}}function ___syscall3(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),i=SYSCALLS.get()
return FS.read(r,HEAP8,n,i)}catch(o){return void 0!==FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function ___syscall33(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr(),n=SYSCALLS.get()
return SYSCALLS.doAccess(r,n)}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall340(e,t){SYSCALLS.varargs=t
try{var r=(SYSCALLS.get(),SYSCALLS.get(),SYSCALLS.get(),SYSCALLS.get())
return r&&(HEAP32[r>>2]=-1,HEAP32[r+4>>2]=-1,HEAP32[r+8>>2]=-1,HEAP32[r+12>>2]=-1),0}catch(n){return void 0!==FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function ___syscall38(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr(),n=SYSCALLS.getStr()
return FS.rename(r,n),0}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall39(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr(),n=SYSCALLS.get()
return SYSCALLS.doMkdir(r,n)}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall4(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),i=SYSCALLS.get()
return FS.write(r,HEAP8,n,i)}catch(o){return void 0!==FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function ___syscall40(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr()
return FS.rmdir(r),0}catch(n){return void 0!==FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function ___syscall41(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD()
return FS.open(r.path,r.flags,0).fd}catch(n){return void 0!==FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function ___syscall42(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.get()
if(0==r)throw new FS.ErrnoError(14)
var n=PIPEFS.createPipe()
return HEAP32[r>>2]=n.readable_fd,HEAP32[r+4>>2]=n.writable_fd,0}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall5(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr(),n=SYSCALLS.get(),i=SYSCALLS.get(),o=FS.open(r,n,i)
return o.fd}catch(a){return void 0!==FS&&a instanceof FS.ErrnoError||abort(a),-a.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get()
switch(n){case 21509:case 21505:return r.tty?0:-25
case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-25
case 21519:if(!r.tty)return-25
var i=SYSCALLS.get()
return HEAP32[i>>2]=0,0
case 21520:return r.tty?-22:-25
case 21531:var i=SYSCALLS.get()
return FS.ioctl(r,n,i)
case 21523:return r.tty?0:-25
case 21524:return r.tty?0:-25
default:abort("bad ioctl syscall "+n)}}catch(o){return void 0!==FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function ___syscall6(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD()
return FS.close(r),0}catch(n){return void 0!==FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function ___syscall63(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get()
return r.fd===n?n:SYSCALLS.doDup(r.path,r.flags,n)}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall77(e,t){SYSCALLS.varargs=t
try{var r=(SYSCALLS.get(),SYSCALLS.get())
return _memset(r,0,136),HEAP32[r>>2]=1,HEAP32[r+4>>2]=2,HEAP32[r+8>>2]=3,HEAP32[r+12>>2]=4,0}catch(n){return void 0!==FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function ___syscall83(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr(),n=SYSCALLS.getStr()
return FS.symlink(r,n),0}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___syscall85(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.getStr(),n=SYSCALLS.get(),i=SYSCALLS.get()
return SYSCALLS.doReadlink(r,n,i)}catch(o){return void 0!==FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function __emscripten_syscall_munmap(e,t){if(-1===e||0===t)return-22
var r=SYSCALLS.mappings[e]
if(!r)return 0
if(t===r.len){var n=FS.getStream(r.fd)
SYSCALLS.doMsync(e,n,t,r.flags),FS.munmap(n),SYSCALLS.mappings[e]=null,r.allocated&&_free(r.malloc)}return 0}function ___syscall91(e,t){SYSCALLS.varargs=t
try{var r=SYSCALLS.get(),n=SYSCALLS.get()
return __emscripten_syscall_munmap(r,n)}catch(i){return void 0!==FS&&i instanceof FS.ErrnoError||abort(i),-i.errno}}function ___unlock(){}function _exit(e){exit(e)}function __exit(e){return _exit(e)}function _abort(){Module.abort()}function _atexit(e,t){warnOnce("atexit() called, but EXIT_RUNTIME is not set, so atexits() will not be called. set EXIT_RUNTIME to 1 (see the FAQ)"),__ATEXIT__.unshift({func:e,arg:t})}function _clock(){return void 0===_clock.start&&(_clock.start=Date.now()),1e3*(Date.now()-_clock.start)|0}function _difftime(e,t){return e-t}function _dlopen(){abort("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function _dlclose(){return _dlopen.apply(null,arguments)}function _dlerror(){return _dlopen.apply(null,arguments)}function _dlsym(){return _dlopen.apply(null,arguments)}function _emcctime(){return 1e3*Math.floor(Date.now()-UI.Datestart)}function _emscripten_get_canvas_size(e,t,r){var n=Module.canvas
HEAP32[e>>2]=n.width,HEAP32[t>>2]=n.height,HEAP32[r>>2]=Browser.isFullscreen?1:0}function _emscripten_get_heap_size(){return HEAP8.length}function _longjmp(e,t){throw _setThrew(e,t||1),"longjmp"}function _emscripten_longjmp(e,t){_longjmp(e,t)}function _execl(){return ___setErrNo(8),-1}function _execve(){return _execl.apply(null,arguments)}function _fork(){return ___setErrNo(11),-1}function _getenv(e){return 0===e?0:(e=UTF8ToString(e),ENV.hasOwnProperty(e)?(_getenv.ret&&_free(_getenv.ret),_getenv.ret=allocateUTF8(ENV[e]),_getenv.ret):0)}function _getpwnam(){throw"getpwnam: TODO"}function _getpwuid(e){return 0}function _gettimeofday(e){var t=Date.now()
return HEAP32[e>>2]=t/1e3|0,HEAP32[e+4>>2]=t%1e3*1e3|0,0}function _glEnable(e){GLctx.enable(e)}function _glDisable(e){GLctx.disable(e)}function _glIsEnabled(e){return GLctx.isEnabled(e)}function emscriptenWebGLGet(e,t,r){if(!t)return void GL.recordError(1281)
var n=void 0
switch(e){case 36346:n=1
break
case 36344:return void(0!=r&&1!=r&&GL.recordError(1280))
case 36345:n=0
break
case 34466:var i=GLctx.getParameter(34467)
n=i?i.length:0}if(void 0===n){var o=GLctx.getParameter(e)
switch(typeof o){case"number":n=o
break
case"boolean":n=o?1:0
break
case"string":return void GL.recordError(1280)
case"object":if(null===o)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 34068:n=0
break
default:return void GL.recordError(1280)}else{if(o instanceof Float32Array||o instanceof Uint32Array||o instanceof Int32Array||o instanceof Array){for(var a=0;a<o.length;++a)switch(r){case 0:HEAP32[t+4*a>>2]=o[a]
break
case 2:HEAPF32[t+4*a>>2]=o[a]
break
case 4:HEAP8[t+a>>0]=o[a]?1:0}return}try{n=0|o.name}catch(s){return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+s+")")}}break
default:return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+r+"v: Native code calling glGet"+r+"v("+e+") and it returns "+o+" of type "+typeof o+"!")}}switch(r){case 1:tempI64=[n>>>0,(tempDouble=n,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1]
break
case 0:HEAP32[t>>2]=n
break
case 2:HEAPF32[t>>2]=n
break
case 4:HEAP8[t>>0]=n?1:0}}function _glGetBooleanv(e,t){emscriptenWebGLGet(e,t,4)}function _glGetIntegerv(e,t){emscriptenWebGLGet(e,t,0)}function stringToNewUTF8(e){var t=lengthBytesUTF8(e)+1,r=_malloc(t)
return stringToUTF8(e,r,t),r}function _glGetString(e){if(GL.stringCache[e])return GL.stringCache[e]
var t
switch(e){case 7939:for(var r=GLctx.getSupportedExtensions(),n=[],i=0;i<r.length;++i)n.push(r[i]),n.push("GL_"+r[i])
t=stringToNewUTF8(n.join(" "))
break
case 7936:case 7937:case 37445:case 37446:var o=GLctx.getParameter(e)
o||GL.recordError(1280),t=stringToNewUTF8(o)
break
case 7938:var a=GLctx.getParameter(GLctx.VERSION)
a="OpenGL ES 2.0 ("+a+")",t=stringToNewUTF8(a)
break
case 35724:var s=GLctx.getParameter(GLctx.SHADING_LANGUAGE_VERSION),u=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,c=s.match(u)
null!==c&&(3==c[1].length&&(c[1]=c[1]+"0"),s="OpenGL ES GLSL ES "+c[1]+" ("+s+")"),t=stringToNewUTF8(s)
break
default:return GL.recordError(1280),0}return GL.stringCache[e]=t,t}function _glCreateShader(e){var t=GL.getNewId(GL.shaders)
return GL.shaders[t]=GLctx.createShader(e),t}function _glShaderSource(e,t,r,n){var i=GL.getSource(e,t,r,n)
GLctx.shaderSource(GL.shaders[e],i)}function _glCompileShader(e){GLctx.compileShader(GL.shaders[e])}function _glAttachShader(e,t){GLctx.attachShader(GL.programs[e],GL.shaders[t])}function _glDetachShader(e,t){GLctx.detachShader(GL.programs[e],GL.shaders[t])}function _glUseProgram(e){GLctx.useProgram(GL.programs[e])}function _glDeleteProgram(e){if(e){var t=GL.programs[e]
if(!t)return void GL.recordError(1281)
GLctx.deleteProgram(t),t.name=0,GL.programs[e]=null,GL.programInfos[e]=null}}function _glBindAttribLocation(e,t,r){GLctx.bindAttribLocation(GL.programs[e],t,UTF8ToString(r))}function _glLinkProgram(e){GLctx.linkProgram(GL.programs[e]),GL.populateUniformTable(e)}function _glBindBuffer(e,t){e==GLctx.ARRAY_BUFFER?(GL.currArrayBuffer=t,GLImmediate.lastArrayBuffer=t):e==GLctx.ELEMENT_ARRAY_BUFFER&&(GL.currElementArrayBuffer=t),GLctx.bindBuffer(e,GL.buffers[t])}function _glGetFloatv(e,t){emscriptenWebGLGet(e,t,2)}function _glHint(e,t){GLctx.hint(e,t)}function _glEnableVertexAttribArray(e){GLctx.enableVertexAttribArray(e)}function _glDisableVertexAttribArray(e){GLctx.disableVertexAttribArray(e)}function _glVertexAttribPointer(e,t,r,n,i,o){GLctx.vertexAttribPointer(e,t,r,!!n,i,o)}function _glActiveTexture(e){GLctx.activeTexture(e)}function _glBegin(e){GLImmediate.enabledClientAttributes_preBegin=GLImmediate.enabledClientAttributes,GLImmediate.enabledClientAttributes=[],GLImmediate.clientAttributes_preBegin=GLImmediate.clientAttributes,GLImmediate.clientAttributes=[]
for(var t=0;t<GLImmediate.clientAttributes_preBegin.length;t++)GLImmediate.clientAttributes.push({})
GLImmediate.mode=e,GLImmediate.vertexCounter=0
for(var r=GLImmediate.rendererComponents=[],t=0;t<GLImmediate.NUM_ATTRIBUTES;t++)r[t]=0
GLImmediate.rendererComponentPointer=0,GLImmediate.vertexData=GLImmediate.tempData}function _glBlendFunc(e,t){GLctx.blendFunc(e,t)}function _glClear(e){GLctx.clear(e)}function _glClearColor(e,t,r,n){GLctx.clearColor(e,t,r,n)}function _emscripten_glColor4f(e,t,r,n){if(e=Math.max(Math.min(e,1),0),t=Math.max(Math.min(t,1),0),r=Math.max(Math.min(r,1),0),n=Math.max(Math.min(n,1),0),GLImmediate.mode>=0){var i=GLImmediate.vertexCounter<<2
GLImmediate.vertexDataU8[i+0]=255*e,GLImmediate.vertexDataU8[i+1]=255*t,GLImmediate.vertexDataU8[i+2]=255*r,GLImmediate.vertexDataU8[i+3]=255*n,GLImmediate.vertexCounter++,GLImmediate.addRendererComponent(GLImmediate.COLOR,4,GLctx.UNSIGNED_BYTE)}else GLImmediate.clientColor[0]=e,GLImmediate.clientColor[1]=t,GLImmediate.clientColor[2]=r,GLImmediate.clientColor[3]=n}function _glColor3f(e,t,r){_emscripten_glColor4f(e,t,r,1)}function _glDepthFunc(e){GLctx.depthFunc(e)}function _glEnd(){GLImmediate.prepareClientAttributes(GLImmediate.rendererComponents[GLImmediate.VERTEX],!0),GLImmediate.firstVertex=0,GLImmediate.lastVertex=GLImmediate.vertexCounter/(GLImmediate.stride>>2),GLImmediate.flush(),GLImmediate.disableBeginEndClientAttributes(),GLImmediate.mode=-1,GLImmediate.enabledClientAttributes=GLImmediate.enabledClientAttributes_preBegin,GLImmediate.clientAttributes=GLImmediate.clientAttributes_preBegin,GLImmediate.currentRenderer=null,GLImmediate.modifiedClientAttributes=!0}function _glFinish(){GLctx.finish()}function _glFlush(){GLctx.flush()}function _glFrustum(e,t,r,n,i,o){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixLib.mat4.multiply(GLImmediate.matrix[GLImmediate.currentMatrix],GLImmediate.matrixLib.mat4.frustum(e,t,r,n,i,o))}function _glLightfv(){throw"glLightfv: TODO"}function _glLineWidth(e){GLctx.lineWidth(e)}function _glLoadIdentity(){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixLib.mat4.identity(GLImmediate.matrix[GLImmediate.currentMatrix])}function _glMatrixMode(e){if(5888==e)GLImmediate.currentMatrix=0
else if(5889==e)GLImmediate.currentMatrix=1
else{if(5890!=e)throw"Wrong mode "+e+" passed to glMatrixMode"
GLImmediate.useTextureMatrix=!0,GLImmediate.currentMatrix=2+GLImmediate.clientActiveTexture}}function _glNormal3f(){}function _glOrtho(e,t,r,n,i,o){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixLib.mat4.multiply(GLImmediate.matrix[GLImmediate.currentMatrix],GLImmediate.matrixLib.mat4.ortho(e,t,r,n,i,o))}function _glPolygonMode(){}function _glPolygonOffset(e,t){GLctx.polygonOffset(e,t)}function _glPopMatrix(){return 0==GLImmediate.matrixStack[GLImmediate.currentMatrix].length?void GL.recordError(1284):(GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,void(GLImmediate.matrix[GLImmediate.currentMatrix]=GLImmediate.matrixStack[GLImmediate.currentMatrix].pop()))}function _glPushMatrix(){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixStack[GLImmediate.currentMatrix].push(Array.prototype.slice.call(GLImmediate.matrix[GLImmediate.currentMatrix]))}function _glRotated(e,t,r,n){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixLib.mat4.rotate(GLImmediate.matrix[GLImmediate.currentMatrix],e*Math.PI/180,[t,r,n])}function _glScaled(e,t,r){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixLib.mat4.scale(GLImmediate.matrix[GLImmediate.currentMatrix],[e,t,r])}function _glScalef(e,t,r){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixLib.mat4.scale(GLImmediate.matrix[GLImmediate.currentMatrix],[e,t,r])}function _glShadeModel(){warnOnce("TODO: glShadeModel")}function _glTranslated(e,t,r){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixLib.mat4.translate(GLImmediate.matrix[GLImmediate.currentMatrix],[e,t,r])}function _glTranslatef(e,t,r){GLImmediate.matricesModified=!0,GLImmediate.matrixVersion[GLImmediate.currentMatrix]=GLImmediate.matrixVersion[GLImmediate.currentMatrix]+1|0,GLImmediate.matrixLib.mat4.translate(GLImmediate.matrix[GLImmediate.currentMatrix],[e,t,r])}function _glVertex3f(e,t,r){assert(GLImmediate.mode>=0),GLImmediate.vertexData[GLImmediate.vertexCounter++]=e,GLImmediate.vertexData[GLImmediate.vertexCounter++]=t,GLImmediate.vertexData[GLImmediate.vertexCounter++]=r,GLImmediate.vertexData[GLImmediate.vertexCounter++]=1,assert(GLImmediate.vertexCounter<<2<GL.MAX_TEMP_BUFFER_SIZE),GLImmediate.addRendererComponent(GLImmediate.VERTEX,4,GLctx.FLOAT)}function _glViewport(e,t,r,n){GLctx.viewport(e,t,r,n)}function _glinit(e,t,r,n,i){var o
o=-1==i?Module.canvas:document.getElementById("gl3d_"+(i+1)),0==e&&0==t&&(e=o.width,t=o.height),SDL.addedResizeListener||(SDL.addedResizeListener=!0,Browser.resizeListeners.push(function(e,t){SDL.settingVideoMode||SDL.receiveEvent({type:"resize",w:e,h:t})})),(e!==o.width||t!==o.height)&&(SDL.settingVideoMode=!0,Browser.setCanvasSize(e,t),SDL.settingVideoMode=!1),SDL.screen&&(SDL.freeSurface(SDL.screen),assert(!SDL.screen)),SDL.GL&&(n=67108864|n),n=n||0
var a=1&n,s=2097152&n,u=67108864&n,c=_malloc(60),l=_malloc(44),d=s?1:4,m=0
a||u||(m=_malloc(e*t*4)),HEAP32[c>>2]=n,HEAP32[c+4>>2]=l,HEAP32[c+8>>2]=e,HEAP32[c+12>>2]=t,HEAP32[c+16>>2]=e*d,HEAP32[c+20>>2]=m,HEAP32[c+36>>2]=0,HEAP32[c+40>>2]=0,HEAP32[c+44>>2]=Module.canvas.width,HEAP32[c+48>>2]=Module.canvas.height,HEAP32[c+56>>2]=1,HEAP32[l>>2]=-2042224636,HEAP32[l+4>>2]=0,HEAP8[l+8>>0]=8*d,HEAP8[l+9>>0]=d,SDL.GL=SDL.GL||u
var f,_={antialias:0!=SDL.glAttributes[13]&&SDL.glAttributes[14]>1,depth:SDL.glAttributes[6]>0,stencil:SDL.glAttributes[7]>0},p={antialias:!1,alpha:!1}
if(_)for(var E in _)p[E]=_[E]
var h=GL.createContext(o,p)
return h&&(f=GL.getContext(h).GLctx),Module.ctx=f,GL.makeContextCurrent(h),Module.useWebGL=!0,Browser.moduleContextCreatedCallbacks.forEach(function(e){e()}),Browser.init(),SDL.surfaces[c]={width:e,height:t,canvas:o,ctx:f,surf:c,buffer:m,pixelFormat:l,alpha:255,flags:n,locked:0,usePageCanvas:!0,source:"screen",isFlagSet:function(e){return n&e}},SDL.screen=c,h}function _kill(e,t){return err("Calling stub instead of kill()"),___setErrNo(ERRNO_CODES.EPERM),-1}function _llvm_bswap_i64(e,t){var r=_llvm_bswap_i32(t)>>>0,n=_llvm_bswap_i32(e)>>>0
return 0|(setTempRet0(n),r)}function _llvm_exp2_f32(e){return Math.pow(2,e)}function _llvm_exp2_f64(e){return _llvm_exp2_f32(e)}function _llvm_log10_f32(e){return Math.log(e)/Math.LN10}function _llvm_log10_f64(e){return _llvm_log10_f32(e)}function _llvm_log2_f32(e){return Math.log(e)/Math.LN2}function _llvm_log2_f64(e){return _llvm_log2_f32(e)}function _llvm_stackrestore(e){var t=_llvm_stacksave,r=t.LLVM_SAVEDSTACKS[e]
t.LLVM_SAVEDSTACKS.splice(e,1),stackRestore(r)}function _llvm_stacksave(){var e=_llvm_stacksave
return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(stackSave()),e.LLVM_SAVEDSTACKS.length-1}function _llvm_trap(){abort("trap!")}function _tzset(){function e(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/)
return t?t[1]:"GMT"}if(!_tzset.called){_tzset.called=!0,HEAP32[__get_timezone()>>2]=60*(new Date).getTimezoneOffset()
var t=new Date(2e3,0,1),r=new Date(2e3,6,1)
HEAP32[__get_daylight()>>2]=+(t.getTimezoneOffset()!=r.getTimezoneOffset())
var n=e(t),i=e(r),o=allocate(intArrayFromString(n),"i8",ALLOC_NORMAL),a=allocate(intArrayFromString(i),"i8",ALLOC_NORMAL)
r.getTimezoneOffset()<t.getTimezoneOffset()?(HEAP32[__get_tzname()>>2]=o,HEAP32[__get_tzname()+4>>2]=a):(HEAP32[__get_tzname()>>2]=a,HEAP32[__get_tzname()+4>>2]=o)}}function _localtime_r(e,t){_tzset()
var r=new Date(1e3*HEAP32[e>>2])
HEAP32[t>>2]=r.getSeconds(),HEAP32[t+4>>2]=r.getMinutes(),HEAP32[t+8>>2]=r.getHours(),HEAP32[t+12>>2]=r.getDate(),HEAP32[t+16>>2]=r.getMonth(),HEAP32[t+20>>2]=r.getFullYear()-1900,HEAP32[t+24>>2]=r.getDay()
var n=new Date(r.getFullYear(),0,1),i=(r.getTime()-n.getTime())/864e5|0
HEAP32[t+28>>2]=i,HEAP32[t+36>>2]=-(60*r.getTimezoneOffset())
var o=new Date(2e3,6,1).getTimezoneOffset(),a=n.getTimezoneOffset(),s=0|(o!=a&&r.getTimezoneOffset()==Math.min(a,o))
HEAP32[t+32>>2]=s
var u=HEAP32[__get_tzname()+(s?4:0)>>2]
return HEAP32[t+40>>2]=u,t}function _localtime(e){return _localtime_r(e,___tm_current)}function _emscripten_memcpy_big(e,t,r){HEAPU8.set(HEAPU8.subarray(t,t+r),e)}function _mp_js_hook(){if("undefined"==typeof window){var e=Module.ccall("mp_hal_get_interrupt_char","number",["number"],["null"]),t=require("fs"),r=Buffer.alloc(1)
try{var n=t.readSync(process.stdin.fd,r,0,1)
n>0&&(r[0]==e?Module.ccall("mp_keyboard_interrupt","null",["null"],["null"]):process.stdout.write(String.fromCharCode(r[0])))}catch(i){if("EAGAIN"!==i.code)throw i}}}function _mp_js_ticks_ms(){return(new Date).getTime()}function _usleep(e){var t=e/1e3
if((ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&self.performance&&self.performance.now)for(var r=self.performance.now();self.performance.now()-r<t;);else for(var r=Date.now();Date.now()-r<t;);return 0}function _nanosleep(e,t){if(0===e)return ___setErrNo(22),-1
var r=HEAP32[e>>2],n=HEAP32[e+4>>2]
return 0>n||n>999999999||0>r?(___setErrNo(22),-1):(0!==t&&(HEAP32[t>>2]=0,HEAP32[t+4>>2]=0),_usleep(1e6*r+n/1e3))}function _popen(){err("missing function: popen"),abort(-1)}function _pthread_cond_wait(){return 0}function _raise(e){return err("Calling stub instead of raise()"),___setErrNo(ERRNO_CODES.ENOSYS),warnOnce("raise() returning an error as we do not support it"),-1}function abortOnCannotGrowMemory(e){abort("Cannot enlarge memory arrays to size "+e+" bytes (OOM). Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+HEAP8.length+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function _emscripten_resize_heap(e){abortOnCannotGrowMemory(e)}function _setenv(e,t,r){if(0===e)return ___setErrNo(22),-1
var n=UTF8ToString(e),i=UTF8ToString(t)
return""===n||-1!==n.indexOf("=")?(___setErrNo(22),-1):ENV.hasOwnProperty(n)&&!r?0:(ENV[n]=i,___buildEnvironment(__get_environ()),0)}function _sigaction(e,t,r){return err("Calling stub instead of sigaction()"),0}function _sigemptyset(e){return HEAP32[e>>2]=0,0}function __isLeapYear(e){return e%4===0&&(e%100!==0||e%400===0)}function __arraySum(e,t){for(var r=0,n=0;t>=n;r+=e[n++]);return r}function __addDays(e,t){for(var r=new Date(e.getTime());t>0;){var n=__isLeapYear(r.getFullYear()),i=r.getMonth(),o=(n?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR)[i]
if(!(t>o-r.getDate()))return r.setDate(r.getDate()+t),r
t-=o-r.getDate()+1,r.setDate(1),11>i?r.setMonth(i+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}function _strftime(e,t,r,n){function i(e,t,r){for(var n="number"==typeof e?""+e:e||"";n.length<t;)n=r[0]+n
return n}function o(e,t){return i(e,t,"0")}function a(e,t){function r(e){return 0>e?-1:e>0?1:0}var n
return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29)
case 1:return e
case 2:return new Date(e.getFullYear(),0,3)
case 3:return new Date(e.getFullYear(),0,2)
case 4:return new Date(e.getFullYear(),0,1)
case 5:return new Date(e.getFullYear()-1,11,31)
case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=__addDays(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),i=s(r),o=s(n)
return a(i,t)<=0?a(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=HEAP32[n+40>>2],l={tm_sec:HEAP32[n>>2],tm_min:HEAP32[n+4>>2],tm_hour:HEAP32[n+8>>2],tm_mday:HEAP32[n+12>>2],tm_mon:HEAP32[n+16>>2],tm_year:HEAP32[n+20>>2],tm_wday:HEAP32[n+24>>2],tm_yday:HEAP32[n+28>>2],tm_isdst:HEAP32[n+32>>2],tm_gmtoff:HEAP32[n+36>>2],tm_zone:c?UTF8ToString(c):""},d=UTF8ToString(r),m={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"}
for(var f in m)d=d.replace(RegExp(f,"g"),m[f])
var _=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],E={"%a":function(e){return _[e.tm_wday].substring(0,3)},"%A":function(e){return _[e.tm_wday]},"%b":function(e){return p[e.tm_mon].substring(0,3)},"%B":function(e){return p[e.tm_mon]},"%C":function(e){var t=e.tm_year+1900
return o(t/100|0,2)},"%d":function(e){return o(e.tm_mday,2)},"%e":function(e){return i(e.tm_mday,2," ")},"%g":function(e){return(""+u(e)).substring(2)},"%G":function(e){return u(e)},"%H":function(e){return o(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour
return 0==t?t=12:t>12&&(t-=12),o(t,2)},"%j":function(e){return o(e.tm_mday+__arraySum(__isLeapYear(e.tm_year+1900)?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,e.tm_mon-1),3)},"%m":function(e){return o(e.tm_mon+1,2)},"%M":function(e){return o(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return o(e.tm_sec,2)},"%t":function(){return"	"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),r=0===t.getDay()?t:__addDays(t,7-t.getDay()),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday)
if(a(r,n)<0){var i=__arraySum(__isLeapYear(n.getFullYear())?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,n.getMonth()-1)-31,s=31-r.getDate(),u=s+i+n.getDate()
return o(Math.ceil(u/7),2)}return 0===a(r,t)?"01":"00"},"%V":function(e){var t=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),n=s(t),i=s(r),u=__addDays(new Date(e.tm_year+1900,0,1),e.tm_yday)
if(a(u,n)<0)return"53"
if(a(i,u)<=0)return"01"
var c
return c=n.getFullYear()<e.tm_year+1900?e.tm_yday+32-n.getDate():e.tm_yday+1-n.getDate(),o(Math.ceil(c/7),2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),r=1===t.getDay()?t:__addDays(t,0===t.getDay()?1:7-t.getDay()+1),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday)
if(a(r,n)<0){var i=__arraySum(__isLeapYear(n.getFullYear())?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,n.getMonth()-1)-31,s=31-r.getDate(),u=s+i+n.getDate()
return o(Math.ceil(u/7),2)}return 0===a(r,t)?"01":"00"},"%y":function(e){return(""+(e.tm_year+1900)).substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,r=t>=0
return t=Math.abs(t)/60,t=t/60*100+t%60,(r?"+":"-")+("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}}
for(var f in E)d.indexOf(f)>=0&&(d=d.replace(RegExp(f,"g"),E[f](l)))
var h=intArrayFromString(d,!1)
return h.length>t?0:(writeArrayToMemory(h,e),h.length-1)}function _strftime_l(e,t,r,n){return _strftime(e,t,r,n)}function _sysconf(e){switch(e){case 30:return PAGE_SIZE
case 85:var t=2147418112
return t=HEAPU8.length,t/PAGE_SIZE
case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809
case 79:return 0
case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1
case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1
case 74:case 60:case 69:case 70:case 4:return 1024
case 31:case 42:case 72:return 32
case 87:case 26:case 33:return 2147483647
case 34:case 1:return 47839
case 38:case 36:return 99
case 43:case 37:return 2048
case 0:return 2097152
case 3:return 65536
case 28:return 32768
case 44:return 32767
case 75:return 16384
case 39:return 1e3
case 89:return 700
case 71:return 256
case 40:return 255
case 2:return 100
case 180:return 64
case 25:return 20
case 5:return 16
case 6:return 6
case 73:return 4
case 84:return"object"==typeof navigator?navigator.hardwareConcurrency||1:1}return ___setErrNo(22),-1}function _system(e){return ___setErrNo(11),-1}function _time(e){var t=Date.now()/1e3|0
return e&&(HEAP32[e>>2]=t),t}function _unsetenv(e){return 0===e?(___setErrNo(22),-1):(e=UTF8ToString(e),""===e||-1!==e.indexOf("=")?(___setErrNo(22),-1):(ENV.hasOwnProperty(e)&&(delete ENV[e],___buildEnvironment(__get_environ())),0))}function _utimes(e,t){var r
if(t){var n=8
r=1e3*HEAP32[t+n>>2],n=12,r+=HEAP32[t+n>>2]/1e3}else r=Date.now()
e=UTF8ToString(e)
try{return FS.utime(e,r,r),0}catch(i){return FS.handleFSError(i),-1}}function _wait(e){return ___setErrNo(10),-1}function _waitpid(){return _wait.apply(null,arguments)}function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,i=Array(n),o=stringToUTF8Array(e,i,0,i.length)
return t&&(i.length=o),i}function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r]
n>255&&(ASSERTIONS&&assert(!1,"Character code "+n+" ("+String.fromCharCode(n)+")  at offset "+r+" not in 0x00-0xFF."),n&=255),t.push(String.fromCharCode(n))}return t.join("")}function intArrayFromBase64(e){if("boolean"==typeof ENVIRONMENT_IS_NODE&&ENVIRONMENT_IS_NODE){var t
try{t=Buffer.from(e,"base64")}catch(r){t=new Buffer(e,"base64")}return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}throw Error("Converting base64 string to bytes failed.")}function tryParseAsDataURI(e){return isDataURI(e)?intArrayFromBase64(e.slice(dataURIPrefix.length)):void 0}function nullFunc_dd(e){abortFnPtrError(e,"dd")}function nullFunc_ddd(e){abortFnPtrError(e,"ddd")}function nullFunc_di(e){abortFnPtrError(e,"di")}function nullFunc_did(e){abortFnPtrError(e,"did")}function nullFunc_i(e){abortFnPtrError(e,"i")}function nullFunc_ii(e){abortFnPtrError(e,"ii")}function nullFunc_iidi(e){abortFnPtrError(e,"iidi")}function nullFunc_iidiiii(e){abortFnPtrError(e,"iidiiii")}function nullFunc_iii(e){abortFnPtrError(e,"iii")}function nullFunc_iiii(e){abortFnPtrError(e,"iiii")}function nullFunc_iiiid(e){abortFnPtrError(e,"iiiid")}function nullFunc_iiiii(e){abortFnPtrError(e,"iiiii")}function nullFunc_iiiiid(e){abortFnPtrError(e,"iiiiid")}function nullFunc_iiiiii(e){abortFnPtrError(e,"iiiiii")}function nullFunc_iiiiiid(e){abortFnPtrError(e,"iiiiiid")}function nullFunc_iiiiiii(e){abortFnPtrError(e,"iiiiiii")}function nullFunc_iiiiiiii(e){abortFnPtrError(e,"iiiiiiii")}function nullFunc_iiiiiiiii(e){abortFnPtrError(e,"iiiiiiiii")}function nullFunc_iiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiii")}function nullFunc_iiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiii")}function nullFunc_iiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiiiiiiiiii")}function nullFunc_iiiiiiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"iiiiiiiiiiiiiiiiiiiii")}function nullFunc_iiiiij(e){abortFnPtrError(e,"iiiiij")}function nullFunc_iiiij(e){abortFnPtrError(e,"iiiij")}function nullFunc_iiiijj(e){abortFnPtrError(e,"iiiijj")}function nullFunc_iiiji(e){abortFnPtrError(e,"iiiji")}function nullFunc_iiijj(e){abortFnPtrError(e,"iiijj")}function nullFunc_iiji(e){abortFnPtrError(e,"iiji")}function nullFunc_iijijji(e){abortFnPtrError(e,"iijijji")}function nullFunc_iijijjji(e){abortFnPtrError(e,"iijijjji")}function nullFunc_jii(e){abortFnPtrError(e,"jii")}function nullFunc_jiii(e){abortFnPtrError(e,"jiii")}function nullFunc_jiiii(e){abortFnPtrError(e,"jiiii")}function nullFunc_jiiiii(e){abortFnPtrError(e,"jiiiii")}function nullFunc_jiij(e){abortFnPtrError(e,"jiij")}function nullFunc_jij(e){abortFnPtrError(e,"jij")}function nullFunc_jiji(e){abortFnPtrError(e,"jiji")}function nullFunc_jijii(e){abortFnPtrError(e,"jijii")}function nullFunc_jijiii(e){abortFnPtrError(e,"jijiii")}function nullFunc_jijiiii(e){abortFnPtrError(e,"jijiiii")}function nullFunc_jijiiiii(e){abortFnPtrError(e,"jijiiiii")}function nullFunc_jijij(e){abortFnPtrError(e,"jijij")}function nullFunc_jijj(e){abortFnPtrError(e,"jijj")}function nullFunc_jijji(e){abortFnPtrError(e,"jijji")}function nullFunc_jijjiii(e){abortFnPtrError(e,"jijjiii")}function nullFunc_v(e){abortFnPtrError(e,"v")}function nullFunc_vi(e){abortFnPtrError(e,"vi")}function nullFunc_vid(e){abortFnPtrError(e,"vid")}function nullFunc_vidddiii(e){abortFnPtrError(e,"vidddiii")}function nullFunc_vidi(e){abortFnPtrError(e,"vidi")}function nullFunc_vii(e){abortFnPtrError(e,"vii")}function nullFunc_viid(e){abortFnPtrError(e,"viid")}function nullFunc_viii(e){abortFnPtrError(e,"viii")}function nullFunc_viiidd(e){abortFnPtrError(e,"viiidd")}function nullFunc_viiii(e){abortFnPtrError(e,"viiii")}function nullFunc_viiiii(e){abortFnPtrError(e,"viiiii")}function nullFunc_viiiiii(e){abortFnPtrError(e,"viiiiii")}function nullFunc_viiiiiii(e){abortFnPtrError(e,"viiiiiii")}function nullFunc_viiiiiiii(e){abortFnPtrError(e,"viiiiiiii")}function nullFunc_viiiiiiiii(e){abortFnPtrError(e,"viiiiiiiii")}function nullFunc_viiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiii")}function nullFunc_viiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiii")}function nullFunc_viiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiii")}function nullFunc_viiiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiiii")}function nullFunc_viiiiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiiiii")}function nullFunc_viiiiiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiiiiii")}function nullFunc_viiiiiiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiiiiiii")}function nullFunc_viiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiiiiiiii")}function nullFunc_viiiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiiiiiiiii")}function nullFunc_viiiiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiiiiiiiiii")}function nullFunc_viiiiiiiiiiiiiiiiiiii(e){abortFnPtrError(e,"viiiiiiiiiiiiiiiiiiii")}function nullFunc_viijii(e){abortFnPtrError(e,"viijii")}function nullFunc_vij(e){abortFnPtrError(e,"vij")}function nullFunc_viji(e){abortFnPtrError(e,"viji")}function nullFunc_vijjii(e){abortFnPtrError(e,"vijjii")}function invoke_dd(e,t){var r=stackSave()
try{return dynCall_dd(e,t)}catch(n){if(stackRestore(r),n!==n+0&&"longjmp"!==n)throw n
_setThrew(1,0)}}function invoke_di(e,t){var r=stackSave()
try{return dynCall_di(e,t)}catch(n){if(stackRestore(r),n!==n+0&&"longjmp"!==n)throw n
_setThrew(1,0)}}function invoke_i(e){var t=stackSave()
try{return dynCall_i(e)}catch(r){if(stackRestore(t),r!==r+0&&"longjmp"!==r)throw r
_setThrew(1,0)}}function invoke_ii(e,t){var r=stackSave()
try{return dynCall_ii(e,t)}catch(n){if(stackRestore(r),n!==n+0&&"longjmp"!==n)throw n
_setThrew(1,0)}}function invoke_iidi(e,t,r,n){var i=stackSave()
try{return dynCall_iidi(e,t,r,n)}catch(o){if(stackRestore(i),o!==o+0&&"longjmp"!==o)throw o
_setThrew(1,0)}}function invoke_iii(e,t,r){var n=stackSave()
try{return dynCall_iii(e,t,r)}catch(i){if(stackRestore(n),i!==i+0&&"longjmp"!==i)throw i
_setThrew(1,0)}}function invoke_iiii(e,t,r,n){var i=stackSave()
try{return dynCall_iiii(e,t,r,n)}catch(o){if(stackRestore(i),o!==o+0&&"longjmp"!==o)throw o
_setThrew(1,0)}}function invoke_iiiii(e,t,r,n,i){var o=stackSave()
try{return dynCall_iiiii(e,t,r,n,i)}catch(a){if(stackRestore(o),a!==a+0&&"longjmp"!==a)throw a
_setThrew(1,0)}}function invoke_iiiiii(e,t,r,n,i,o){var a=stackSave()
try{return dynCall_iiiiii(e,t,r,n,i,o)}catch(s){if(stackRestore(a),s!==s+0&&"longjmp"!==s)throw s
_setThrew(1,0)}}function invoke_v(e){var t=stackSave()
try{dynCall_v(e)}catch(r){if(stackRestore(t),r!==r+0&&"longjmp"!==r)throw r
_setThrew(1,0)}}function invoke_vi(e,t){var r=stackSave()
try{dynCall_vi(e,t)}catch(n){if(stackRestore(r),n!==n+0&&"longjmp"!==n)throw n
_setThrew(1,0)}}function invoke_vii(e,t,r){var n=stackSave()
try{dynCall_vii(e,t,r)}catch(i){if(stackRestore(n),i!==i+0&&"longjmp"!==i)throw i
_setThrew(1,0)}}function invoke_viid(e,t,r,n){var i=stackSave()
try{dynCall_viid(e,t,r,n)}catch(o){if(stackRestore(i),o!==o+0&&"longjmp"!==o)throw o
_setThrew(1,0)}}function invoke_viii(e,t,r,n){var i=stackSave()
try{dynCall_viii(e,t,r,n)}catch(o){if(stackRestore(i),o!==o+0&&"longjmp"!==o)throw o
_setThrew(1,0)}}function invoke_viiidd(e,t,r,n,i,o){var a=stackSave()
try{dynCall_viiidd(e,t,r,n,i,o)}catch(s){if(stackRestore(a),s!==s+0&&"longjmp"!==s)throw s
_setThrew(1,0)}}function invoke_viiii(e,t,r,n,i){var o=stackSave()
try{dynCall_viiii(e,t,r,n,i)}catch(a){if(stackRestore(o),a!==a+0&&"longjmp"!==a)throw a
_setThrew(1,0)}}function invoke_viiiii(e,t,r,n,i,o){var a=stackSave()
try{dynCall_viiiii(e,t,r,n,i,o)}catch(s){if(stackRestore(a),s!==s+0&&"longjmp"!==s)throw s
_setThrew(1,0)}}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function run(e){function t(){Module.calledRun||(Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),assert(!Module._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),postRun()))}e=e||arguments_,runDependencies>0||(writeStackCookie(),preRun(),runDependencies>0||Module.calledRun||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t(),checkStackCookie()))}function checkUnflushedContent(){var e=out,t=err,r=!1
out=err=function(e){r=!0}
try{var n=Module._fflush
n&&n(0),["stdout","stderr"].forEach(function(e){var t=FS.analyzePath("/dev/"+e)
if(t){var n=t.object,i=n.rdev,o=TTY.ttys[i]
o&&o.output&&o.output.length&&(r=!0)}})}catch(i){}out=e,err=t,r&&warnOnce("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc.")}function exit(e,t){checkUnflushedContent(),t&&Module.noExitRuntime&&0===e||(Module.noExitRuntime?t||err("exit("+e+") called, but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)"):(ABORT=!0,EXITSTATUS=e,exitRuntime(),Module.onExit&&Module.onExit(e)),quit_(e,new ExitStatus(e)))}function abort(e){Module.onAbort&&Module.onAbort(e),e+="",out(e),err(e),ABORT=!0,EXITSTATUS=1
var t="",r="abort("+e+") at "+stackTrace()+t
throw abortDecorators&&abortDecorators.forEach(function(t){r=t(r,e)}),r}var Module=void 0!==Module?Module:{},moduleOverrides={},key
for(key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key])
var arguments_=[],thisProgram="./this.program",quit_=function(e,t){throw t},ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_HAS_NODE=!1,ENVIRONMENT_IS_SHELL=!1
if(ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_HAS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,ENVIRONMENT_IS_NODE=ENVIRONMENT_HAS_NODE&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER,Module.ENVIRONMENT)throw Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)")
var scriptDirectory="",read_,readAsync,readBinary,setWindowTitle
if(ENVIRONMENT_IS_NODE){scriptDirectory=__dirname+"/"
var nodeFS,nodePath
read_=function(e,t){var r
return r=tryParseAsDataURI(e),r||(nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),e=nodePath.normalize(e),r=nodeFS.readFileSync(e)),t?r:""+r},readBinary=function(e){var t=read_(e,!0)
return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),process.on("unhandledRejection",abort),quit_=function(e){process.exit(e)},Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)"undefined"!=typeof read&&(read_=function(e){var t=tryParseAsDataURI(e)
return t?intArrayToString(t):read(e)}),readBinary=function(e){var t
return(t=tryParseAsDataURI(e))?t:"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(t=read(e,"binary"),assert("object"==typeof t),t)},"undefined"!=typeof scriptArgs?arguments_=scriptArgs:"undefined"!=typeof arguments&&(arguments_=arguments),"function"==typeof quit&&(quit_=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)
else{if(!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER)throw Error("environment detection error")
ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1):"",read_=function(e){try{var t=new XMLHttpRequest
return t.open("GET",e,!1),t.send(null),t.responseText}catch(r){var n=tryParseAsDataURI(e)
if(n)return intArrayToString(n)
throw r}},ENVIRONMENT_IS_WORKER&&(readBinary=function(e){try{var t=new XMLHttpRequest
return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(r){var n=tryParseAsDataURI(e)
if(n)return n
throw r}}),readAsync=function(e,t,r){var n=new XMLHttpRequest
n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||0==n.status&&n.response)return void t(n.response)
var i=tryParseAsDataURI(e)
return i?void t(i.buffer):void r()},n.onerror=r,n.send(null)},setWindowTitle=function(e){document.title=e}}var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console)
for(key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key])
moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Object.getOwnPropertyDescriptor(Module,"arguments")||Object.defineProperty(Module,"arguments",{get:function(){abort("Module.arguments has been replaced with plain arguments_")}}),Module.thisProgram&&(thisProgram=Module.thisProgram),Object.getOwnPropertyDescriptor(Module,"thisProgram")||Object.defineProperty(Module,"thisProgram",{get:function(){abort("Module.thisProgram has been replaced with plain thisProgram")}}),Module.quit&&(quit_=Module.quit),Object.getOwnPropertyDescriptor(Module,"quit")||Object.defineProperty(Module,"quit",{get:function(){abort("Module.quit has been replaced with plain quit_")}}),assert(void 0===Module.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),assert(void 0===Module.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),assert(void 0===Module.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),assert(void 0===Module.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),assert(void 0===Module.read,"Module.read option was removed (modify read_ in JS)"),assert(void 0===Module.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),assert(void 0===Module.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),assert(void 0===Module.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),Object.getOwnPropertyDescriptor(Module,"read")||Object.defineProperty(Module,"read",{get:function(){abort("Module.read has been replaced with plain read_")}}),Object.getOwnPropertyDescriptor(Module,"readAsync")||Object.defineProperty(Module,"readAsync",{get:function(){abort("Module.readAsync has been replaced with plain readAsync")}}),Object.getOwnPropertyDescriptor(Module,"readBinary")||Object.defineProperty(Module,"readBinary",{get:function(){abort("Module.readBinary has been replaced with plain readBinary")}}),stackSave=stackRestore=stackAlloc=function(){abort("cannot use the stack before compiled code is ready to run, and has provided stack access")}
var asm2wasmImports={"f64-rem":function(e,t){return e%t},"debugger":function(){}},functionPointers=Array(0),tempRet0=0,setTempRet0=function(e){tempRet0=e},getTempRet0=function(){return tempRet0},wasmBinary
Module.wasmBinary&&(wasmBinary=Module.wasmBinary),Object.getOwnPropertyDescriptor(Module,"wasmBinary")||Object.defineProperty(Module,"wasmBinary",{get:function(){abort("Module.wasmBinary has been replaced with plain wasmBinary")}}),"object"!=typeof WebAssembly&&abort("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.")
var wasmMemory,wasmTable,ABORT=!1,EXITSTATUS=0,ALLOC_NORMAL=0,ALLOC_NONE=3,UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,UTF16Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,PAGE_SIZE=16384,WASM_PAGE_SIZE=65536,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,STACK_BASE=5310864,STACK_MAX=10553744,DYNAMIC_BASE=10553744,DYNAMICTOP_PTR=5310832
assert(STACK_BASE%16===0,"stack must start aligned"),assert(DYNAMIC_BASE%16===0,"heap must start aligned")
var TOTAL_STACK=5242880
Module.TOTAL_STACK&&assert(TOTAL_STACK===Module.TOTAL_STACK,"the stack size can no longer be determined at runtime")
var INITIAL_TOTAL_MEMORY=Module.TOTAL_MEMORY||268435456
if(Object.getOwnPropertyDescriptor(Module,"TOTAL_MEMORY")||Object.defineProperty(Module,"TOTAL_MEMORY",{get:function(){abort("Module.TOTAL_MEMORY has been replaced with plain INITIAL_TOTAL_MEMORY")}}),assert(INITIAL_TOTAL_MEMORY>=TOTAL_STACK,"TOTAL_MEMORY should be larger than TOTAL_STACK, was "+INITIAL_TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),assert("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE,maximum:INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_TOTAL_MEMORY=buffer.byteLength,assert(INITIAL_TOTAL_MEMORY%WASM_PAGE_SIZE===0),updateGlobalBufferViews(),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,HEAP32[0]=1668509029,HEAP16[1]=25459,115!==HEAPU8[2]||99!==HEAPU8[3])throw"Runtime error: expected the system to be little-endian!"
var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1
assert(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),assert(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),assert(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),assert(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill")
var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,Math_trunc=Math.trunc,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null,runDependencyTracking={}
Module.preloadedImages={},Module.preloadedAudios={}
var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile=6666666
Module.asm=function(e,t,r){t.memory=wasmMemory,t.table=wasmTable=new WebAssembly.Table({initial:10295,maximum:10295,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0
var n=createWasm(t)
return assert(n,"binaryen setup failed (no wasm support?)"),n}
var tempDouble,tempI64,ASM_CONSTS=[function(){if(Module.worker)return 0
var e=window.navigator.userAgent,t=e.indexOf("MSIE "),r=e.indexOf("Trident/")
return t>-1||r>-1?1:0},function(e,t,r){var n=UTF8ToString(e)
console.log("url:"+n)
var i=new XMLHttpRequest,o=r
if(i.open("GET",n,!1),i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),200===i.status){console.log("RÃ©ponse reÃ§ue: %s",i.responseText)
var a=i.responseText
a.length>=o-1&&(a=a.substr(0,o-1)),Module.writeStringToMemory(a,t)}else console.log("Status de la rÃ©ponse: %d (%s)",i.status,i.statusText),Module.writeStringToMemory("ERROR",t)},function(e){var t=UTF8ToString(e),r=prompt(t," ")
return null==r?0:allocate(intArrayFromString(r),"i8",ALLOC_NORMAL)},function(e){return UI.assistant_matr_maxrows},function(e){return UI.assistant_matr_maxcols},function(e){var t=" "
UI.sheet_recompute(t.substr(0,0)),UI.open_sheet(!0)},function(e,t,r){var n=UTF8ToString(e)
console.log(n),UI.sheet_set_ij(n,t,r)},function(e){var t=UTF8ToString(e),r=prompt(t,"n")
return null==r?-4:"next"==r||"n"==r||"sst"==r?-1:"sst_in"==r||"s"==r?-2:"cont"==r||"c"==r?-3:"kill"==r||"k"==r?-4:"break"==r||"b"==r?-5:"delete"==r||"d"==r?-6:allocate(intArrayFromString(r),"i8",ALLOC_NORMAL)},function(e){if("undefined"!=typeof UI&&UI.warnpy){var t=UTF8ToString(e)
alert(t)}},function(){var e=window.innerWidth
return"undefined"!=typeof svgwidth?1*svgwidth:e>=1e3?9*e/1e3:e/60},function(){return"undefined"!=typeof UI&&void 0!==UI.disable3d&&UI.disable3d?UI.disable3d:Module.worker?1:0},function(){return"undefined"!=typeof UI&&void 0!==UI.add_evalf?1*UI.add_evalf:1},function(){return"undefined"!=typeof UI&&void 0!==UI.js_bigint?1*UI.js_bigint:0},function(e,t,r,n){var i,o,a,s,u
i=e,o=t,a=r,s=n,u=o/4/i
var c,l,d=new(window.AudioContext||window.webkitAudioContext),m=d.createBuffer(i,o,d.sampleRate),f=new Uint8Array(Module.HEAPU8.buffer,s,o),_=new Float32Array(f.buffer,f.byteOffset,o/4)
for(c=0;i>c;c++){var p=m.getChannelData(c)
for(l=0;u>l;++l)p[l]=_[c*u+l]}var E=d.createBufferSource()
E.buffer=m,E.connect(d.destination),E.start()},function(e){var t=UTF8ToString(e)
console.log(t)},function(e,t){var r=UTF8ToString(e)
r=r.substr(0,t),UI.add_python_output(r),r=UI.clean_for_html(r)
var n=document.getElementById("consolediv")
null!=n&&"block"!=n.style.display&&(n.style.display="block",UI.set_config_width())
var i=document.getElementById("output")
null!=i&&(i.style.display="inherit",i.innerHTML+=r,i.scrollTop=99999)},function(e){var t=UTF8ToString(e)
UI.python_output+=t}]
__ATINIT__.push({func:function(){globalCtors()}})
var tempDoublePtr=5310848
assert(tempDoublePtr%8==0)
var PATH={splitPath:function(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/
return t.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n]
"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..")
return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1)
return e=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),r=t[0],n=t[1]
return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:function(e){if("/"===e)return"/"
var t=e.lastIndexOf("/")
return-1===t?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0)
return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)}},PATH_FS={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:FS.cwd()
if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings")
if(!n)return""
e=n+"/"+e,t="/"===n.charAt(0)}return e=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=PATH_FS.resolve(e).substr(1),t=PATH_FS.resolve(t).substr(1)
for(var n=r(e.split("/")),i=r(t.split("/")),o=Math.min(n.length,i.length),a=o,s=0;o>s;s++)if(n[s]!==i[s]){a=s
break}for(var u=[],s=a;s<n.length;s++)u.push("..")
return u=u.concat(i.slice(a)),u.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev]
if(!t)throw new FS.ErrnoError(19)
e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n,i){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(6)
for(var o=0,a=0;n>a;a++){var s
try{s=e.tty.ops.get_char(e.tty)}catch(u){throw new FS.ErrnoError(5)}if(void 0===s&&0===o)throw new FS.ErrnoError(11)
if(null===s||void 0===s)break
o++,t[r+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,r,n,i){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(6)
try{for(var o=0;n>o;o++)e.tty.ops.put_char(e.tty,t[r+o])}catch(a){throw new FS.ErrnoError(5)}return n&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null
if(ENVIRONMENT_IS_NODE){var r=256,n=Buffer.alloc?Buffer.alloc(r):new Buffer(r),i=0,o="win32"!=process.platform,a=process.stdin.fd
if(o){var s=!1
try{a=fs.openSync("/dev/stdin","r"),s=!0}catch(u){}}try{i=fs.readSync(a,n,0,r,null)}catch(u){if(-1==(""+u).indexOf("EOF"))throw u
i=0}s&&fs.closeSync(a),t=i>0?n.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?(t=window.prompt("Input: "),null!==t&&(t+="\n")):"function"==typeof readline&&(t=readline(),null!==t&&(t+="\n"))
if(!t)return null
e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(out(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(out(UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(err(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(err(UTF8ArrayToString(e.output,0)),e.output=[])}}},MEMFS={ops_table:null,mount:function(e){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(FS.isBlkdev(r)||FS.isFIFO(r))throw new FS.ErrnoError(1)
MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}})
var i=FS.createNode(e,t,r,n)
return FS.isDir(i.mode)?(i.node_ops=MEMFS.ops_table.dir.node,i.stream_ops=MEMFS.ops_table.dir.stream,i.contents={}):FS.isFile(i.mode)?(i.node_ops=MEMFS.ops_table.file.node,i.stream_ops=MEMFS.ops_table.file.stream,i.usedBytes=0,i.contents=null):FS.isLink(i.mode)?(i.node_ops=MEMFS.ops_table.link.node,i.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(i.mode)&&(i.node_ops=MEMFS.ops_table.chrdev.node,i.stream_ops=MEMFS.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i),i},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],r=0;r<e.usedBytes;++r)t.push(e.contents[r])
return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0
if(!(r>=t)){var n=1048576
t=Math.max(t,r*(n>r?2:1.125)|0),0!=r&&(t=Math.max(t,256))
var i=e.contents
e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0)
if(!e.contents||e.contents.subarray){var r=e.contents
return e.contents=new Uint8Array(new ArrayBuffer(t)),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t
else for(;e.contents.length<t;)e.contents.push(0)
e.usedBytes=t}},node_ops:{getattr:function(e){var t={}
return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(e,t){throw FS.genericErrors[2]},mknod:function(e,t,r,n){return MEMFS.createNode(e,t,r,n)},rename:function(e,t,r){if(FS.isDir(e.mode)){var n
try{n=FS.lookupNode(t,r)}catch(i){}if(n)for(var o in n.contents)throw new FS.ErrnoError(39)}delete e.parent.contents[e.name],e.name=r,t.contents[r]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var r=FS.lookupNode(e,t)
for(var n in r.contents)throw new FS.ErrnoError(39)
delete e.contents[t]},readdir:function(e){var t=[".",".."]
for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r)
return t},symlink:function(e,t,r){var n=MEMFS.createNode(e,t,41471,0)
return n.link=r,n},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(22)
return e.link}},stream_ops:{read:function(e,t,r,n,i){var o=e.node.contents
if(i>=e.node.usedBytes)return 0
var a=Math.min(e.node.usedBytes-i,n)
if(assert(a>=0),a>8&&o.subarray)t.set(o.subarray(i,i+a),r)
else for(var s=0;a>s;s++)t[r+s]=o[i+s]
return a},write:function(e,t,r,n,i,o){if(!n)return 0
var a=e.node
if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(o)return assert(0===i,"canOwn must imply no weird position inside the file"),a.contents=t.subarray(r,r+n),a.usedBytes=n,n
if(0===a.usedBytes&&0===i)return a.contents=new Uint8Array(t.subarray(r,r+n)),a.usedBytes=n,n
if(i+n<=a.usedBytes)return a.contents.set(t.subarray(r,r+n),i),n}if(MEMFS.expandFileStorage(a,i+n),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(r,r+n),i)
else for(var s=0;n>s;s++)a.contents[i+s]=t[r+s]
return a.usedBytes=Math.max(a.usedBytes,i+n),n},llseek:function(e,t,r){var n=t
if(1===r?n+=e.position:2===r&&FS.isFile(e.node.mode)&&(n+=e.node.usedBytes),0>n)throw new FS.ErrnoError(22)
return n},allocate:function(e,t,r){MEMFS.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,i,o,a){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(19)
var s,u,c=e.node.contents
if(2&a||c.buffer!==t&&c.buffer!==t.buffer){(i>0||i+n<e.node.usedBytes)&&(c=c.subarray?c.subarray(i,i+n):Array.prototype.slice.call(c,i,i+n)),u=!0
var l=t.buffer==HEAP8.buffer
if(s=_malloc(n),!s)throw new FS.ErrnoError(12);(l?HEAP8:t).set(c,s)}else u=!1,s=c.byteOffset
return{ptr:s,allocated:u}},msync:function(e,t,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(19)
return 2&i?0:(MEMFS.stream_ops.write(e,t,0,n,r,!1),0)}}},IDBFS={dbs:{},indexedDB:function(){if("undefined"!=typeof indexedDB)return indexedDB
var e=null
return"object"==typeof window&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return MEMFS.mount.apply(null,arguments)},syncfs:function(e,t,r){IDBFS.getLocalSet(e,function(n,i){return n?r(n):void IDBFS.getRemoteSet(e,function(e,n){if(e)return r(e)
var o=t?n:i,a=t?i:n
IDBFS.reconcile(o,a,r)})})},getDB:function(e,t){var r=IDBFS.dbs[e]
if(r)return t(null,r)
var n
try{n=IDBFS.indexedDB().open(e,IDBFS.DB_VERSION)}catch(i){return t(i)}return n?(n.onupgradeneeded=function(e){var t,r=e.target.result,n=e.target.transaction
t=r.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?n.objectStore(IDBFS.DB_STORE_NAME):r.createObjectStore(IDBFS.DB_STORE_NAME),t.indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},n.onsuccess=function(){r=n.result,IDBFS.dbs[e]=r,t(null,r)},void(n.onerror=function(e){t(this.error),e.preventDefault()})):t("Unable to connect to IndexedDB")},getLocalSet:function(e,t){function r(e){return"."!==e&&".."!==e}function n(e){return function(t){return PATH.join2(e,t)}}for(var i={},o=FS.readdir(e.mountpoint).filter(r).map(n(e.mountpoint));o.length;){var a,s=o.pop()
try{a=FS.stat(s)}catch(u){return t(u)}FS.isDir(a.mode)&&o.push.apply(o,FS.readdir(s).filter(r).map(n(s))),i[s]={timestamp:a.mtime}}return t(null,{type:"local",entries:i})},getRemoteSet:function(e,t){var r={}
IDBFS.getDB(e.mountpoint,function(e,n){if(e)return t(e)
try{var i=n.transaction([IDBFS.DB_STORE_NAME],"readonly")
i.onerror=function(e){t(this.error),e.preventDefault()}
var o=i.objectStore(IDBFS.DB_STORE_NAME),a=o.index("timestamp")
a.openKeyCursor().onsuccess=function(e){var i=e.target.result
return i?(r[i.primaryKey]={timestamp:i.key},void i["continue"]()):t(null,{type:"remote",db:n,entries:r})}}catch(s){return t(s)}})},loadLocalEntry:function(e,t){var r,n
try{var i=FS.lookupPath(e)
n=i.node,r=FS.stat(e)}catch(o){return t(o)}return FS.isDir(r.mode)?t(null,{timestamp:r.mtime,mode:r.mode}):FS.isFile(r.mode)?(n.contents=MEMFS.getFileDataAsTypedArray(n),t(null,{timestamp:r.mtime,mode:r.mode,contents:n.contents})):t(Error("node type not supported"))},storeLocalEntry:function(e,t,r){try{if(FS.isDir(t.mode))FS.mkdir(e,t.mode)
else{if(!FS.isFile(t.mode))return r(Error("node type not supported"))
FS.writeFile(e,t.contents,{canOwn:!0})}FS.chmod(e,t.mode),FS.utime(e,t.timestamp,t.timestamp)}catch(n){return r(n)}r(null)},removeLocalEntry:function(e,t){try{var r=(FS.lookupPath(e),FS.stat(e))
FS.isDir(r.mode)?FS.rmdir(e):FS.isFile(r.mode)&&FS.unlink(e)}catch(n){return t(n)}t(null)},loadRemoteEntry:function(e,t,r){var n=e.get(t)
n.onsuccess=function(e){r(null,e.target.result)},n.onerror=function(e){r(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,r,n){var i=e.put(r,t)
i.onsuccess=function(){n(null)},i.onerror=function(e){n(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,r){var n=e["delete"](t)
n.onsuccess=function(){r(null)},n.onerror=function(e){r(this.error),e.preventDefault()}},reconcile:function(e,t,r){function n(e){return e&&!s?(s=!0,r(e)):void 0}var i=0,o=[]
Object.keys(e.entries).forEach(function(r){var n=e.entries[r],a=t.entries[r];(!a||n.timestamp>a.timestamp)&&(o.push(r),i++)})
var a=[]
if(Object.keys(t.entries).forEach(function(r){var n=(t.entries[r],e.entries[r])
n||(a.push(r),i++)}),!i)return r(null)
var s=!1,u="remote"===e.type?e.db:t.db,c=u.transaction([IDBFS.DB_STORE_NAME],"readwrite"),l=c.objectStore(IDBFS.DB_STORE_NAME)
c.onerror=function(e){n(this.error),e.preventDefault()},c.oncomplete=function(e){s||r(null)},o.sort().forEach(function(e){"local"===t.type?IDBFS.loadRemoteEntry(l,e,function(t,r){return t?n(t):void IDBFS.storeLocalEntry(e,r,n)}):IDBFS.loadLocalEntry(e,function(t,r){return t?n(t):void IDBFS.storeRemoteEntry(l,e,r,n)})}),a.sort().reverse().forEach(function(e){"local"===t.type?IDBFS.removeLocalEntry(e,n):IDBFS.removeRemoteEntry(l,e,n)})}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/)
var e=process.binding("constants")
e.fs&&(e=e.fs),NODEFS.flagsForNodeMap={1024:e.O_APPEND,64:e.O_CREAT,128:e.O_EXCL,0:e.O_RDONLY,2:e.O_RDWR,4096:e.O_SYNC,512:e.O_TRUNC,1:e.O_WRONLY}},bufferFrom:function(e){return Buffer.alloc?Buffer.from(e):new Buffer(e)},mount:function(e){return assert(ENVIRONMENT_HAS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode(e.opts.root),0)},createNode:function(e,t,r,n){if(!FS.isDir(r)&&!FS.isFile(r)&&!FS.isLink(r))throw new FS.ErrnoError(22)
var i=FS.createNode(e,t,r)
return i.node_ops=NODEFS.node_ops,i.stream_ops=NODEFS.stream_ops,i},getMode:function(e){var t
try{t=fs.lstatSync(e),NODEFS.isWindows&&(t.mode=t.mode|(292&t.mode)>>2)}catch(r){if(!r.code)throw r
throw new FS.ErrnoError(-r.errno)}return t.mode},realPath:function(e){for(var t=[];e.parent!==e;)t.push(e.name),e=e.parent
return t.push(e.mount.opts.root),t.reverse(),PATH.join.apply(null,t)},flagsForNode:function(e){e&=-2097153,e&=-2049,e&=-32769,e&=-524289
var t=0
for(var r in NODEFS.flagsForNodeMap)e&r&&(t|=NODEFS.flagsForNodeMap[r],e^=r)
if(e)throw new FS.ErrnoError(22)
return t},node_ops:{getattr:function(e){var t,r=NODEFS.realPath(e)
try{t=fs.lstatSync(r)}catch(n){if(!n.code)throw n
throw new FS.ErrnoError(-n.errno)}return NODEFS.isWindows&&!t.blksize&&(t.blksize=4096),NODEFS.isWindows&&!t.blocks&&(t.blocks=(t.size+t.blksize-1)/t.blksize|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},setattr:function(e,t){var r=NODEFS.realPath(e)
try{if(void 0!==t.mode&&(fs.chmodSync(r,t.mode),e.mode=t.mode),void 0!==t.timestamp){var n=new Date(t.timestamp)
fs.utimesSync(r,n,n)}void 0!==t.size&&fs.truncateSync(r,t.size)}catch(i){if(!i.code)throw i
throw new FS.ErrnoError(-i.errno)}},lookup:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t),n=NODEFS.getMode(r)
return NODEFS.createNode(e,t,n)},mknod:function(e,t,r,n){var i=NODEFS.createNode(e,t,r,n),o=NODEFS.realPath(i)
try{FS.isDir(i.mode)?fs.mkdirSync(o,i.mode):fs.writeFileSync(o,"",{mode:i.mode})}catch(a){if(!a.code)throw a
throw new FS.ErrnoError(-a.errno)}return i},rename:function(e,t,r){var n=NODEFS.realPath(e),i=PATH.join2(NODEFS.realPath(t),r)
try{fs.renameSync(n,i)}catch(o){if(!o.code)throw o
throw new FS.ErrnoError(-o.errno)}},unlink:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t)
try{fs.unlinkSync(r)}catch(n){if(!n.code)throw n
throw new FS.ErrnoError(-n.errno)}},rmdir:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t)
try{fs.rmdirSync(r)}catch(n){if(!n.code)throw n
throw new FS.ErrnoError(-n.errno)}},readdir:function(e){var t=NODEFS.realPath(e)
try{return fs.readdirSync(t)}catch(r){if(!r.code)throw r
throw new FS.ErrnoError(-r.errno)}},symlink:function(e,t,r){var n=PATH.join2(NODEFS.realPath(e),t)
try{fs.symlinkSync(r,n)}catch(i){if(!i.code)throw i
throw new FS.ErrnoError(-i.errno)}},readlink:function(e){var t=NODEFS.realPath(e)
try{return t=fs.readlinkSync(t),t=NODEJS_PATH.relative(NODEJS_PATH.resolve(e.mount.opts.root),t)}catch(r){if(!r.code)throw r
throw new FS.ErrnoError(-r.errno)}}},stream_ops:{open:function(e){var t=NODEFS.realPath(e.node)
try{FS.isFile(e.node.mode)&&(e.nfd=fs.openSync(t,NODEFS.flagsForNode(e.flags)))}catch(r){if(!r.code)throw r
throw new FS.ErrnoError(-r.errno)}},close:function(e){try{FS.isFile(e.node.mode)&&e.nfd&&fs.closeSync(e.nfd)}catch(t){if(!t.code)throw t
throw new FS.ErrnoError(-t.errno)}},read:function(e,t,r,n,i){if(0===n)return 0
try{return fs.readSync(e.nfd,NODEFS.bufferFrom(t.buffer),r,n,i)}catch(o){throw new FS.ErrnoError(-o.errno)}},write:function(e,t,r,n,i){try{return fs.writeSync(e.nfd,NODEFS.bufferFrom(t.buffer),r,n,i)}catch(o){throw new FS.ErrnoError(-o.errno)}},llseek:function(e,t,r){var n=t
if(1===r)n+=e.position
else if(2===r&&FS.isFile(e.node.mode))try{var i=fs.fstatSync(e.nfd)
n+=i.size}catch(o){throw new FS.ErrnoError(-o.errno)}if(0>n)throw new FS.ErrnoError(22)
return n}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){function t(e){for(var t=e.split("/"),r=n,o=0;o<t.length-1;o++){var a=t.slice(0,o+1).join("/")
i[a]||(i[a]=WORKERFS.createNode(r,t[o],WORKERFS.DIR_MODE,0)),r=i[a]}return r}function r(e){var t=e.split("/")
return t[t.length-1]}assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync)
var n=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),i={}
return Array.prototype.forEach.call(e.opts.files||[],function(e){WORKERFS.createNode(t(e.name),r(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)}),(e.opts.blobs||[]).forEach(function(e){WORKERFS.createNode(t(e.name),r(e.name),WORKERFS.FILE_MODE,0,e.data)}),(e.opts.packages||[]).forEach(function(e){e.metadata.files.forEach(function(n){var i=n.filename.substr(1)
WORKERFS.createNode(t(i),r(i),WORKERFS.FILE_MODE,0,e.blob.slice(n.start,n.end))})}),n},createNode:function(e,t,r,n,i,o){var a=FS.createNode(e,t,r)
return a.mode=r,a.node_ops=WORKERFS.node_ops,a.stream_ops=WORKERFS.stream_ops,a.timestamp=(o||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),r===WORKERFS.FILE_MODE?(a.size=i.size,a.contents=i):(a.size=4096,a.contents={}),e&&(e.contents[t]=a),a},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(e,t){throw new FS.ErrnoError(2)},mknod:function(e,t,r,n){throw new FS.ErrnoError(1)},rename:function(e,t,r){throw new FS.ErrnoError(1)},unlink:function(e,t){throw new FS.ErrnoError(1)},rmdir:function(e,t){throw new FS.ErrnoError(1)},readdir:function(e){var t=[".",".."]
for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r)
return t},symlink:function(e,t,r){throw new FS.ErrnoError(1)},readlink:function(e){throw new FS.ErrnoError(1)}},stream_ops:{read:function(e,t,r,n,i){if(i>=e.node.size)return 0
var o=e.node.contents.slice(i,i+n),a=WORKERFS.reader.readAsArrayBuffer(o)
return t.set(new Uint8Array(a),r),o.size},write:function(e,t,r,n,i){throw new FS.ErrnoError(5)},llseek:function(e,t,r){var n=t
if(1===r?n+=e.position:2===r&&FS.isFile(e.node.mode)&&(n+=e.node.size),0>n)throw new FS.ErrnoError(22)
return n}}},ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86},FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace()
return ___setErrNo(e.errno)},lookupPath:function(e,t){if(e=PATH_FS.resolve(FS.cwd(),e),t=t||{},!e)return{path:"",node:null}
var r={follow_mount:!0,recurse_count:0}
for(var n in r)void 0===t[n]&&(t[n]=r[n])
if(t.recurse_count>8)throw new FS.ErrnoError(40)
for(var i=PATH.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),o=FS.root,a="/",s=0;s<i.length;s++){var u=s===i.length-1
if(u&&t.parent)break
if(o=FS.lookupNode(o,i[s]),a=PATH.join2(a,i[s]),FS.isMountpoint(o)&&(!u||u&&t.follow_mount)&&(o=o.mounted.root),!u||t.follow)for(var c=0;FS.isLink(o.mode);){var l=FS.readlink(a)
a=PATH_FS.resolve(PATH.dirname(a),l)
var d=FS.lookupPath(a,{recurse_count:t.recurse_count})
if(o=d.node,c++>40)throw new FS.ErrnoError(40)}}return{path:a,node:o}},getPath:function(e){for(var t;;){if(FS.isRoot(e)){var r=e.mount.mountpoint
return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0
return(e+r>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name)
e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name)
if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next
else for(var r=FS.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next
break}r=r.name_next}},lookupNode:function(e,t){var r=FS.mayLookup(e)
if(r)throw new FS.ErrnoError(r,e)
for(var n=FS.hashName(e.id,t),i=FS.nameTable[n];i;i=i.name_next){var o=i.name
if(i.parent.id===e.id&&o===t)return i}return FS.lookup(e,t)},createNode:function(e,t,r,n){if(!FS.FSNode){FS.FSNode=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},FS.FSNode.prototype={}
var i=365,o=146
Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&i)===i},set:function(e){e?this.mode|=i:this.mode&=~i}},write:{get:function(){return(this.mode&o)===o},set:function(e){e?this.mode|=o:this.mode&=~o}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var a=new FS.FSNode(e,t,r,n)
return FS.hashAddNode(a),a},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768===(61440&e)},isDir:function(e){return 16384===(61440&e)},isLink:function(e){return 40960===(61440&e)},isChrdev:function(e){return 8192===(61440&e)},isBlkdev:function(e){return 24576===(61440&e)},isFIFO:function(e){return 4096===(61440&e)},isSocket:function(e){return 49152===(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=FS.flagModes[e]
if(void 0===t)throw Error("Unknown file open mode: "+e)
return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e]
return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:13},mayLookup:function(e){var t=FS.nodePermissions(e,"x")
return t?t:e.node_ops.lookup?0:13},mayCreate:function(e,t){try{return FS.lookupNode(e,t),17}catch(r){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,r){var n
try{n=FS.lookupNode(e,t)}catch(i){return i.errno}var o=FS.nodePermissions(e,"wx")
if(o)return o
if(r){if(!FS.isDir(n.mode))return 20
if(FS.isRoot(n)||FS.getPath(n)===FS.cwd())return 16}else if(FS.isDir(n.mode))return 21
return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?40:FS.isDir(e.mode)&&("r"!==FS.flagsToPermissionString(t)||512&t)?21:FS.nodePermissions(e,FS.flagsToPermissionString(t)):2},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS
for(var r=e;t>=r;r++)if(!FS.streams[r])return r
throw new FS.ErrnoError(24)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,r){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}))
var n=new FS.FSStream
for(var i in e)n[i]=e[i]
e=n
var o=FS.nextfd(t,r)
return e.fd=o,FS.streams[o]=e,e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev)
e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(29)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){for(var t=[],r=[e];r.length;){var n=r.pop()
t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:function(e,t){function r(e){return assert(FS.syncFSRequests>0),FS.syncFSRequests--,t(e)}function n(e){if(e){if(!n.errored)return n.errored=!0,r(e)}else++o>=i.length&&r(null)}"function"==typeof e&&(t=e,e=!1),FS.syncFSRequests++
var i=FS.getMounts(FS.root.mount),o=0
i.forEach(function(t){return t.type.syncfs?void t.type.syncfs(t,e,n):n(null)})},mount:function(e,t,r){var n,i="/"===r,o=!r
if(i&&FS.root)throw new FS.ErrnoError(16)
if(!i&&!o){var a=FS.lookupPath(r,{follow_mount:!1})
if(r=a.path,n=a.node,FS.isMountpoint(n))throw new FS.ErrnoError(16)
if(!FS.isDir(n.mode))throw new FS.ErrnoError(20)}var s={type:e,opts:t,mountpoint:r,mounts:[]},u=e.mount(s)
return u.mount=s,s.root=u,i?FS.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1})
if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(22)
var r=t.node,n=r.mounted,i=FS.getMounts(n)
Object.keys(FS.nameTable).forEach(function(e){for(var t=FS.nameTable[e];t;){var r=t.name_next;-1!==i.indexOf(t.mount)&&FS.destroyNode(t),t=r}}),r.mounted=null
var o=r.mount.mounts.indexOf(n)
assert(-1!==o),r.mount.mounts.splice(o,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var n=FS.lookupPath(e,{parent:!0}),i=n.node,o=PATH.basename(e)
if(!o||"."===o||".."===o)throw new FS.ErrnoError(22)
var a=FS.mayCreate(i,o)
if(a)throw new FS.ErrnoError(a)
if(!i.node_ops.mknod)throw new FS.ErrnoError(1)
return i.node_ops.mknod(i,o,t,r)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdirTree:function(e,t){for(var r=e.split("/"),n="",i=0;i<r.length;++i)if(r[i]){n+="/"+r[i]
try{FS.mkdir(n,t)}catch(o){if(17!=o.errno)throw o}}},mkdev:function(e,t,r){return void 0===r&&(r=t,t=438),t|=8192,FS.mknod(e,t,r)},symlink:function(e,t){if(!PATH_FS.resolve(e))throw new FS.ErrnoError(2)
var r=FS.lookupPath(t,{parent:!0}),n=r.node
if(!n)throw new FS.ErrnoError(2)
var i=PATH.basename(t),o=FS.mayCreate(n,i)
if(o)throw new FS.ErrnoError(o)
if(!n.node_ops.symlink)throw new FS.ErrnoError(1)
return n.node_ops.symlink(n,i,e)},rename:function(e,t){var r,n,i,o=PATH.dirname(e),a=PATH.dirname(t),s=PATH.basename(e),u=PATH.basename(t)
try{r=FS.lookupPath(e,{parent:!0}),n=r.node,r=FS.lookupPath(t,{parent:!0}),i=r.node}catch(c){throw new FS.ErrnoError(16)}if(!n||!i)throw new FS.ErrnoError(2)
if(n.mount!==i.mount)throw new FS.ErrnoError(18)
var l=FS.lookupNode(n,s),d=PATH_FS.relative(e,a)
if("."!==d.charAt(0))throw new FS.ErrnoError(22)
if(d=PATH_FS.relative(t,o),"."!==d.charAt(0))throw new FS.ErrnoError(39)
var m
try{m=FS.lookupNode(i,u)}catch(c){}if(l!==m){var f=FS.isDir(l.mode),_=FS.mayDelete(n,s,f)
if(_)throw new FS.ErrnoError(_)
if(_=m?FS.mayDelete(i,u,f):FS.mayCreate(i,u))throw new FS.ErrnoError(_)
if(!n.node_ops.rename)throw new FS.ErrnoError(1)
if(FS.isMountpoint(l)||m&&FS.isMountpoint(m))throw new FS.ErrnoError(16)
if(i!==n&&(_=FS.nodePermissions(n,"w")))throw new FS.ErrnoError(_)
try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(e,t)}catch(c){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+c.message)}FS.hashRemoveNode(l)
try{n.node_ops.rename(l,i,u)}catch(c){throw c}finally{FS.hashAddNode(l)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(e,t)}catch(c){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+c.message)}}},rmdir:function(e){var t=FS.lookupPath(e,{parent:!0}),r=t.node,n=PATH.basename(e),i=FS.lookupNode(r,n),o=FS.mayDelete(r,n,!0)
if(o)throw new FS.ErrnoError(o)
if(!r.node_ops.rmdir)throw new FS.ErrnoError(1)
if(FS.isMountpoint(i))throw new FS.ErrnoError(16)
try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(a){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+a.message)}r.node_ops.rmdir(r,n),FS.destroyNode(i)
try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(a){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+a.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}),r=t.node
if(!r.node_ops.readdir)throw new FS.ErrnoError(20)
return r.node_ops.readdir(r)},unlink:function(e){var t=FS.lookupPath(e,{parent:!0}),r=t.node,n=PATH.basename(e),i=FS.lookupNode(r,n),o=FS.mayDelete(r,n,!1)
if(o)throw new FS.ErrnoError(o)
if(!r.node_ops.unlink)throw new FS.ErrnoError(1)
if(FS.isMountpoint(i))throw new FS.ErrnoError(16)
try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(a){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+a.message)}r.node_ops.unlink(r,n),FS.destroyNode(i)
try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(a){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+a.message)}},readlink:function(e){var t=FS.lookupPath(e),r=t.node
if(!r)throw new FS.ErrnoError(2)
if(!r.node_ops.readlink)throw new FS.ErrnoError(22)
return PATH_FS.resolve(FS.getPath(r.parent),r.node_ops.readlink(r))},stat:function(e,t){var r=FS.lookupPath(e,{follow:!t}),n=r.node
if(!n)throw new FS.ErrnoError(2)
if(!n.node_ops.getattr)throw new FS.ErrnoError(1)
return n.node_ops.getattr(n)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,r){var n
if("string"==typeof e){var i=FS.lookupPath(e,{follow:!r})
n=i.node}else n=e
if(!n.node_ops.setattr)throw new FS.ErrnoError(1)
n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var r=FS.getStream(e)
if(!r)throw new FS.ErrnoError(9)
FS.chmod(r.node,t)},chown:function(e,t,r,n){var i
if("string"==typeof e){var o=FS.lookupPath(e,{follow:!n})
i=o.node}else i=e
if(!i.node_ops.setattr)throw new FS.ErrnoError(1)
i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,r){FS.chown(e,t,r,!0)},fchown:function(e,t,r){var n=FS.getStream(e)
if(!n)throw new FS.ErrnoError(9)
FS.chown(n.node,t,r)},truncate:function(e,t){if(0>t)throw new FS.ErrnoError(22)
var r
if("string"==typeof e){var n=FS.lookupPath(e,{follow:!0})
r=n.node}else r=e
if(!r.node_ops.setattr)throw new FS.ErrnoError(1)
if(FS.isDir(r.mode))throw new FS.ErrnoError(21)
if(!FS.isFile(r.mode))throw new FS.ErrnoError(22)
var i=FS.nodePermissions(r,"w")
if(i)throw new FS.ErrnoError(i)
r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=FS.getStream(e)
if(!r)throw new FS.ErrnoError(9)
if(0===(2097155&r.flags))throw new FS.ErrnoError(22)
FS.truncate(r.node,t)},utime:function(e,t,r){var n=FS.lookupPath(e,{follow:!0}),i=n.node
i.node_ops.setattr(i,{timestamp:Math.max(t,r)})},open:function(e,t,r,n,i){if(""===e)throw new FS.ErrnoError(2)
t="string"==typeof t?FS.modeStringToFlags(t):t,r=void 0===r?438:r,r=64&t?4095&r|32768:0
var o
if("object"==typeof e)o=e
else{e=PATH.normalize(e)
try{var a=FS.lookupPath(e,{follow:!(131072&t)})
o=a.node}catch(s){}}var u=!1
if(64&t)if(o){if(128&t)throw new FS.ErrnoError(17)}else o=FS.mknod(e,r,0),u=!0
if(!o)throw new FS.ErrnoError(2)
if(FS.isChrdev(o.mode)&&(t&=-513),65536&t&&!FS.isDir(o.mode))throw new FS.ErrnoError(20)
if(!u){var c=FS.mayOpen(o,t)
if(c)throw new FS.ErrnoError(c)}512&t&&FS.truncate(o,0),t&=-641
var l=FS.createStream({node:o,path:FS.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},n,i)
l.stream_ops.open&&l.stream_ops.open(l),!Module.logReadFiles||1&t||(FS.readFiles||(FS.readFiles={}),e in FS.readFiles||(FS.readFiles[e]=1,console.log("FS.trackingDelegate error on read file: "+e)))
try{if(FS.trackingDelegate.onOpenFile){var d=0
1!==(2097155&t)&&(d|=FS.tracking.openFlags.READ),0!==(2097155&t)&&(d|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(e,d)}}catch(s){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+s.message)}return l},close:function(e){if(FS.isClosed(e))throw new FS.ErrnoError(9)
e.getdents&&(e.getdents=null)
try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{FS.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,r){if(FS.isClosed(e))throw new FS.ErrnoError(9)
if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(29)
if(0!=r&&1!=r&&2!=r)throw new FS.ErrnoError(22)
return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,n,i){if(0>n||0>i)throw new FS.ErrnoError(22)
if(FS.isClosed(e))throw new FS.ErrnoError(9)
if(1===(2097155&e.flags))throw new FS.ErrnoError(9)
if(FS.isDir(e.node.mode))throw new FS.ErrnoError(21)
if(!e.stream_ops.read)throw new FS.ErrnoError(22)
var o=void 0!==i
if(o){if(!e.seekable)throw new FS.ErrnoError(29)}else i=e.position
var a=e.stream_ops.read(e,t,r,n,i)
return o||(e.position+=a),a},write:function(e,t,r,n,i,o){if(0>n||0>i)throw new FS.ErrnoError(22)
if(FS.isClosed(e))throw new FS.ErrnoError(9)
if(0===(2097155&e.flags))throw new FS.ErrnoError(9)
if(FS.isDir(e.node.mode))throw new FS.ErrnoError(21)
if(!e.stream_ops.write)throw new FS.ErrnoError(22)
1024&e.flags&&FS.llseek(e,0,2)
var a=void 0!==i
if(a){if(!e.seekable)throw new FS.ErrnoError(29)}else i=e.position
var s=e.stream_ops.write(e,t,r,n,i,o)
a||(e.position+=s)
try{e.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(e.path)}catch(u){console.log("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+u.message)}return s},allocate:function(e,t,r){if(FS.isClosed(e))throw new FS.ErrnoError(9)
if(0>t||0>=r)throw new FS.ErrnoError(22)
if(0===(2097155&e.flags))throw new FS.ErrnoError(9)
if(!FS.isFile(e.node.mode)&&!FS.isDir(e.node.mode))throw new FS.ErrnoError(19)
if(!e.stream_ops.allocate)throw new FS.ErrnoError(95)
e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,n,i,o,a){if(0!==(2&o)&&0===(2&a)&&2!==(2097155&e.flags))throw new FS.ErrnoError(13)
if(1===(2097155&e.flags))throw new FS.ErrnoError(13)
if(!e.stream_ops.mmap)throw new FS.ErrnoError(19)
return e.stream_ops.mmap(e,t,r,n,i,o,a)},msync:function(e,t,r,n,i){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,i):0},munmap:function(e){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(25)
return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if(t=t||{},t.flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw Error('Invalid encoding type "'+t.encoding+'"')
var r,n=FS.open(e,t.flags),i=FS.stat(e),o=i.size,a=new Uint8Array(o)
return FS.read(n,a,0,o,0),"utf8"===t.encoding?r=UTF8ArrayToString(a,0):"binary"===t.encoding&&(r=a),FS.close(n),r},writeFile:function(e,t,r){r=r||{},r.flags=r.flags||"w"
var n=FS.open(e,r.flags,r.mode)
if("string"==typeof t){var i=new Uint8Array(lengthBytesUTF8(t)+1),o=stringToUTF8Array(t,i,0,i.length)
FS.write(n,i,0,o,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw Error("Unsupported data type")
FS.write(n,t,0,t.byteLength,void 0,r.canOwn)}FS.close(n)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0})
if(null===t.node)throw new FS.ErrnoError(2)
if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(20)
var r=FS.nodePermissions(t.node,"x")
if(r)throw new FS.ErrnoError(r)
FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,r,n,i){return n}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0))
var e
if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1)
e=function(){return crypto.getRandomValues(t),t[0]}}else if(ENVIRONMENT_IS_NODE)try{var r=require("crypto")
e=function(){return r.randomBytes(1)[0]}}catch(n){}e||(e=function(){abort("no cryptographic support found for random_device. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}),FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var e=FS.createNode("/proc/self","fd",16895,73)
return e.node_ops={lookup:function(e,t){var r=+t,n=FS.getStream(r)
if(!n)throw new FS.ErrnoError(9)
var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}}
return i.parent=i,i}},e}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr")
var e=FS.open("/dev/stdin","r"),t=FS.open("/dev/stdout","w"),r=FS.open("/dev/stderr","w")
assert(0===e.fd,"invalid handle for stdin ("+e.fd+")"),assert(1===t.fd,"invalid handle for stdout ("+t.fd+")"),assert(2===r.fd,"invalid handle for stderr ("+r.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e
for(var t in ERRNO_CODES)if(ERRNO_CODES[t]===e){this.code=t
break}},this.setErrno(e),this.message=ERRNO_MESSAGES[e],this.stack&&Object.defineProperty(this,"stack",{value:Error().stack,writable:!0}),this.stack&&(this.stack=demangleAll(this.stack))},FS.ErrnoError.prototype=Error(),FS.ErrnoError.prototype.constructor=FS.ErrnoError,[2].forEach(function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS,NODEFS:NODEFS,WORKERFS:WORKERFS}},init:function(e,t,r){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=e||Module.stdin,Module.stdout=t||Module.stdout,Module.stderr=r||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1
var e=Module._fflush
e&&e(0)
for(var t=0;t<FS.streams.length;t++){var r=FS.streams[t]
r&&FS.close(r)}},getMode:function(e,t){var r=0
return e&&(r|=365),t&&(r|=146),r},joinPath:function(e,t){var r=PATH.join.apply(null,e)
return t&&"/"==r[0]&&(r=r.substr(1)),r},absolutePath:function(e,t){return PATH_FS.resolve(t,e)},standardizePath:function(e){return PATH.normalize(e)},findObject:function(e,t){var r=FS.analyzePath(e,t)
return r.exists?r.object:(___setErrNo(r.error),null)},analyzePath:function(e,t){try{var r=FS.lookupPath(e,{follow:!t})
e=r.path}catch(n){}var i={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null}
try{var r=FS.lookupPath(e,{parent:!0})
i.parentExists=!0,i.parentPath=r.path,i.parentObject=r.node,i.name=PATH.basename(e),r=FS.lookupPath(e,{follow:!t}),i.exists=!0,i.path=r.path,i.object=r.node,i.name=r.node.name,i.isRoot="/"===r.path}catch(n){i.error=n.errno}return i},createFolder:function(e,t,r,n){var i=PATH.join2("string"==typeof e?e:FS.getPath(e),t),o=FS.getMode(r,n)
return FS.mkdir(i,o)},createPath:function(e,t,r,n){e="string"==typeof e?e:FS.getPath(e)
for(var i=t.split("/").reverse();i.length;){var o=i.pop()
if(o){var a=PATH.join2(e,o)
try{FS.mkdir(a)}catch(s){}e=a}}return a},createFile:function(e,t,r,n,i){var o=PATH.join2("string"==typeof e?e:FS.getPath(e),t),a=FS.getMode(n,i)
return FS.create(o,a)},createDataFile:function(e,t,r,n,i,o){var a=t?PATH.join2("string"==typeof e?e:FS.getPath(e),t):e,s=FS.getMode(n,i),u=FS.create(a,s)
if(r){if("string"==typeof r){for(var c=Array(r.length),l=0,d=r.length;d>l;++l)c[l]=r.charCodeAt(l)
r=c}FS.chmod(u,146|s)
var m=FS.open(u,"w")
FS.write(m,r,0,r.length,0,o),FS.close(m),FS.chmod(u,s)}return u},createDevice:function(e,t,r,n){var i=PATH.join2("string"==typeof e?e:FS.getPath(e),t),o=FS.getMode(!!r,!!n)
FS.createDevice.major||(FS.createDevice.major=64)
var a=FS.makedev(FS.createDevice.major++,0)
return FS.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,t,n,i,o){for(var a=0,s=0;i>s;s++){var u
try{u=r()}catch(c){throw new FS.ErrnoError(5)}if(void 0===u&&0===a)throw new FS.ErrnoError(11)
if(null===u||void 0===u)break
a++,t[n+s]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,i,o){for(var a=0;i>a;a++)try{n(t[r+a])}catch(s){throw new FS.ErrnoError(5)}return i&&(e.node.timestamp=Date.now()),a}}),FS.mkdev(i,o,a)},createLink:function(e,t,r,n,i){var o=PATH.join2("string"==typeof e?e:FS.getPath(e),t)
return FS.symlink(r,o)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0
var t=!0
if("undefined"!=typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.")
if(!read_)throw Error("Cannot load without read() or XMLHttpRequest.")
try{e.contents=intArrayFromString(read_(e.url),!0),e.usedBytes=e.contents.length}catch(r){t=!1}return t||___setErrNo(5),t},createLazyFile:function(e,t,r,n,i){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||0>e)){var t=e%this.chunkSize,r=e/this.chunkSize|0
return this.getter(r)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest
if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw Error("Couldn't load "+r+". Status: "+e.status)
var t,n=+e.getResponseHeader("Content-length"),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576
i||(a=n)
var s=function(e,t){if(e>t)throw Error("invalid range ("+e+", "+t+") or no bytes requested!")
if(t>n-1)throw Error("only "+n+" bytes available! programmer error!")
var i=new XMLHttpRequest
if(i.open("GET",r,!1),n!==a&&i.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw Error("Couldn't load "+r+". Status: "+i.status)
return void 0!==i.response?new Uint8Array(i.response||[]):intArrayFromString(i.responseText||"",!0)},u=this
u.setDataGetter(function(e){var t=e*a,r=(e+1)*a-1
if(r=Math.min(r,n-1),void 0===u.chunks[e]&&(u.chunks[e]=s(t,r)),void 0===u.chunks[e])throw Error("doXHR failed!")
return u.chunks[e]}),(o||!n)&&(a=n=1,n=this.getter(0).length,a=n,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc"
var a=new o
Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}})
var s={isDevice:!1,contents:a}}else var s={isDevice:!1,url:r}
var u=FS.createFile(e,t,s,n,i)
s.contents?u.contents=s.contents:s.url&&(u.contents=null,u.url=s.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}})
var c={},l=Object.keys(u.stream_ops)
return l.forEach(function(e){var t=u.stream_ops[e]
c[e]=function(){if(!FS.forceLoadFile(u))throw new FS.ErrnoError(5)
return t.apply(null,arguments)}}),c.read=function(e,t,r,n,i){if(!FS.forceLoadFile(u))throw new FS.ErrnoError(5)
var o=e.node.contents
if(i>=o.length)return 0
var a=Math.min(o.length-i,n)
if(assert(a>=0),o.slice)for(var s=0;a>s;s++)t[r+s]=o[i+s]
else for(var s=0;a>s;s++)t[r+s]=o.get(i+s)
return a},u.stream_ops=c,u},createPreloadedFile:function(e,t,r,n,i,o,a,s,u,c){function l(r){function l(r){c&&c(),s||FS.createDataFile(e,t,r,n,i,u),o&&o(),removeRunDependency(m)}var f=!1
Module.preloadPlugins.forEach(function(e){f||e.canHandle(d)&&(e.handle(r,d,l,function(){a&&a(),removeRunDependency(m)}),f=!0)}),f||l(r)}Browser.init()
var d=t?PATH_FS.resolve(PATH.join2(e,t)):e,m=getUniqueRunDependency("cp "+d)
addRunDependency(m),"string"==typeof r?Browser.asyncLoad(r,function(e){l(e)},a):l(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,r){t=t||function(){},r=r||function(){}
var n=FS.indexedDB()
try{var i=n.open(FS.DB_NAME(),FS.DB_VERSION)}catch(o){return r(o)}i.onupgradeneeded=function(){console.log("creating db")
var e=i.result
e.createObjectStore(FS.DB_STORE_NAME)},i.onsuccess=function(){function n(){0==c?t():r()}var o=i.result,a=o.transaction([FS.DB_STORE_NAME],"readwrite"),s=a.objectStore(FS.DB_STORE_NAME),u=0,c=0,l=e.length
e.forEach(function(e){var t=s.put(FS.analyzePath(e).object.contents,e)
t.onsuccess=function(){u++,u+c==l&&n()},t.onerror=function(){c++,u+c==l&&n()}}),a.onerror=r},i.onerror=r},loadFilesFromDB:function(e,t,r){t=t||function(){},r=r||function(){}
var n=FS.indexedDB()
try{var i=n.open(FS.DB_NAME(),FS.DB_VERSION)}catch(o){return r(o)}i.onupgradeneeded=r,i.onsuccess=function(){function n(){0==l?t():r()}var o=i.result
try{var a=o.transaction([FS.DB_STORE_NAME],"readonly")}catch(s){return void r(s)}var u=a.objectStore(FS.DB_STORE_NAME),c=0,l=0,d=e.length
e.forEach(function(e){var t=u.get(e)
t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),c++,c+l==d&&n()},t.onerror=function(){l++,c+l==d&&n()}}),a.onerror=r},i.onerror=r}},Browser={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Browser.mainLoop.scheduler=null,Browser.mainLoop.currentlyRunningMainloop++},resume:function(){Browser.mainLoop.currentlyRunningMainloop++
var e=Browser.mainLoop.timingMode,t=Browser.mainLoop.timingValue,r=Browser.mainLoop.func
Browser.mainLoop.func=null,_emscripten_set_main_loop(r,0,!1,Browser.mainLoop.arg,!0),_emscripten_set_main_loop_timing(e,t),Browser.mainLoop.scheduler()},updateStatus:function(){if(Module.setStatus){var e=Module.statusMessage||"Please wait...",t=Browser.mainLoop.remainingBlockers,r=Browser.mainLoop.expectedBlockers
t?r>t?Module.setStatus(e+" ("+(r-t)+"/"+r+")"):Module.setStatus(e):Module.setStatus("")}},runIter:function(e){if(!ABORT){if(Module.preMainLoop){var t=Module.preMainLoop()
if(t===!1)return}try{e()}catch(r){if(r instanceof ExitStatus)return
throw r&&"object"==typeof r&&r.stack&&err("exception thrown: "+[r,r.stack]),r}Module.postMainLoop&&Module.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){function e(){Browser.pointerLock=document.pointerLockElement===Module.canvas||document.mozPointerLockElement===Module.canvas||document.webkitPointerLockElement===Module.canvas||document.msPointerLockElement===Module.canvas}if(Module.preloadPlugins||(Module.preloadPlugins=[]),!Browser.initted){Browser.initted=!0
try{new Blob,Browser.hasBlobConstructor=!0}catch(t){Browser.hasBlobConstructor=!1}Browser.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Browser.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Browser.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,Module.noImageDecoding||void 0!==Browser.URLObject||(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),Module.noImageDecoding=!0)
var r={}
r.canHandle=function(e){return!Module.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},r.handle=function(e,t,r,n){var i=null
if(Browser.hasBlobConstructor)try{i=new Blob([e],{type:Browser.getMimetype(t)}),i.size!==e.length&&(i=new Blob([new Uint8Array(e).buffer],{type:Browser.getMimetype(t)}))}catch(o){warnOnce("Blob constructor present but fails: "+o+"; falling back to blob builder")}if(!i){var a=new Browser.BlobBuilder
a.append(new Uint8Array(e).buffer),i=a.getBlob()}var s=Browser.URLObject.createObjectURL(i)
assert("string"==typeof s,"createObjectURL must return a url as a string")
var u=new Image
u.onload=function(){assert(u.complete,"Image "+t+" could not be decoded")
var n=document.createElement("canvas")
n.width=u.width,n.height=u.height
var i=n.getContext("2d")
i.drawImage(u,0,0),Module.preloadedImages[t]=n,Browser.URLObject.revokeObjectURL(s),r&&r(e)},u.onerror=function(e){console.log("Image "+s+" could not be decoded"),n&&n()},u.src=s},Module.preloadPlugins.push(r)
var n={}
n.canHandle=function(e){return!Module.noAudioDecoding&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},n.handle=function(e,t,r,n){function i(n){a||(a=!0,Module.preloadedAudios[t]=n,r&&r(e))}function o(){a||(a=!0,Module.preloadedAudios[t]=new Audio,n&&n())}var a=!1
if(!Browser.hasBlobConstructor)return o()
try{var s=new Blob([e],{type:Browser.getMimetype(t)})}catch(u){return o()}var c=Browser.URLObject.createObjectURL(s)
assert("string"==typeof c,"createObjectURL must return a url as a string")
var l=new Audio
l.addEventListener("canplaythrough",function(){i(l)},!1),l.onerror=function(r){function n(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="=",n="",i=0,o=0,a=0;a<e.length;a++)for(i=i<<8|e[a],o+=8;o>=6;){var s=i>>o-6&63
o-=6,n+=t[s]}return 2==o?(n+=t[(3&i)<<4],n+=r+r):4==o&&(n+=t[(15&i)<<2],n+=r),n}a||(console.log("warning: browser could not fully decode audio "+t+", trying slower base64 approach"),l.src="data:audio/x-"+t.substr(-3)+";base64,"+n(e),i(l))},l.src=c,Browser.safeSetTimeout(function(){i(l)},1e4)},Module.preloadPlugins.push(n)
var i=Module.canvas
i&&(i.requestPointerLock=i.requestPointerLock||i.mozRequestPointerLock||i.webkitRequestPointerLock||i.msRequestPointerLock||function(){},i.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},i.exitPointerLock=i.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",e,!1),document.addEventListener("mozpointerlockchange",e,!1),document.addEventListener("webkitpointerlockchange",e,!1),document.addEventListener("mspointerlockchange",e,!1),Module.elementPointerLock&&i.addEventListener("click",function(e){!Browser.pointerLock&&Module.canvas.requestPointerLock&&(Module.canvas.requestPointerLock(),e.preventDefault())},!1))}},createContext:function(e,t,r,n){if(t&&Module.ctx&&e==Module.canvas)return Module.ctx
var i,o
if(t){var a={antialias:!1,alpha:!1,majorVersion:1}
if(n)for(var s in n)a[s]=n[s]
void 0!==GL&&(o=GL.createContext(e,a),o&&(i=GL.getContext(o).GLctx))}else i=e.getContext("2d")
return i?(r&&(t||assert(void 0===GLctx,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),Module.ctx=i,t&&GL.makeContextCurrent(o),Module.useWebGL=t,Browser.moduleContextCreatedCallbacks.forEach(function(e){e()}),Browser.init()),i):null},destroyContext:function(e,t,r){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t,r){function n(){Browser.isFullscreen=!1
var e=i.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(i.exitFullscreen=Browser.exitFullscreen,Browser.lockPointer&&i.requestPointerLock(),Browser.isFullscreen=!0,Browser.resizeCanvas?Browser.setFullscreenCanvasSize():Browser.updateCanvasDimensions(i)):(e.parentNode.insertBefore(i,e),e.parentNode.removeChild(e),Browser.resizeCanvas?Browser.setWindowedCanvasSize():Browser.updateCanvasDimensions(i)),Module.onFullScreen&&Module.onFullScreen(Browser.isFullscreen),Module.onFullscreen&&Module.onFullscreen(Browser.isFullscreen)}Browser.lockPointer=e,Browser.resizeCanvas=t,Browser.vrDevice=r,void 0===Browser.lockPointer&&(Browser.lockPointer=!0),void 0===Browser.resizeCanvas&&(Browser.resizeCanvas=!1),void 0===Browser.vrDevice&&(Browser.vrDevice=null)
var i=Module.canvas
Browser.fullscreenHandlersInstalled||(Browser.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1))
var o=document.createElement("div")
i.parentNode.insertBefore(o,i),o.appendChild(i),o.requestFullscreen=o.requestFullscreen||o.mozRequestFullScreen||o.msRequestFullscreen||(o.webkitRequestFullscreen?function(){o.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(o.webkitRequestFullScreen?function(){o.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),r?o.requestFullscreen({vrDisplay:r}):o.requestFullscreen()},requestFullScreen:function(e,t,r){return err("Browser.requestFullScreen() is deprecated. Please call Browser.requestFullscreen instead."),Browser.requestFullScreen=function(e,t,r){return Browser.requestFullscreen(e,t,r)},Browser.requestFullscreen(e,t,r)},exitFullscreen:function(){if(!Browser.isFullscreen)return!1
var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}
return e.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now()
if(0===Browser.nextRAF)Browser.nextRAF=t+1e3/60
else for(;t+2>=Browser.nextRAF;)Browser.nextRAF+=1e3/60
var r=Math.max(Browser.nextRAF-t,0)
setTimeout(e,r)},requestAnimationFrame:function(e){if("function"==typeof requestAnimationFrame)return void requestAnimationFrame(e)
var t=Browser.fakeRequestAnimationFrame
t(e)},safeCallback:function(e){return function(){return ABORT?void 0:e.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Browser.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(Browser.allowAsyncCallbacks=!0,Browser.queuedAsyncCallbacks.length>0){var e=Browser.queuedAsyncCallbacks
Browser.queuedAsyncCallbacks=[],e.forEach(function(e){e()})}},safeRequestAnimationFrame:function(e){return Browser.requestAnimationFrame(function(){ABORT||(Browser.allowAsyncCallbacks?e():Browser.queuedAsyncCallbacks.push(e))})},safeSetTimeout:function(e,t){return Module.noExitRuntime=!0,setTimeout(function(){ABORT||(Browser.allowAsyncCallbacks?e():Browser.queuedAsyncCallbacks.push(e))},t)},safeSetInterval:function(e,t){return Module.noExitRuntime=!0,setInterval(function(){ABORT||Browser.allowAsyncCallbacks&&e()},t)},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0
switch(e.type){case"DOMMouseScroll":t=e.detail/3
break
case"mousewheel":t=e.wheelDelta/120
break
case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100
break
case 1:t/=3
break
case 2:t*=80
break
default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break
default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(Browser.pointerLock)"mousemove"!=e.type&&"mozMovementX"in e?Browser.mouseMovementX=Browser.mouseMovementY=0:(Browser.mouseMovementX=Browser.getMovementX(e),Browser.mouseMovementY=Browser.getMovementY(e)),void 0!==SDL?(Browser.mouseX=SDL.mouseX+Browser.mouseMovementX,Browser.mouseY=SDL.mouseY+Browser.mouseMovementY):(Browser.mouseX+=Browser.mouseMovementX,Browser.mouseY+=Browser.mouseMovementY)
else{var t=Module.canvas.getBoundingClientRect(),r=Module.canvas.width,n=Module.canvas.height,i=void 0!==window.scrollX?window.scrollX:window.pageXOffset,o=void 0!==window.scrollY?window.scrollY:window.pageYOffset
if(assert(void 0!==i&&void 0!==o,"Unable to retrieve scroll position, mouse positions likely broken."),"touchstart"===e.type||"touchend"===e.type||"touchmove"===e.type){var a=e.touch
if(void 0===a)return
var s=a.pageX-(i+t.left),u=a.pageY-(o+t.top)
s*=r/t.width,u*=n/t.height
var c={x:s,y:u}
if("touchstart"===e.type)Browser.lastTouches[a.identifier]=c,Browser.touches[a.identifier]=c
else if("touchend"===e.type||"touchmove"===e.type){var l=Browser.touches[a.identifier]
l||(l=c),Browser.lastTouches[a.identifier]=l,Browser.touches[a.identifier]=c}return}var d=e.pageX-(i+t.left),m=e.pageY-(o+t.top)
d*=r/t.width,m*=n/t.height,Browser.mouseMovementX=d-Browser.mouseX,Browser.mouseMovementY=m-Browser.mouseY,Browser.mouseX=d,Browser.mouseY=m}},asyncLoad:function(e,t,r,n){var i=n?"":getUniqueRunDependency("al "+e)
readAsync(e,function(r){assert(r,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(r)),i&&removeRunDependency(i)},function(t){if(!r)throw'Loading data file "'+e+'" failed.'
r()}),i&&addRunDependency(i)},resizeListeners:[],updateResizeListeners:function(){var e=Module.canvas
Browser.resizeListeners.forEach(function(t){t(e.width,e.height)})},setCanvasSize:function(e,t,r){var n=Module.canvas
Browser.updateCanvasDimensions(n,e,t),r||Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(void 0!==SDL){var e=HEAPU32[SDL.screen>>2]
e=8388608|e,HEAP32[SDL.screen>>2]=e}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},setWindowedCanvasSize:function(){if(void 0!==SDL){var e=HEAPU32[SDL.screen>>2]
e=-8388609&e,HEAP32[SDL.screen>>2]=e}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},updateCanvasDimensions:function(e,t,r){t&&r?(e.widthNative=t,e.heightNative=r):(t=e.widthNative,r=e.heightNative)
var n=t,i=r
if(Module.forcedAspectRatio&&Module.forcedAspectRatio>0&&(n/i<Module.forcedAspectRatio?n=Math.round(i*Module.forcedAspectRatio):i=Math.round(n/Module.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen){var o=Math.min(screen.width/n,screen.height/i)
n=Math.round(n*o),i=Math.round(i*o)}Browser.resizeCanvas?(e.width!=n&&(e.width=n),e.height!=i&&(e.height=i),void 0!==e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=r&&(e.height=r),void 0!==e.style&&(n!=t||i!=r?(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",i+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var e=Browser.nextWgetRequestHandle
return Browser.nextWgetRequestHandle++,e}},SDL={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(e){return{x:HEAP32[e+0>>2],y:HEAP32[e+4>>2],w:HEAP32[e+8>>2],h:HEAP32[e+12>>2]}},updateRect:function(e,t){HEAP32[e>>2]=t.x,HEAP32[e+4>>2]=t.y,HEAP32[e+8>>2]=t.w,HEAP32[e+12>>2]=t.h},intersectionOfRects:function(e,t){var r=Math.max(e.x,t.x),n=Math.max(e.y,t.y),i=Math.min(e.x+e.w,t.x+t.w),o=Math.min(e.y+e.h,t.y+t.h)
return{x:r,y:n,w:Math.max(r,i)-r,h:Math.max(n,o)-n}},checkPixelFormat:function(e){var t=HEAP32[e>>2];-2042224636!=t&&warnOnce("Unsupported pixel format!")},loadColorToCSSRGB:function(e){var t=HEAP32[e>>2]
return"rgb("+(255&t)+","+(t>>8&255)+","+(t>>16&255)+")"},loadColorToCSSRGBA:function(e){var t=HEAP32[e>>2]
return"rgba("+(255&t)+","+(t>>8&255)+","+(t>>16&255)+","+(t>>24&255)/255+")"},translateColorToCSSRGBA:function(e){return"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>>24)/255+")"},translateRGBAToCSSRGBA:function(e,t,r,n){return"rgba("+(255&e)+","+(255&t)+","+(255&r)+","+(255&n)/255+")"},translateRGBAToColor:function(e,t,r,n){return e|t<<8|r<<16|n<<24},makeSurface:function(e,t,r,n,i,o,a,s,u){r=r||0
var c=1&r,l=2097152&r,d=67108864&r,m=_malloc(60),f=_malloc(44),_=l?1:4,p=0
c||d||(p=_malloc(e*t*4)),HEAP32[m>>2]=r,HEAP32[m+4>>2]=f,HEAP32[m+8>>2]=e,HEAP32[m+12>>2]=t,HEAP32[m+16>>2]=e*_,HEAP32[m+20>>2]=p,HEAP32[m+36>>2]=0,HEAP32[m+40>>2]=0,HEAP32[m+44>>2]=Module.canvas.width,HEAP32[m+48>>2]=Module.canvas.height,HEAP32[m+56>>2]=1,HEAP32[f>>2]=-2042224636,HEAP32[f+4>>2]=0,HEAP8[f+8>>0]=8*_,HEAP8[f+9>>0]=_,HEAP32[f+12>>2]=o||255,HEAP32[f+16>>2]=a||65280,HEAP32[f+20>>2]=s||16711680,HEAP32[f+24>>2]=u||4278190080,SDL.GL=SDL.GL||d
var E
n?E=Module.canvas:(E=SDL.canvasPool.length>0?SDL.canvasPool.pop():document.createElement("canvas"),E.width=e,E.height=t)
var h={antialias:0!=SDL.glAttributes[13]&&SDL.glAttributes[14]>1,depth:SDL.glAttributes[6]>0,stencil:SDL.glAttributes[7]>0,alpha:SDL.glAttributes[3]>0},S=Browser.createContext(E,d,n,h)
return SDL.surfaces[m]={width:e,height:t,canvas:E,ctx:S,surf:m,buffer:p,pixelFormat:f,alpha:255,flags:r,locked:0,usePageCanvas:n,source:i,isFlagSet:function(e){return r&e}},m},copyIndexedColorData:function(e,t,r,n,i){if(e.colors){var o=Module.canvas.width,a=Module.canvas.height,s=t||0,u=r||0,c=(n||o-s)+s,l=(i||a-u)+u,d=e.buffer
e.image.data32||(e.image.data32=new Uint32Array(e.image.data.buffer))
for(var m=e.image.data32,f=e.colors32,_=u;l>_;++_)for(var p=_*o,E=s;c>E;++E)m[p+E]=f[HEAPU8[d+p+E>>0]]}},freeSurface:function(e){var t=e+56,r=HEAP32[t>>2]
if(r>1)return void(HEAP32[t>>2]=r-1)
var n=SDL.surfaces[e]
!n.usePageCanvas&&n.canvas&&SDL.canvasPool.push(n.canvas),n.buffer&&_free(n.buffer),_free(n.pixelFormat),_free(e),SDL.surfaces[e]=null,e===SDL.screen&&(SDL.screen=null)},blitSurface:function(e,t,r,n,i){var o,a,s=SDL.surfaces[e],u=SDL.surfaces[r]
if(o=t?SDL.loadRect(t):{x:0,y:0,w:s.width,h:s.height},a=n?SDL.loadRect(n):{x:0,y:0,w:s.width,h:s.height},u.clipRect){var c=i&&0!==o.w?o.w/a.w:1,l=i&&0!==o.h?o.h/a.h:1
a=SDL.intersectionOfRects(u.clipRect,a),o.w=a.w*c,o.h=a.h*l,n&&SDL.updateRect(n,a)}var d,m
if(i?(d=a.w,m=a.h):(d=o.w,m=o.h),0===o.w||0===o.h||0===d||0===m)return 0
var f=u.ctx.globalAlpha
return u.ctx.globalAlpha=s.alpha/255,u.ctx.drawImage(s.canvas,o.x,o.y,o.w,o.h,a.x,a.y,d,m),u.ctx.globalAlpha=f,r!=SDL.screen&&(warnOnce("WARNING: copying canvas data to memory for compatibility"),_SDL_LockSurface(r),u.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(e){function t(){for(var e in SDL.keyboardMap)SDL.events.push({type:"keyup",keyCode:SDL.keyboardMap[e]})}switch(e.type){case"touchstart":case"touchmove":e.preventDefault()
var r=[]
if("touchstart"===e.type)for(var n=0;n<e.touches.length;n++){var i=e.touches[n]
1!=SDL.downFingers[i.identifier]&&(SDL.downFingers[i.identifier]=!0,r.push(i))}else r=e.touches
var o=r[0]
if(o){"touchstart"==e.type&&(SDL.DOMButtons[0]=1)
var a
switch(e.type){case"touchstart":a="mousedown"
break
case"touchmove":a="mousemove"}var s={type:a,button:0,pageX:o.clientX,pageY:o.clientY}
SDL.events.push(s)}for(var n=0;n<r.length;n++){var i=r[n]
SDL.events.push({type:e.type,touch:i})}break
case"touchend":e.preventDefault()
for(var n=0;n<e.changedTouches.length;n++){var i=e.changedTouches[n]
SDL.downFingers[i.identifier]===!0&&delete SDL.downFingers[i.identifier]}var s={type:"mouseup",button:0,pageX:e.changedTouches[0].clientX,pageY:e.changedTouches[0].clientY}
SDL.DOMButtons[0]=0,SDL.events.push(s)
for(var n=0;n<e.changedTouches.length;n++){var i=e.changedTouches[n]
SDL.events.push({type:"touchend",touch:i})}break
case"DOMMouseScroll":case"mousewheel":case"wheel":var u=-Browser.getMouseWheelDelta(e)
u=0==u?0:u>0?Math.max(u,1):Math.min(u,-1)
var c=u>0?3:4
SDL.events.push({type:"mousedown",button:c,pageX:e.pageX,pageY:e.pageY}),SDL.events.push({type:"mouseup",button:c,pageX:e.pageX,pageY:e.pageY}),SDL.events.push({type:"wheel",deltaX:0,deltaY:u}),e.preventDefault()
break
case"mousemove":if(1===SDL.DOMButtons[0]&&SDL.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:e.pageX,pageY:e.pageY}}),Browser.pointerLock&&("mozMovementX"in e&&(e.movementX=e.mozMovementX,e.movementY=e.mozMovementY),0==e.movementX&&0==e.movementY))return void e.preventDefault()
case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if(("keydown"!==e.type||!SDL.unicode&&!SDL.textInput||8===e.keyCode||9===e.keyCode)&&e.preventDefault(),"mousedown"==e.type)SDL.DOMButtons[e.button]=1,SDL.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:e.pageX,pageY:e.pageY}})
else if("mouseup"==e.type){if(!SDL.DOMButtons[e.button])return
SDL.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:e.pageX,pageY:e.pageY}}),SDL.DOMButtons[e.button]=0}"keydown"===e.type||"mousedown"===e.type?SDL.canRequestFullscreen=!0:("keyup"===e.type||"mouseup"===e.type)&&(SDL.isRequestingFullscreen&&(Module.requestFullscreen(!0,!0),SDL.isRequestingFullscreen=!1),SDL.canRequestFullscreen=!1),"keypress"===e.type&&SDL.savedKeydown?(SDL.savedKeydown.keypressCharCode=e.charCode,SDL.savedKeydown=null):"keydown"===e.type&&(SDL.savedKeydown=e),("keypress"!==e.type||SDL.textInput)&&SDL.events.push(e)
break
case"mouseout":for(var n=0;3>n;n++)SDL.DOMButtons[n]&&(SDL.events.push({type:"mouseup",button:n,pageX:e.pageX,pageY:e.pageY}),SDL.DOMButtons[n]=0)
e.preventDefault()
break
case"focus":SDL.events.push(e),e.preventDefault()
break
case"blur":SDL.events.push(e),t(),e.preventDefault()
break
case"visibilitychange":SDL.events.push({type:"visibilitychange",visible:!document.hidden}),t(),e.preventDefault()
break
case"unload":return void(Browser.mainLoop.runner&&(SDL.events.push(e),Browser.mainLoop.runner()))
case"resize":SDL.events.push(e),e.preventDefault&&e.preventDefault()}SDL.events.length>=1e4&&(err("SDL event queue full, dropping events"),SDL.events=SDL.events.slice(0,1e4)),SDL.flushEventsToHandler()},lookupKeyCodeForEvent:function(e){var t=e.keyCode
return t>=65&&90>=t?t+=32:(t=SDL.keyCodes[e.keyCode]||e.keyCode,e.location===KeyboardEvent.DOM_KEY_LOCATION_RIGHT&&t>=1248&&1251>=t&&(t+=4)),t},handleEvent:function(e){if(!e.handled)switch(e.handled=!0,e.type){case"touchstart":case"touchend":case"touchmove":Browser.calculateMouseEvent(e)
break
case"keydown":case"keyup":var t="keydown"===e.type,r=SDL.lookupKeyCodeForEvent(e)
HEAP8[SDL.keyboardState+r>>0]=t,SDL.modState=(HEAP8[SDL.keyboardState+1248>>0]?64:0)|(HEAP8[SDL.keyboardState+1249>>0]?1:0)|(HEAP8[SDL.keyboardState+1250>>0]?256:0)|(HEAP8[SDL.keyboardState+1252>>0]?128:0)|(HEAP8[SDL.keyboardState+1253>>0]?2:0)|(HEAP8[SDL.keyboardState+1254>>0]?512:0),t?SDL.keyboardMap[r]=e.keyCode:delete SDL.keyboardMap[r]
break
case"mousedown":case"mouseup":"mousedown"==e.type?SDL.buttonState|=1<<e.button:"mouseup"==e.type&&(SDL.buttonState&=~(1<<e.button))
case"mousemove":Browser.calculateMouseEvent(e)}},flushEventsToHandler:function(){if(SDL.eventHandler)for(;SDL.pollEvent(SDL.eventHandlerTemp);)Module.dynCall_iii(SDL.eventHandler,SDL.eventHandlerContext,SDL.eventHandlerTemp)},pollEvent:function(e){if(512&SDL.initFlags&&SDL.joystickEventState&&SDL.queryJoysticks(),e){for(;SDL.events.length>0;)if(SDL.makeCEvent(SDL.events.shift(),e)!==!1)return 1
return 0}return SDL.events.length>0},makeCEvent:function(e,t){if("number"==typeof e)return _memcpy(t,e,28),void _free(e)
switch(SDL.handleEvent(e),e.type){case"keydown":case"keyup":var r,n="keydown"===e.type,i=SDL.lookupKeyCodeForEvent(e)
r=i>=1024?i-1024:SDL.scanCodes[i]||i,HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP8[t+8>>0]=n?1:0,HEAP8[t+9>>0]=0,HEAP32[t+12>>2]=r,HEAP32[t+16>>2]=i,HEAP16[t+20>>1]=SDL.modState,HEAP32[t+24>>2]=e.keypressCharCode||i
break
case"keypress":HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type]
for(var o=intArrayFromString(String.fromCharCode(e.charCode)),a=0;a<o.length;++a)HEAP8[t+(8+a)>>0]=o[a]
break
case"mousedown":case"mouseup":case"mousemove":if("mousemove"!=e.type){var n="mousedown"===e.type
HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP32[t+4>>2]=0,HEAP32[t+8>>2]=0,HEAP32[t+12>>2]=0,HEAP8[t+16>>0]=e.button+1,HEAP8[t+17>>0]=n?1:0,HEAP32[t+20>>2]=Browser.mouseX,HEAP32[t+24>>2]=Browser.mouseY}else HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP32[t+4>>2]=0,HEAP32[t+8>>2]=0,HEAP32[t+12>>2]=0,HEAP32[t+16>>2]=SDL.buttonState,HEAP32[t+20>>2]=Browser.mouseX,HEAP32[t+24>>2]=Browser.mouseY,HEAP32[t+28>>2]=Browser.mouseMovementX,HEAP32[t+32>>2]=Browser.mouseMovementY
break
case"wheel":HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP32[t+16>>2]=e.deltaX,HEAP32[t+20>>2]=e.deltaY
break
case"touchstart":case"touchend":case"touchmove":var s=e.touch
if(!Browser.touches[s.identifier])break
var u=Module.canvas.width,c=Module.canvas.height,l=Browser.touches[s.identifier].x/u,d=Browser.touches[s.identifier].y/c,m=Browser.lastTouches[s.identifier].x/u,f=Browser.lastTouches[s.identifier].y/c,_=l-m,p=d-f
if(void 0===s.deviceID&&(s.deviceID=SDL.TOUCH_DEFAULT_ID),0===_&&0===p&&"touchmove"===e.type)return!1
HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP32[t+4>>2]=_SDL_GetTicks(),tempI64=[s.deviceID>>>0,(tempDouble=s.deviceID,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t+8>>2]=tempI64[0],HEAP32[t+12>>2]=tempI64[1],tempI64=[s.identifier>>>0,(tempDouble=s.identifier,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t+16>>2]=tempI64[0],HEAP32[t+20>>2]=tempI64[1],HEAPF32[t+24>>2]=l,HEAPF32[t+28>>2]=d,HEAPF32[t+32>>2]=_,HEAPF32[t+36>>2]=p,void 0!==s.force?HEAPF32[t+40>>2]=s.force:HEAPF32[t+40>>2]="touchend"==e.type?0:1
break
case"unload":HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type]
break
case"resize":HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP32[t+4>>2]=e.w,HEAP32[t+8>>2]=e.h
break
case"joystick_button_up":case"joystick_button_down":var E="joystick_button_up"===e.type?0:1
HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP8[t+4>>0]=e.index,HEAP8[t+5>>0]=e.button,HEAP8[t+6>>0]=E
break
case"joystick_axis_motion":HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP8[t+4>>0]=e.index,HEAP8[t+5>>0]=e.axis,HEAP32[t+8>>2]=SDL.joystickAxisValueConversion(e.value)
break
case"focus":var h=12
HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP32[t+4>>2]=0,HEAP8[t+8>>0]=h
break
case"blur":var S=13
HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP32[t+4>>2]=0,HEAP8[t+8>>0]=S
break
case"visibilitychange":var v=1,g=2,L=e.visible?v:g
HEAP32[t>>2]=SDL.DOMEventToSDLEvent[e.type],HEAP32[t+4>>2]=0,HEAP8[t+8>>0]=L
break
default:throw"Unhandled SDL event: "+e.type}},makeFontString:function(e,t){return"'"!=t.charAt(0)&&'"'!=t.charAt(0)&&(t='"'+t+'"'),e+"px "+t+", serif"},estimateTextWidth:function(e,t){var r=e.size,n=SDL.makeFontString(r,e.name),i=SDL.ttfContext
assert(i,"TTF_Init must have been called"),i.font=n
var o=0|i.measureText(t).width
return o},allocateChannels:function(e){if(!(SDL.numChannels&&SDL.numChannels>=e&&0!=e)){SDL.numChannels=e,SDL.channels=[]
for(var t=0;e>t;t++)SDL.channels[t]={audio:null,volume:1}}},setGetVolume:function(e,t){if(!e)return 0
var r=128*e.volume
if(-1!=t&&(e.volume=Math.min(Math.max(t,0),128)/128,e.audio))try{e.audio.volume=e.volume,e.audio.webAudioGainNode&&(e.audio.webAudioGainNode.gain.value=e.volume)}catch(n){err("setGetVolume failed to set audio volume: "+n)}return r},setPannerPosition:function(e,t,r,n){e&&e.audio&&e.audio.webAudioPannerNode&&e.audio.webAudioPannerNode.setPosition(t,r,n)},playWebAudio:function(e){if(e&&!e.webAudioNode&&SDL.webAudioAvailable())try{var t=e.resource.webAudio
if(e.paused=!1,!t.decodedBuffer)return void 0===t.onDecodeComplete&&abort("Cannot play back audio object that was not loaded"),void t.onDecodeComplete.push(function(){e.paused||SDL.playWebAudio(e)})
e.webAudioNode=SDL.audioContext.createBufferSource(),e.webAudioNode.buffer=t.decodedBuffer,e.webAudioNode.loop=e.loop,e.webAudioNode.onended=function(){e.onended()},e.webAudioPannerNode=SDL.audioContext.createPanner(),e.webAudioPannerNode.setPosition(0,0,-.5),e.webAudioPannerNode.panningModel="equalpower",e.webAudioGainNode=SDL.audioContext.createGain(),e.webAudioGainNode.gain.value=e.volume,e.webAudioNode.connect(e.webAudioPannerNode),e.webAudioPannerNode.connect(e.webAudioGainNode),e.webAudioGainNode.connect(SDL.audioContext.destination),e.webAudioNode.start(0,e.currentPosition),e.startTime=SDL.audioContext.currentTime-e.currentPosition}catch(r){err("playWebAudio failed: "+r)}},pauseWebAudio:function(e){if(e){if(e.webAudioNode)try{e.currentPosition=(SDL.audioContext.currentTime-e.startTime)%e.resource.webAudio.decodedBuffer.duration,e.webAudioNode.onended=void 0,e.webAudioNode.stop(0),e.webAudioNode=void 0}catch(t){err("pauseWebAudio failed: "+t)}e.paused=!0}},openAudioContext:function(){SDL.audioContext||("undefined"!=typeof AudioContext?SDL.audioContext=new AudioContext:"undefined"!=typeof webkitAudioContext&&(SDL.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!SDL.audioContext},fillWebAudioBufferFromHeap:function(e,t,r){for(var n=SDL.audio.channels,i=0;n>i;++i){var o=r.getChannelData(i)
if(o.length!=t)throw"Web Audio output buffer length mismatch! Destination size: "+o.length+" samples vs expected "+t+" samples!"
if(32784==SDL.audio.format)for(var a=0;t>a;++a)o[a]=HEAP16[e+2*(a*n+i)>>1]/32768
else if(8==SDL.audio.format)for(var a=0;t>a;++a){var s=HEAP8[e+(a*n+i)>>0]
o[a]=(s>=0?s-128:s+128)/128}else{if(33056!=SDL.audio.format)throw"Invalid SDL audio format "+SDL.audio.format+"!"
for(var a=0;t>a;++a)o[a]=HEAPF32[e+4*(a*n+i)>>2]}}},debugSurface:function(e){console.log("dumping surface "+[e.surf,e.source,e.width,e.height])
for(var t=e.ctx.getImageData(0,0,e.width,e.height),r=t.data,n=Math.min(e.width,e.height),i=0;n>i;i++)console.log("   diagonal "+i+":"+[r[i*e.width*4+4*i+0],r[i*e.width*4+4*i+1],r[i*e.width*4+4*i+2],r[i*e.width*4+4*i+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(e,t){for(var r=Array(t.buttons.length),n=0;n<t.buttons.length;n++)r[n]=SDL.getJoystickButtonState(t.buttons[n])
SDL.lastJoystickState[e]={buttons:r,axes:t.axes.slice(0),timestamp:t.timestamp,index:t.index,id:t.id}},getJoystickButtonState:function(e){return"object"==typeof e?e.pressed:e>0},queryJoysticks:function(){for(var e in SDL.lastJoystickState){var t=SDL.getGamepad(e-1),r=SDL.lastJoystickState[e]
if(void 0===t)return
if(null===t)return
if("number"!=typeof t.timestamp||t.timestamp!==r.timestamp||!t.timestamp){var n
for(n=0;n<t.buttons.length;n++){var i=SDL.getJoystickButtonState(t.buttons[n])
i!==r.buttons[n]&&SDL.events.push({type:i?"joystick_button_down":"joystick_button_up",joystick:e,index:e-1,button:n})}for(n=0;n<t.axes.length;n++)t.axes[n]!==r.axes[n]&&SDL.events.push({type:"joystick_axis_motion",joystick:e,index:e-1,axis:n,value:t.axes[n]})
SDL.recordJoystickState(e,t)}}},joystickAxisValueConversion:function(e){return e=Math.min(1,Math.max(e,-1)),Math.ceil(32767.5*(e+1)-32768)},getGamepads:function(){var e=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads
return void 0!==e?e.apply(navigator):[]},getGamepad:function(e){var t=SDL.getGamepads()
return t.length>e&&e>=0?t[e]:null}},ENV={},___exception_infos={},___exception_last=0,SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var r
if(-100===e)r=FS.cwd()
else{var n=FS.getStream(e)
if(!n)throw new FS.ErrnoError(9)
r=n.path}t=PATH.join2(r,t)}return t},doStat:function(e,t,r){try{var n=e(t)}catch(i){if(i&&i.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(i.node)))return-20
throw i}return HEAP32[r>>2]=n.dev,HEAP32[r+4>>2]=0,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAP32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,HEAP32[r+32>>2]=0,tempI64=[n.size>>>0,(tempDouble=n.size,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks,HEAP32[r+56>>2]=n.atime.getTime()/1e3|0,HEAP32[r+60>>2]=0,HEAP32[r+64>>2]=n.mtime.getTime()/1e3|0,HEAP32[r+68>>2]=0,HEAP32[r+72>>2]=n.ctime.getTime()/1e3|0,HEAP32[r+76>>2]=0,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+80>>2]=tempI64[0],HEAP32[r+84>>2]=tempI64[1],0},doMsync:function(e,t,r,n){var i=new Uint8Array(HEAPU8.subarray(e,e+r))
FS.msync(t,i,0,r,n)},doMkdir:function(e,t){return e=PATH.normalize(e),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break
default:return-22}return FS.mknod(e,t,r),0},doReadlink:function(e,t,r){if(0>=r)return-22
var n=FS.readlink(e),i=Math.min(r,lengthBytesUTF8(n)),o=HEAP8[t+i]
return stringToUTF8(n,t,r+1),HEAP8[t+i]=o,i},doAccess:function(e,t){if(-8&t)return-22
var r,n=FS.lookupPath(e,{follow:!0})
if(r=n.node,!r)return-2
var i=""
return 4&t&&(i+="r"),2&t&&(i+="w"),1&t&&(i+="x"),i&&FS.nodePermissions(r,i)?-13:0},doDup:function(e,t,r){var n=FS.getStream(r)
return n&&FS.close(n),FS.open(e,t,0,r,r).fd},doReadv:function(e,t,r,n){for(var i=0,o=0;r>o;o++){var a=HEAP32[t+8*o>>2],s=HEAP32[t+(8*o+4)>>2],u=FS.read(e,HEAP8,a,s,n)
if(0>u)return-1
if(i+=u,s>u)break}return i},doWritev:function(e,t,r,n){for(var i=0,o=0;r>o;o++){var a=HEAP32[t+8*o>>2],s=HEAP32[t+(8*o+4)>>2],u=FS.write(e,HEAP8,a,s,n)
if(0>u)return-1
i+=u}return i},varargs:0,get:function(e){SYSCALLS.varargs+=4
var t=HEAP32[SYSCALLS.varargs-4>>2]
return t},getStr:function(){var e=UTF8ToString(SYSCALLS.get())
return e},getStreamFromFD:function(){var e=FS.getStream(SYSCALLS.get())
if(!e)throw new FS.ErrnoError(9)
return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get()
return assert(e>=0?0===t:-1===t),e},getZero:function(){assert(0===SYSCALLS.get())}},PROCINFO={ppid:1,pid:42,sid:42,pgid:42},PIPEFS={BUCKET_BUFFER_SIZE:8192,mount:function(e){return FS.createNode(null,"/",16895,0)},createPipe:function(){var e={buckets:[]}
e.buckets.push({buffer:new Uint8Array(PIPEFS.BUCKET_BUFFER_SIZE),offset:0,roffset:0})
var t=PIPEFS.nextname(),r=PIPEFS.nextname(),n=FS.createNode(PIPEFS.root,t,4096,0),i=FS.createNode(PIPEFS.root,r,4096,0)
n.pipe=e,i.pipe=e
var o=FS.createStream({path:t,node:n,flags:FS.modeStringToFlags("r"),seekable:!1,stream_ops:PIPEFS.stream_ops})
n.stream=o
var a=FS.createStream({path:r,node:i,flags:FS.modeStringToFlags("w"),seekable:!1,stream_ops:PIPEFS.stream_ops})
return i.stream=a,{readable_fd:o.fd,writable_fd:a.fd}},stream_ops:{poll:function(e){var t=e.node.pipe
if(1===(2097155&e.flags))return 260
if(t.buckets.length>0)for(var r=0;r<t.buckets.length;r++){var n=t.buckets[r]
if(n.offset-n.roffset>0)return 65}return 0},ioctl:function(e,t,r){return ERRNO_CODES.EINVAL},fsync:function(e){return ERRNO_CODES.EINVAL},read:function(e,t,r,n,i){for(var o=e.node.pipe,a=0,s=0;s<o.buckets.length;s++){var u=o.buckets[s]
a+=u.offset-u.roffset}assert(t instanceof ArrayBuffer||ArrayBuffer.isView(t))
var c=t.subarray(r,r+n)
if(0>=n)return 0
if(0==a)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)
for(var l=Math.min(a,n),d=l,m=0,s=0;s<o.buckets.length;s++){var f=o.buckets[s],_=f.offset-f.roffset
if(_>=l){var p=f.buffer.subarray(f.roffset,f.offset)
_>l?(p=p.subarray(0,l),f.roffset+=l):m++,c.set(p)
break}var p=f.buffer.subarray(f.roffset,f.offset)
c.set(p),c=c.subarray(p.byteLength),l-=p.byteLength,m++}return m&&m==o.buckets.length&&(m--,o.buckets[m].offset=0,o.buckets[m].roffset=0),o.buckets.splice(0,m),d},write:function(e,t,r,n,i){var o=e.node.pipe
assert(t instanceof ArrayBuffer||ArrayBuffer.isView(t))
var a=t.subarray(r,r+n),s=a.byteLength
if(0>=s)return 0
var u=null
0==o.buckets.length?(u={buffer:new Uint8Array(PIPEFS.BUCKET_BUFFER_SIZE),offset:0,roffset:0},o.buckets.push(u)):u=o.buckets[o.buckets.length-1],assert(u.offset<=PIPEFS.BUCKET_BUFFER_SIZE)
var c=PIPEFS.BUCKET_BUFFER_SIZE-u.offset
if(c>=s)return u.buffer.set(a,u.offset),u.offset+=s,s
c>0&&(u.buffer.set(a.subarray(0,c),u.offset),u.offset+=c,a=a.subarray(c,a.byteLength))
for(var l=a.byteLength/PIPEFS.BUCKET_BUFFER_SIZE|0,d=a.byteLength%PIPEFS.BUCKET_BUFFER_SIZE,m=0;l>m;m++){var f={buffer:new Uint8Array(PIPEFS.BUCKET_BUFFER_SIZE),offset:PIPEFS.BUCKET_BUFFER_SIZE,roffset:0}
o.buckets.push(f),f.buffer.set(a.subarray(0,PIPEFS.BUCKET_BUFFER_SIZE)),a=a.subarray(PIPEFS.BUCKET_BUFFER_SIZE,a.byteLength)}if(d>0){var f={buffer:new Uint8Array(PIPEFS.BUCKET_BUFFER_SIZE),offset:a.byteLength,roffset:0}
o.buckets.push(f),f.buffer.set(a)}return s},close:function(e){var t=e.node.pipe
t.buckets=null}},nextname:function(){return PIPEFS.nextname.current||(PIPEFS.nextname.current=0),"pipe["+PIPEFS.nextname.current++ +"]"}},_ceil=Math_ceil,_fabs=Math_abs,_floor=Math_floor,GL={counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},currentContext:null,offscreenCanvases:{},timerQueriesEXT:[],currArrayBuffer:0,currElementArrayBuffer:0,byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},unpackAlignment:4,init:function(){GL.createLog2ceilLookup(GL.MAX_TEMP_BUFFER_SIZE),GL.miniTempBuffer=new Float32Array(GL.MINI_TEMP_BUFFER_SIZE)
for(var e=0;e<GL.MINI_TEMP_BUFFER_SIZE;e++)GL.miniTempBufferViews[e]=GL.miniTempBuffer.subarray(0,e+1)},recordError:function(e){GL.lastError||(GL.lastError=e)},getNewId:function(e){for(var t=GL.counter++,r=e.length;t>r;r++)e[r]=null
return t},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],MAX_TEMP_BUFFER_SIZE:2097152,numTempVertexBuffersPerSize:64,log2ceilLookup:null,createLog2ceilLookup:function(e){GL.log2ceilLookup=new Uint8Array(e+1)
var t=0,r=1
GL.log2ceilLookup[0]=0
for(var n=1;e>=n;++n)n>r&&(r<<=1,++t),GL.log2ceilLookup[n]=t},generateTempBuffers:function(e,t){var r=GL.log2ceilLookup[GL.MAX_TEMP_BUFFER_SIZE]
t.tempVertexBufferCounters1=[],t.tempVertexBufferCounters2=[],t.tempVertexBufferCounters1.length=t.tempVertexBufferCounters2.length=r+1,t.tempVertexBuffers1=[],t.tempVertexBuffers2=[],t.tempVertexBuffers1.length=t.tempVertexBuffers2.length=r+1,t.tempIndexBuffers=[],t.tempIndexBuffers.length=r+1
for(var n=0;r>=n;++n){t.tempIndexBuffers[n]=null,t.tempVertexBufferCounters1[n]=t.tempVertexBufferCounters2[n]=0
var i=GL.numTempVertexBuffersPerSize
t.tempVertexBuffers1[n]=[],t.tempVertexBuffers2[n]=[]
var o=t.tempVertexBuffers1[n],a=t.tempVertexBuffers2[n]
o.length=a.length=i
for(var s=0;i>s;++s)o[s]=a[s]=null}if(e){t.tempQuadIndexBuffer=GLctx.createBuffer(),t.GLctx.bindBuffer(t.GLctx.ELEMENT_ARRAY_BUFFER,t.tempQuadIndexBuffer)
for(var u=GL.MAX_TEMP_BUFFER_SIZE>>1,c=new Uint16Array(u),n=0,l=0;(c[n++]=l,!(n>=u))&&(c[n++]=l+1,!(n>=u))&&(c[n++]=l+2,!(n>=u))&&(c[n++]=l,!(n>=u))&&(c[n++]=l+2,!(n>=u))&&(c[n++]=l+3,!(n>=u));)l+=4
t.GLctx.bufferData(t.GLctx.ELEMENT_ARRAY_BUFFER,c,t.GLctx.STATIC_DRAW),t.GLctx.bindBuffer(t.GLctx.ELEMENT_ARRAY_BUFFER,null)}},getTempVertexBuffer:function(e){var t=GL.log2ceilLookup[e],r=GL.currentContext.tempVertexBuffers1[t],n=GL.currentContext.tempVertexBufferCounters1[t]
GL.currentContext.tempVertexBufferCounters1[t]=GL.currentContext.tempVertexBufferCounters1[t]+1&GL.numTempVertexBuffersPerSize-1
var i=r[n]
if(i)return i
var o=GLctx.getParameter(GLctx.ARRAY_BUFFER_BINDING)
return r[n]=GLctx.createBuffer(),GLctx.bindBuffer(GLctx.ARRAY_BUFFER,r[n]),GLctx.bufferData(GLctx.ARRAY_BUFFER,1<<t,GLctx.DYNAMIC_DRAW),GLctx.bindBuffer(GLctx.ARRAY_BUFFER,o),r[n]},getTempIndexBuffer:function(e){var t=GL.log2ceilLookup[e],r=GL.currentContext.tempIndexBuffers[t]
if(r)return r
var n=GLctx.getParameter(GLctx.ELEMENT_ARRAY_BUFFER_BINDING)
return GL.currentContext.tempIndexBuffers[t]=GLctx.createBuffer(),GLctx.bindBuffer(GLctx.ELEMENT_ARRAY_BUFFER,GL.currentContext.tempIndexBuffers[t]),GLctx.bufferData(GLctx.ELEMENT_ARRAY_BUFFER,1<<t,GLctx.DYNAMIC_DRAW),GLctx.bindBuffer(GLctx.ELEMENT_ARRAY_BUFFER,n),GL.currentContext.tempIndexBuffers[t]},newRenderingFrameStarted:function(){if(GL.currentContext){var e=GL.currentContext.tempVertexBuffers1
GL.currentContext.tempVertexBuffers1=GL.currentContext.tempVertexBuffers2,GL.currentContext.tempVertexBuffers2=e,e=GL.currentContext.tempVertexBufferCounters1,GL.currentContext.tempVertexBufferCounters1=GL.currentContext.tempVertexBufferCounters2,GL.currentContext.tempVertexBufferCounters2=e
for(var t=GL.log2ceilLookup[GL.MAX_TEMP_BUFFER_SIZE],r=0;t>=r;++r)GL.currentContext.tempVertexBufferCounters1[r]=0}},getSource:function(e,t,r,n){for(var i="",o=0;t>o;++o){var a=n?HEAP32[n+4*o>>2]:-1
i+=UTF8ToString(HEAP32[r+4*o>>2],0>a?void 0:a)}var s=GLctx.getShaderParameter(GL.shaders[e],35663)
return 35632==s&&(GLEmulation.findToken(i,"dFdx")||GLEmulation.findToken(i,"dFdy")||GLEmulation.findToken(i,"fwidth"))&&(i="#extension GL_OES_standard_derivatives : enable\n"+i,GLctx.getExtension("OES_standard_derivatives")),i},createContext:function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)
return r?GL.registerContext(r,t):0},registerContext:function(e,t){var r=_malloc(8),n={handle:r,attributes:t,version:t.majorVersion,GLctx:e}
return e.canvas&&(e.canvas.GLctxObject=n),GL.contexts[r]=n,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&GL.initExtensions(n),r},makeContextCurrent:function(e){return GL.currentContext=GL.contexts[e],Module.ctx=GLctx=GL.currentContext&&GL.currentContext.GLctx,!(e&&!GLctx)},getContext:function(e){return GL.contexts[e]},deleteContext:function(e){GL.currentContext===GL.contexts[e]&&(GL.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(GL.contexts[e].GLctx.canvas),GL.contexts[e]&&GL.contexts[e].GLctx.canvas&&(GL.contexts[e].GLctx.canvas.GLctxObject=void 0),_free(GL.contexts[e]),GL.contexts[e]=null},acquireInstancedArraysExtension:function(e){var t=e.getExtension("ANGLE_instanced_arrays")
t&&(e.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},e.drawArraysInstanced=function(e,r,n,i){t.drawArraysInstancedANGLE(e,r,n,i)},e.drawElementsInstanced=function(e,r,n,i,o){t.drawElementsInstancedANGLE(e,r,n,i,o)})},acquireVertexArrayObjectExtension:function(e){var t=e.getExtension("OES_vertex_array_object")
t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})},acquireDrawBuffersExtension:function(e){var t=e.getExtension("WEBGL_draw_buffers")
t&&(e.drawBuffers=function(e,r){t.drawBuffersWEBGL(e,r)})},initExtensions:function(e){if(e||(e=GL.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0
var t=e.GLctx
e.compressionExt=t.getExtension("WEBGL_compressed_texture_s3tc"),e.anisotropicExt=t.getExtension("EXT_texture_filter_anisotropic"),e.version<2&&(GL.acquireInstancedArraysExtension(t),GL.acquireVertexArrayObjectExtension(t),GL.acquireDrawBuffersExtension(t)),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query")
var r=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"],n=t.getSupportedExtensions()
n&&n.length>0&&t.getSupportedExtensions().forEach(function(e){-1!=r.indexOf(e)&&t.getExtension(e)})}},populateUniformTable:function(e){for(var t=GL.programs[e],r=GL.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},n=r.uniforms,i=GLctx.getProgramParameter(t,35718),o=0;i>o;++o){var a=GLctx.getActiveUniform(t,o),s=a.name
r.maxUniformLength=Math.max(r.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")))
var u=GLctx.getUniformLocation(t,s)
if(u){var c=GL.getNewId(GL.uniforms)
n[s]=[a.size,c],GL.uniforms[c]=u
for(var l=1;l<a.size;++l){var d=s+"["+l+"]"
u=GLctx.getUniformLocation(t,d),c=GL.getNewId(GL.uniforms),GL.uniforms[c]=u}}}}},GLEmulation={fogStart:0,fogEnd:1,fogDensity:1,fogColor:null,fogMode:2048,fogEnabled:!1,vaos:[],currentVao:null,enabledVertexAttribArrays:{},hasRunInit:!1,findToken:function(e,t){function r(e){return e>=48&&57>=e?!0:e>=65&&90>=e?!0:e>=97&&122>=e?!0:!1}for(var n=-1;n=e.indexOf(t,n+1),!(0>n);)if(!(n>0&&r(e[n-1])||(n+=t.length,n<e.length-1&&r(e[n+1]))))return!0
return!1},init:function(){function e(e){return/precision +(low|medium|high)p +float *;/.test(e)||(e="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n"+e),e}if(!GLEmulation.hasRunInit){GLEmulation.hasRunInit=!0,GLEmulation.fogColor=new Float32Array(4)
var t={2884:1,3042:1,3024:1,2960:1,2929:1,3089:1,32823:1,32926:1,32928:1},r=_glEnable
_glEnable=_emscripten_glEnable=function(e){return GLImmediate.lastRenderer&&GLImmediate.lastRenderer.cleanup(),2912==e?void(1!=GLEmulation.fogEnabled&&(GLImmediate.currentRenderer=null,GLEmulation.fogEnabled=!0)):void(3553!=e&&e in t&&r(e))}
var n=_glDisable
_glDisable=_emscripten_glDisable=function(e){return GLImmediate.lastRenderer&&GLImmediate.lastRenderer.cleanup(),2912==e?void(0!=GLEmulation.fogEnabled&&(GLImmediate.currentRenderer=null,GLEmulation.fogEnabled=!1)):void(3553!=e&&e in t&&n(e))},_glIsEnabled=_emscripten_glIsEnabled=function(e){return 2912==e?GLEmulation.fogEnabled?1:0:e in t?GLctx.isEnabled(e):0}
var i=_glGetBooleanv
_glGetBooleanv=_emscripten_glGetBooleanv=function(e,t){var r=GLEmulation.getAttributeFromCapability(e)
if(null!==r){var n=GLImmediate.enabledClientAttributes[r]
return void(HEAP8[t>>0]=n===!0?1:0)}i(e,t)}
var o=_glGetIntegerv
_glGetIntegerv=_emscripten_glGetIntegerv=function(e,t){switch(e){case 34018:e=GLctx.MAX_TEXTURE_IMAGE_UNITS
break
case 35658:var r=GLctx.getParameter(GLctx.MAX_VERTEX_UNIFORM_VECTORS)
return void(HEAP32[t>>2]=4*r)
case 35657:var r=GLctx.getParameter(GLctx.MAX_FRAGMENT_UNIFORM_VECTORS)
return void(HEAP32[t>>2]=4*r)
case 35659:var r=GLctx.getParameter(GLctx.MAX_VARYING_VECTORS)
return void(HEAP32[t>>2]=4*r)
case 34929:e=GLctx.MAX_COMBINED_TEXTURE_IMAGE_UNITS
break
case 32890:var n=GLImmediate.clientAttributes[GLImmediate.VERTEX]
return void(HEAP32[t>>2]=n?n.size:0)
case 32891:var n=GLImmediate.clientAttributes[GLImmediate.VERTEX]
return void(HEAP32[t>>2]=n?n.type:0)
case 32892:var n=GLImmediate.clientAttributes[GLImmediate.VERTEX]
return void(HEAP32[t>>2]=n?n.stride:0)
case 32897:var n=GLImmediate.clientAttributes[GLImmediate.COLOR]
return void(HEAP32[t>>2]=n?n.size:0)
case 32898:var n=GLImmediate.clientAttributes[GLImmediate.COLOR]
return void(HEAP32[t>>2]=n?n.type:0)
case 32899:var n=GLImmediate.clientAttributes[GLImmediate.COLOR]
return void(HEAP32[t>>2]=n?n.stride:0)
case 32904:var n=GLImmediate.clientAttributes[GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture]
return void(HEAP32[t>>2]=n?n.size:0)
case 32905:var n=GLImmediate.clientAttributes[GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture]
return void(HEAP32[t>>2]=n?n.type:0)
case 32906:var n=GLImmediate.clientAttributes[GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture]
return void(HEAP32[t>>2]=n?n.stride:0)}o(e,t)}
var a=_glGetString
_glGetString=_emscripten_glGetString=function(e){if(GL.stringCache[e])return GL.stringCache[e]
switch(e){case 7939:var t=stringToNewUTF8(GLctx.getSupportedExtensions().join(" ")+" GL_EXT_texture_env_combine GL_ARB_texture_env_crossbar GL_ATI_texture_env_combine3 GL_NV_texture_env_combine4 GL_EXT_texture_env_dot3 GL_ARB_multitexture GL_ARB_vertex_buffer_object GL_EXT_framebuffer_object GL_ARB_vertex_program GL_ARB_fragment_program GL_ARB_shading_language_100 GL_ARB_shader_objects GL_ARB_vertex_shader GL_ARB_fragment_shader GL_ARB_texture_cube_map GL_EXT_draw_range_elements"+(GL.currentContext.compressionExt?" GL_ARB_texture_compression GL_EXT_texture_compression_s3tc":"")+(GL.currentContext.anisotropicExt?" GL_EXT_texture_filter_anisotropic":""))
return GL.stringCache[e]=t,t}return a(e)},GL.shaderInfos={}
var s=_glCreateShader
_glCreateShader=_emscripten_glCreateShader=function(e){var t=s(e)
return GL.shaderInfos[t]={type:e,ftransform:!1},t},_glShaderSource=_emscripten_glShaderSource=function(t,r,n,i){var o=GL.getSource(t,r,n,i)
if(GL.shaderInfos[t].type==GLctx.VERTEX_SHADER){var a=o.search(/u_projection/)>=0,s=o.search(/u_modelView/)>=0,u=o.search(/a_position/)>=0,c=0,l=0,d=0,m=o
o=o.replace(/ftransform\(\)/g,"(u_projection * u_modelView * a_position)"),m!=o&&(c=l=d=1),m=o,o=o.replace(/gl_ProjectionMatrix/g,"u_projection"),m!=o&&(c=1),m=o,o=o.replace(/gl_ModelViewMatrixTranspose\[2\]/g,"vec4(u_modelView[0][2], u_modelView[1][2], u_modelView[2][2], u_modelView[3][2])"),m!=o&&(l=1),m=o,o=o.replace(/gl_ModelViewMatrix/g,"u_modelView"),m!=o&&(l=1),m=o,o=o.replace(/gl_Vertex/g,"a_position"),m!=o&&(d=1),m=o,o=o.replace(/gl_ModelViewProjectionMatrix/g,"(u_projection * u_modelView)"),m!=o&&(c=l=1),d&&!u&&(o="attribute vec4 a_position; \n"+o),l&&!s&&(o="uniform mat4 u_modelView; \n"+o),c&&!a&&(o="uniform mat4 u_projection; \n"+o),GL.shaderInfos[t].ftransform=c||l||d
for(var f=0;f<GLImmediate.MAX_TEXTURES;f++){m=o
var _=-1==o.search("v_texCoord"+f)
o=o.replace(RegExp("gl_TexCoord\\["+f+"\\]","g"),"v_texCoord"+f).replace(RegExp("gl_MultiTexCoord"+f,"g"),"a_texCoord"+f),o!=m&&(o="attribute vec4 a_texCoord"+f+"; \n"+o,_&&(o="varying vec4 v_texCoord"+f+";   \n"+o)),m=o,o=o.replace(RegExp("gl_TextureMatrix\\["+f+"\\]","g"),"u_textureMatrix"+f),o!=m&&(o="uniform mat4 u_textureMatrix"+f+"; \n"+o)}o.indexOf("gl_FrontColor")>=0&&(o="varying vec4 v_color; \n"+o.replace(/gl_FrontColor/g,"v_color")),o.indexOf("gl_Color")>=0&&(o="attribute vec4 a_color; \n"+o.replace(/gl_Color/g,"a_color")),o.indexOf("gl_Normal")>=0&&(o="attribute vec3 a_normal; \n"+o.replace(/gl_Normal/g,"a_normal")),o.indexOf("gl_FogFragCoord")>=0&&(o="varying float v_fogFragCoord;   \n"+o.replace(/gl_FogFragCoord/g,"v_fogFragCoord"))}else{for(f=0;f<GLImmediate.MAX_TEXTURES;f++)m=o,o=o.replace(RegExp("gl_TexCoord\\["+f+"\\]","g"),"v_texCoord"+f),o!=m&&(o="varying vec4 v_texCoord"+f+";   \n"+o)
o.indexOf("gl_Color")>=0&&(o="varying vec4 v_color; \n"+o.replace(/gl_Color/g,"v_color")),o.indexOf("gl_Fog.color")>=0&&(o="uniform vec4 u_fogColor;   \n"+o.replace(/gl_Fog.color/g,"u_fogColor")),o.indexOf("gl_Fog.end")>=0&&(o="uniform float u_fogEnd;   \n"+o.replace(/gl_Fog.end/g,"u_fogEnd")),o.indexOf("gl_Fog.scale")>=0&&(o="uniform float u_fogScale;   \n"+o.replace(/gl_Fog.scale/g,"u_fogScale")),o.indexOf("gl_Fog.density")>=0&&(o="uniform float u_fogDensity;   \n"+o.replace(/gl_Fog.density/g,"u_fogDensity")),o.indexOf("gl_FogFragCoord")>=0&&(o="varying float v_fogFragCoord;   \n"+o.replace(/gl_FogFragCoord/g,"v_fogFragCoord")),o=e(o)}GLctx.shaderSource(GL.shaders[t],o)},_glCompileShader=_emscripten_glCompileShader=function(e){GLctx.compileShader(GL.shaders[e])},GL.programShaders={}
var u=_glAttachShader
_glAttachShader=_emscripten_glAttachShader=function(e,t){GL.programShaders[e]||(GL.programShaders[e]=[]),GL.programShaders[e].push(t),u(e,t)}
var c=_glDetachShader
_glDetachShader=_emscripten_glDetachShader=function(e,t){var r=GL.programShaders[e]
if(!r)return void err("WARNING: _glDetachShader received invalid program: "+e)
var n=r.indexOf(t)
r.splice(n,1),c(e,t)}
var l=_glUseProgram
_glUseProgram=_emscripten_glUseProgram=function(e){GL.currProgram!=e&&(GLImmediate.currentRenderer=null,GL.currProgram=e,GLImmediate.fixedFunctionProgram=0,l(e))}
var d=_glDeleteProgram
_glDeleteProgram=_emscripten_glDeleteProgram=function(e){d(e),e==GL.currProgram&&(GLImmediate.currentRenderer=null,GL.currProgram=0)}
var m={},f=_glBindAttribLocation
_glBindAttribLocation=_emscripten_glBindAttribLocation=function(e,t,r){0==t&&(m[e]=!0),f(e,t,r)}
var _=_glLinkProgram
_glLinkProgram=_emscripten_glLinkProgram=function(e){e in m||GLctx.bindAttribLocation(GL.programs[e],0,"a_position"),_(e)}
var p=_glBindBuffer
_glBindBuffer=_emscripten_glBindBuffer=function(e,t){p(e,t),e==GLctx.ARRAY_BUFFER?GLEmulation.currentVao&&(assert(GLEmulation.currentVao.arrayBuffer==t||0==GLEmulation.currentVao.arrayBuffer||0==t,"TODO: support for multiple array buffers in vao"),GLEmulation.currentVao.arrayBuffer=t):e==GLctx.ELEMENT_ARRAY_BUFFER&&GLEmulation.currentVao&&(GLEmulation.currentVao.elementArrayBuffer=t)}
var E=_glGetFloatv
_glGetFloatv=_emscripten_glGetFloatv=function(e,t){2982==e?HEAPF32.set(GLImmediate.matrix[0],t>>2):2983==e?HEAPF32.set(GLImmediate.matrix[1],t>>2):2984==e?HEAPF32.set(GLImmediate.matrix[2+GLImmediate.clientActiveTexture],t>>2):2918==e?HEAPF32.set(GLEmulation.fogColor,t>>2):2915==e?HEAPF32[t>>2]=GLEmulation.fogStart:2916==e?HEAPF32[t>>2]=GLEmulation.fogEnd:2914==e?HEAPF32[t>>2]=GLEmulation.fogDensity:2917==e?HEAPF32[t>>2]=GLEmulation.fogMode:E(e,t)}
var h=_glHint
_glHint=_emscripten_glHint=function(e,t){34031!=e&&h(e,t)}
var S=_glEnableVertexAttribArray
_glEnableVertexAttribArray=_emscripten_glEnableVertexAttribArray=function(e){S(e),GLEmulation.enabledVertexAttribArrays[e]=1,GLEmulation.currentVao&&(GLEmulation.currentVao.enabledVertexAttribArrays[e]=1)}
var v=_glDisableVertexAttribArray
_glDisableVertexAttribArray=_emscripten_glDisableVertexAttribArray=function(e){v(e),delete GLEmulation.enabledVertexAttribArrays[e],GLEmulation.currentVao&&delete GLEmulation.currentVao.enabledVertexAttribArrays[e]}
var g=_glVertexAttribPointer
_glVertexAttribPointer=_emscripten_glVertexAttribPointer=function(e,t,r,n,i,o){g(e,t,r,n,i,o),GLEmulation.currentVao&&(GLEmulation.currentVao.vertexAttribPointers[e]=[e,t,r,n,i,o])}}},getAttributeFromCapability:function(e){var t=null
switch(e){case 3553:abort("GL_TEXTURE_2D is not a spec-defined capability for gl{Enable,Disable}ClientState.")
case 32888:t=GLImmediate.TEXTURE0+GLImmediate.clientActiveTexture
break
case 32884:t=GLImmediate.VERTEX
break
case 32885:t=GLImmediate.NORMAL
break
case 32886:t=GLImmediate.COLOR}return t}},GLImmediate={MapTreeLib:null,spawnMapTreeLib:function(){function e(){var e=[]
this.insert=function(t,r){return this.contains(0|t)?!1:(e.push([t,r]),!0)}
var t
this.contains=function(r){for(t=0;t<e.length;++t)if(e[t][0]===r)return!0
return!1}
var r
this.get=function(t){for(r=0;r<e.length;++r)if(e[r][0]===t)return e[r][1]}}function t(){function t(){var r=new e
this.child=function(e){return r.contains(0|e)||r.insert(0|e,new t),r.get(0|e)},this.value=void 0,this.get=function(){return this.value},this.set=function(e){this.value=e}}function r(e){var t
this.reset=function(){return t=e,this},this.reset(),this.next=function(e){return t=t.child(e),this},this.get=function(){return t.get()},this.set=function(e){t.set(e)}}var n,i
this.createKeyView=function(){return new r(n)},this.clear=function(){n=new t,i=this.createKeyView()},this.clear(),this.getStaticKeyView=function(){return i.reset(),i}}return{create:function(){return new t}}},TexEnvJIT:null,spawnTexEnvJIT:function(){function e(e){assert(!1,"[TexEnvJIT] ABORT: "+e)}function t(t){e("No support: "+t)}function r(t){e("Sanity failure: "+t)}function n(e){var n=te[e],i=n.getTexType(),o=null
switch(i){case d:o="texture2D"
break
case m:o="texture2D"
break
case f:return t("No support for 3D textures.")
case _:o="textureCube"
break
default:return r("Unknown texType: 0x"+i.toString(16))}var a=Z+e
return null!=ee&&(a="("+ee+e+" * "+a+")"),o+"("+J+e+", "+a+".xy)"}function i(e){switch(e){case z:case W:return"vec3"
case q:case K:return"float"}return t("Unsupported combiner op: 0x"+e.toString(16))}function o(){return te[re]}function a(e,r,i,o,a){var s=null
switch(o){case j:s=n(e)
break
case X:s=r
break
case V:s=$
break
case Y:s=i
break
default:return t("Unsupported combiner src: 0x"+o.toString(16))}var u=null
switch(a){case z:u=s+".rgb"
break
case W:u="(vec3(1.0) - "+s+".rgb)"
break
case q:u=s+".a"
break
case K:u="(1.0 - "+s+".a)"
break
default:return t("Unsupported combiner op: 0x"+a.toString(16))}return u}function s(e){return e==Math.round(e)?e+".0":e}function u(){this.mode=C,this.colorCombiner=C,this.alphaCombiner=C,this.colorScale=1,this.alphaScale=1,this.envColor=[0,0,0,0],this.colorSrc=[j,Y,X],this.alphaSrc=[j,Y,X],this.colorOp=[z,z,q],this.alphaOp=[q,q,q],this.traverseKey={7681:0,8448:1,260:2,3042:3,8449:4,34160:5,34023:3,34165:4,5890:0,34166:1,34167:2,34168:3,768:0,769:1,770:2,771:3},this.key0=-1,this.key1=0,this.key2=0,this.computeKey0=function(){var e=this.traverseKey,t=1638400*e[this.mode]
return t+=327680*e[this.colorCombiner],t+=65536*e[this.alphaCombiner],t+=16384*(this.colorScale-1),t+=4096*(this.alphaScale-1),t+=1024*e[this.colorSrc[0]],t+=256*e[this.colorSrc[1]],t+=64*e[this.colorSrc[2]],t+=16*e[this.alphaSrc[0]],t+=4*e[this.alphaSrc[1]],t+=e[this.alphaSrc[2]]},this.computeKey1=function(){var e=this.traverseKey
return key=4096*e[this.colorOp[0]],key+=1024*e[this.colorOp[1]],key+=256*e[this.colorOp[2]],key+=16*e[this.alphaOp[0]],key+=4*e[this.alphaOp[1]],key+=e[this.alphaOp[2]]},this.computeKey2=function(){return 16777216*this.envColor[0]+65536*this.envColor[1]+256*this.envColor[2]+1+this.envColor[3]},this.recomputeKey=function(){this.key0=this.computeKey0(),this.key1=this.computeKey1(),this.key2=this.computeKey2()},this.invalidateKey=function(){this.key0=-1,GLImmediate.currentRenderer=null}}function c(){this.env=new u,this.enabled_tex1D=!1,this.enabled_tex2D=!1,this.enabled_tex3D=!1,this.enabled_texCube=!1,this.texTypesEnabled=0,this.traverseState=function(e){this.texTypesEnabled?(-1==this.env.key0&&this.env.recomputeKey(),e.next(this.texTypesEnabled|this.env.key0<<4),e.next(this.env.key1),e.next(this.env.key2)):e.next(0)}}var l=33984,d=3552,m=3553,f=32879,_=34067,p=8960,E=8704,h=8705,S=34176,v=34177,g=34178,L=34184,y=34185,F=34186,b=34192,w=34193,A=34194,M=34200,T=34201,x=34202,D=34161,I=34162,P=34163,O=3356,R=260,G=3042,k=7681,C=8448,N=8449,B=34160,U=34023,H=34165,j=5890,X=34166,V=34167,Y=34168,z=768,W=769,q=770,K=771,Q="tej_",J="uTexUnit",Z="vTexCoord",$="vPrimColor",ee="uTexMatrix",te=null,re=0,ne=[]
return c.prototype.enabled=function(){return this.texTypesEnabled},c.prototype.genPassLines=function(e,t,r){if(!this.enabled())return["vec4 "+e+" = "+t+";"]
for(var n,i=this.env.genPassLines(e,t,r).join("\n"),o="",a=/(texture.*?\(.*?\))/g,s=0;n=a.exec(i);){var u=n[1],c=i.slice(n.index+1).indexOf(u)
if(-1!=c){var l=Q+"env"+r+"_",d=l+"texload"+s++,m="vec4 "+d+" = "+u+";\n"
o+=m+"\n",i=i.split(u).join(d),a=/(texture.*\(.*\))/g}}return[o+i]},c.prototype.getTexType=function(){return this.enabled_texCube?_:this.enabled_tex3D?f:this.enabled_tex2D?m:this.enabled_tex1D?d:0},u.prototype.genPassLines=function(e,r,i){switch(this.mode){case k:return["vec4 "+e+" = "+n(i)+";"]
case R:var o=Q+"env"+i+"_",a=o+"tex",u=o+"color",c=o+"alpha"
return["vec4 "+a+" = "+n(i)+";","vec3 "+u+" = "+r+".rgb + "+a+".rgb;","float "+c+" = "+r+".a * "+a+".a;","vec4 "+e+" = vec4("+u+", "+c+");"]
case C:var l=["vec4 "+e," = ",r," * ",n(i),";"]
return[l.join("")]
case N:var o=Q+"env"+i+"_",a=o+"tex",u=o+"color",c=o+"alpha"
return["vec4 "+a+" = "+n(i)+";",""+("vec3 "+u+" = ")+(r+".rgb * (1.0 - "+a+".a)")+" + "+(a+".rgb * "+a+".a")+";","float "+c+" = "+r+".a;","vec4 "+e+" = vec4("+u+", "+c+");"]
case G:var o=Q+"env"+i+"_",a=o+"tex",u=o+"color",c=o+"alpha"
return["vec4 "+a+" = "+n(i)+";",""+("vec3 "+u+" = ")+(r+".rgb * (1.0 - "+a+".rgb)")+" + "+($+".rgb * "+a+".rgb")+";","float "+c+" = "+a+".a;","vec4 "+e+" = vec4("+u+", "+c+");"]
case B:var o=Q+"env"+i+"_",u=o+"color",c=o+"alpha",d=this.genCombinerLines(!0,u,r,i,this.colorCombiner,this.colorSrc,this.colorOp),m=this.genCombinerLines(!1,c,r,i,this.alphaCombiner,this.alphaSrc,this.alphaOp),f=1==this.colorScale?u:u+" * "+s(this.colorScale),_=1==this.alphaScale?c:c+" * "+s(this.alphaScale),l="vec4 "+e+" = vec4("+f+", "+_+");"
return[].concat(d,m,[l])}return t("Unsupported TexEnv mode: 0x"+this.mode.toString(16))},u.prototype.genCombinerLines=function(e,n,o,u,c,l,d){var m=null
switch(c){case k:m=1
break
case C:case R:case U:m=2
break
case H:m=3
break
default:return t("Unsupported combiner: 0x"+c.toString(16))}var f="vec4("+s(this.envColor[0])+", "+s(this.envColor[1])+", "+s(this.envColor[2])+", "+s(this.envColor[3])+")",_=m>=1?a(u,f,o,l[0],d[0]):null,p=m>=2?a(u,f,o,l[1],d[1]):null,E=m>=3?a(u,f,o,l[2],d[2]):null,h=e?"vec3":"float",S=null
switch(c){case k:var v=[h+" "+n," = ",_,";"]
S=[v.join("")]
break
case C:var v=[h+" "+n+" = ",_+" * "+p,";"]
S=[v.join("")]
break
case R:var v=[h+" "+n+" = ",_+" + "+p,";"]
S=[v.join("")]
break
case U:var v=[h+" "+n+" = ",_+" - "+p,";"]
S=[v.join("")]
break
case H:var g=Q+"env"+u+"_",L=g+"colorSrc2",y=i(this.colorOp[2])+" "+L+" = "+E+";",v=[h+" "+n," = ",_+" * "+L," + ",p+" * (1.0 - "+L+")",";"]
S=[y,v.join("")]
break
default:return r("Unmatched TexEnv.colorCombiner?")}return S},{init:function(e,t){var r=0
t?r=t:e&&(r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),assert(r>0),te=[]
for(var n=0;r>n;n++)te.push(new c)},setGLSLVars:function(e,t,r,n){J=e,Z=t,$=r,ee=n},genAllPassLines:function(e,t){t=t||0,ne.length=0
for(var r=[],n=$,i=0;i<te.length;i++)if(te[i].enabled()){ne.push(i)
var o=Q+"env"+i+"_",a=o+"result",s=te[i].genPassLines(a,n,i)
r=r.concat(s,[""]),n=a}r.push(e+" = "+n+";")
for(var u="",i=0;t>i;i++)u+=" "
var c=u+r.join("\n"+u)
return c},getUsedTexUnitList:function(){return ne},traverseState:function(e){for(var t=0;t<te.length;t++)te[t].traverseState(e)},getTexUnitType:function(e){return assert(e>=0&&e<te.length),te[e].getTexType()},hook_activeTexture:function(e){re=e-l},hook_enable:function(e){var t=o()
switch(e){case d:t.enabled_tex1D||(GLImmediate.currentRenderer=null,t.enabled_tex1D=!0,t.texTypesEnabled|=1)
break
case m:t.enabled_tex2D||(GLImmediate.currentRenderer=null,t.enabled_tex2D=!0,t.texTypesEnabled|=2)
break
case f:t.enabled_tex3D||(GLImmediate.currentRenderer=null,t.enabled_tex3D=!0,t.texTypesEnabled|=4)
break
case _:t.enabled_texCube||(GLImmediate.currentRenderer=null,t.enabled_texCube=!0,t.texTypesEnabled|=8)}},hook_disable:function(e){var t=o()
switch(e){case d:t.enabled_tex1D&&(GLImmediate.currentRenderer=null,t.enabled_tex1D=!1,t.texTypesEnabled&=-2)
break
case m:t.enabled_tex2D&&(GLImmediate.currentRenderer=null,t.enabled_tex2D=!1,t.texTypesEnabled&=-3)
break
case f:t.enabled_tex3D&&(GLImmediate.currentRenderer=null,t.enabled_tex3D=!1,t.texTypesEnabled&=-5)
break
case _:t.enabled_texCube&&(GLImmediate.currentRenderer=null,t.enabled_texCube=!1,t.texTypesEnabled&=-9)}},hook_texEnvf:function(e,t,r){if(e==p){var n=o().env
switch(t){case P:n.colorScale!=r&&(n.invalidateKey(),n.colorScale=r)
break
case O:n.alphaScale!=r&&(n.invalidateKey(),n.alphaScale=r)
break
default:err("WARNING: Unhandled `pname` in call to `glTexEnvf`.")}}},hook_texEnvi:function(e,t,r){if(e==p){var n=o().env
switch(t){case E:n.mode!=r&&(n.invalidateKey(),n.mode=r)
break
case D:n.colorCombiner!=r&&(n.invalidateKey(),n.colorCombiner=r)
break
case I:n.alphaCombiner!=r&&(n.invalidateKey(),n.alphaCombiner=r)
break
case S:n.colorSrc[0]!=r&&(n.invalidateKey(),n.colorSrc[0]=r)
break
case v:n.colorSrc[1]!=r&&(n.invalidateKey(),n.colorSrc[1]=r)
break
case g:n.colorSrc[2]!=r&&(n.invalidateKey(),n.colorSrc[2]=r)
break
case L:n.alphaSrc[0]!=r&&(n.invalidateKey(),n.alphaSrc[0]=r)
break
case y:n.alphaSrc[1]!=r&&(n.invalidateKey(),n.alphaSrc[1]=r)
break
case F:n.alphaSrc[2]!=r&&(n.invalidateKey(),n.alphaSrc[2]=r)
break
case b:n.colorOp[0]!=r&&(n.invalidateKey(),n.colorOp[0]=r)
break
case w:n.colorOp[1]!=r&&(n.invalidateKey(),n.colorOp[1]=r)
break
case A:n.colorOp[2]!=r&&(n.invalidateKey(),n.colorOp[2]=r)
break
case M:n.alphaOp[0]!=r&&(n.invalidateKey(),n.alphaOp[0]=r)
break
case T:n.alphaOp[1]!=r&&(n.invalidateKey(),n.alphaOp[1]=r)
break
case x:n.alphaOp[2]!=r&&(n.invalidateKey(),n.alphaOp[2]=r)
break
case P:n.colorScale!=r&&(n.invalidateKey(),n.colorScale=r)
break
case O:n.alphaScale!=r&&(n.invalidateKey(),n.alphaScale=r)
break
default:err("WARNING: Unhandled `pname` in call to `glTexEnvi`.")}}},hook_texEnvfv:function(e,t,r){if(e==p){var n=o().env
switch(t){case h:for(var i=0;4>i;i++){var a=HEAPF32[r+4*i>>2]
n.envColor[i]!=a&&(n.invalidateKey(),n.envColor[i]=a)}break
default:err("WARNING: Unhandled `pname` in call to `glTexEnvfv`.")}}},hook_getTexEnviv:function(e,t,r){if(e==p){var n=o().env
switch(t){case E:return void(HEAP32[r>>2]=n.mode)
case h:return HEAP32[r>>2]=Math.max(Math.min(255*n.envColor[0],255,-255)),HEAP32[r+1>>2]=Math.max(Math.min(255*n.envColor[1],255,-255)),HEAP32[r+2>>2]=Math.max(Math.min(255*n.envColor[2],255,-255)),void(HEAP32[r+3>>2]=Math.max(Math.min(255*n.envColor[3],255,-255)))
case D:return void(HEAP32[r>>2]=n.colorCombiner)
case I:return void(HEAP32[r>>2]=n.alphaCombiner)
case S:return void(HEAP32[r>>2]=n.colorSrc[0])
case v:return void(HEAP32[r>>2]=n.colorSrc[1])
case g:return void(HEAP32[r>>2]=n.colorSrc[2])
case L:return void(HEAP32[r>>2]=n.alphaSrc[0])
case y:return void(HEAP32[r>>2]=n.alphaSrc[1])
case F:return void(HEAP32[r>>2]=n.alphaSrc[2])
case b:return void(HEAP32[r>>2]=n.colorOp[0])
case w:return void(HEAP32[r>>2]=n.colorOp[1])
case A:return void(HEAP32[r>>2]=n.colorOp[2])
case M:return void(HEAP32[r>>2]=n.alphaOp[0])
case T:return void(HEAP32[r>>2]=n.alphaOp[1])
case x:return void(HEAP32[r>>2]=n.alphaOp[2])
case P:return void(HEAP32[r>>2]=n.colorScale)
case O:return void(HEAP32[r>>2]=n.alphaScale)
default:err("WARNING: Unhandled `pname` in call to `glGetTexEnvi`.")}}},hook_getTexEnvfv:function(e,t,r){if(e==p){var n=o().env
switch(t){case h:return HEAPF32[r>>2]=n.envColor[0],HEAPF32[r+4>>2]=n.envColor[1],HEAPF32[r+8>>2]=n.envColor[2],void(HEAPF32[r+12>>2]=n.envColor[3])}}}}},vertexData:null,vertexDataU8:null,tempData:null,indexData:null,vertexCounter:0,mode:-1,rendererCache:null,rendererComponents:[],rendererComponentPointer:0,lastRenderer:null,lastArrayBuffer:null,lastProgram:null,lastStride:-1,matrix:[],matrixStack:[],currentMatrix:0,tempMatrix:null,matricesModified:!1,useTextureMatrix:!1,VERTEX:0,NORMAL:1,COLOR:2,TEXTURE0:3,NUM_ATTRIBUTES:-1,MAX_TEXTURES:-1,totalEnabledClientAttributes:0,enabledClientAttributes:[0,0],clientAttributes:[],liveClientAttributes:[],currentRenderer:null,modifiedClientAttributes:!1,clientActiveTexture:0,clientColor:null,usedTexUnitList:[],fixedFunctionProgram:null,setClientAttribute:function(e,t,r,n,i){var o=GLImmediate.clientAttributes[e]
if(o)o.name=e,o.size=t,o.type=r,o.stride=n,o.pointer=i,o.offset=0
else for(var a=0;e>=a;a++)GLImmediate.clientAttributes[a]||(GLImmediate.clientAttributes[a]={name:e,size:t,type:r,stride:n,pointer:i,offset:0})
GLImmediate.modifiedClientAttributes=!0},addRendererComponent:function(e,t,r){GLImmediate.rendererComponents[e]?GLImmediate.rendererComponents[e]++:(GLImmediate.rendererComponents[e]=1,GLImmediate.enabledClientAttributes[e]&&console.log("Warning: glTexCoord used after EnableClientState for TEXTURE_COORD_ARRAY for TEXTURE0. Disabling TEXTURE_COORD_ARRAY..."),GLImmediate.enabledClientAttributes[e]=!0,GLImmediate.setClientAttribute(e,t,r,0,GLImmediate.rendererComponentPointer),GLImmediate.rendererComponentPointer+=t*GL.byteSizeByType[r-GL.byteSizeByTypeRoot])},disableBeginEndClientAttributes:function(){for(var e=0;e<GLImmediate.NUM_ATTRIBUTES;e++)GLImmediate.rendererComponents[e]&&(GLImmediate.enabledClientAttributes[e]=!1)},getRenderer:function(){if(GLImmediate.currentRenderer)return GLImmediate.currentRenderer
for(var e=GLImmediate.liveClientAttributes,t=GLImmediate.rendererCache,r=t.getStaticKeyView().reset(),n=0,i=0;i<e.length;i++)n|=1<<e[i].name
var o=0
if(GLEmulation.fogEnabled)switch(GLEmulation.fogMode){case 2049:o=1
break
case 9729:o=2
break
default:o=3}r.next(n<<2|o),r.next(GL.currProgram),GL.currProgram||GLImmediate.TexEnvJIT.traverseState(r)
var a=r.get()
return a?(GLImmediate.currentRenderer=a,a):(a=GLImmediate.createRenderer(),GLImmediate.currentRenderer=a,r.set(a),a)},createRenderer:function(e){for(var t=!!GL.currProgram,r=!1,n=0;n<GLImmediate.MAX_TEXTURES;n++){var i=GLImmediate.TEXTURE0+n
GLImmediate.enabledClientAttributes[i]&&(t||0==GLImmediate.TexEnvJIT.getTexUnitType(n)&&warnOnce("GL_TEXTURE"+n+" coords are supplied, but that texture unit is disabled in the fixed-function pipeline."),r=!0)}var o={init:function(){var e="u_texUnit",n="a_texCoord",i="v_texCoord",o="v_color",a=GLImmediate.useTextureMatrix?"u_textureMatrix":null
if(t)GL.shaderInfos[GL.programShaders[GL.currProgram][0]].type==GLctx.VERTEX_SHADER?(this.vertexShader=GL.shaders[GL.programShaders[GL.currProgram][0]],this.fragmentShader=GL.shaders[GL.programShaders[GL.currProgram][1]]):(this.vertexShader=GL.shaders[GL.programShaders[GL.currProgram][1]],this.fragmentShader=GL.shaders[GL.programShaders[GL.currProgram][0]]),this.program=GL.programs[GL.currProgram],this.usedTexUnitList=[]
else{if(GLEmulation.fogEnabled)switch(GLEmulation.fogMode){case 2049:var s="  float fog = exp(-u_fogDensity * u_fogDensity * ecDistance * ecDistance); \n"
break
case 9729:var s="  float fog = (u_fogEnd - ecDistance) * u_fogScale; \n"
break
default:var s="  float fog = exp(-u_fogDensity * ecDistance); \n"}GLImmediate.TexEnvJIT.setGLSLVars(e,i,o,a)
var u=GLImmediate.TexEnvJIT.genAllPassLines("gl_FragColor",2),c="",l="",d="",m=""
this.usedTexUnitList=GLImmediate.TexEnvJIT.getUsedTexUnitList()
for(var f=0;f<this.usedTexUnitList.length;f++){var _=this.usedTexUnitList[f]
c+="attribute vec4 "+n+_+";\n",l+="varying vec4 "+i+_+";\n",d+="uniform sampler2D "+e+_+";\n",m+="  "+i+_+" = "+n+_+";\n",GLImmediate.useTextureMatrix&&(d+="uniform mat4 "+a+_+";\n")}var p=null
GLEmulation.fogEnabled&&(p="  v_fogFragCoord = abs(ecPosition.z);\n")
var E=["attribute vec4 a_position;\nattribute vec4 a_color;\nvarying vec4 v_color;",c,l,GLEmulation.fogEnabled?"varying float v_fogFragCoord;":null,"uniform mat4 u_modelView;\nuniform mat4 u_projection;\nvoid main()\n{\n  vec4 ecPosition = u_modelView * a_position;\n  gl_Position = u_projection * ecPosition;\n  v_color = a_color;",m,p,"}\n"].join("\n").replace(/\n\n+/g,"\n")
this.vertexShader=GLctx.createShader(GLctx.VERTEX_SHADER),GLctx.shaderSource(this.vertexShader,E),GLctx.compileShader(this.vertexShader)
var h=null
GLEmulation.fogEnabled&&(h=["\nvarying float v_fogFragCoord; \nuniform vec4 u_fogColor;      \nuniform float u_fogEnd;       \nuniform float u_fogScale;     \nuniform float u_fogDensity;   \nfloat ffog(in float ecDistance) { ",s,"  fog = clamp(fog, 0.0, 1.0); \n  return fog;                 \n}\n"].join("\n"))
var S=null
GLEmulation.fogEnabled&&(S="gl_FragColor = vec4(mix(u_fogColor.rgb, gl_FragColor.rgb, ffog(v_fogFragCoord)), gl_FragColor.a);\n")
var v=["precision mediump float;",l,d,"varying vec4 v_color;",h,"void main()\n{",u,S,"}\n"].join("\n").replace(/\n\n+/g,"\n")
this.fragmentShader=GLctx.createShader(GLctx.FRAGMENT_SHADER),GLctx.shaderSource(this.fragmentShader,v),GLctx.compileShader(this.fragmentShader),this.program=GLctx.createProgram(),GLctx.attachShader(this.program,this.vertexShader),GLctx.attachShader(this.program,this.fragmentShader),GLctx.bindAttribLocation(this.program,GLImmediate.VERTEX,"a_position"),GLctx.bindAttribLocation(this.program,GLImmediate.COLOR,"a_color"),GLctx.bindAttribLocation(this.program,GLImmediate.NORMAL,"a_normal")
for(var g=GLctx.getParameter(GLctx.MAX_VERTEX_ATTRIBS),f=0;f<GLImmediate.MAX_TEXTURES&&GLImmediate.TEXTURE0+f<g;f++)GLctx.bindAttribLocation(this.program,GLImmediate.TEXTURE0+f,"a_texCoord"+f),GLctx.bindAttribLocation(this.program,GLImmediate.TEXTURE0+f,n+f)
GLctx.linkProgram(this.program)}this.textureMatrixVersion=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.positionLocation=GLctx.getAttribLocation(this.program,"a_position"),this.texCoordLocations=[]
for(var f=0;f<GLImmediate.MAX_TEXTURES;f++)GLImmediate.enabledClientAttributes[GLImmediate.TEXTURE0+f]?t?this.texCoordLocations[f]=GLctx.getAttribLocation(this.program,"a_texCoord"+f):this.texCoordLocations[f]=GLctx.getAttribLocation(this.program,n+f):this.texCoordLocations[f]=-1
if(this.colorLocation=GLctx.getAttribLocation(this.program,"a_color"),!t){var L=GLctx.getParameter(GLctx.CURRENT_PROGRAM)
GLctx.useProgram(this.program)
for(var f=0;f<this.usedTexUnitList.length;f++){var y=this.usedTexUnitList[f],F=GLctx.getUniformLocation(this.program,e+y)
GLctx.uniform1i(F,y)}GLctx.vertexAttrib4fv(this.colorLocation,[1,1,1,1]),GLctx.useProgram(L)}this.textureMatrixLocations=[]
for(var f=0;f<GLImmediate.MAX_TEXTURES;f++)this.textureMatrixLocations[f]=GLctx.getUniformLocation(this.program,"u_textureMatrix"+f)
this.normalLocation=GLctx.getAttribLocation(this.program,"a_normal"),this.modelViewLocation=GLctx.getUniformLocation(this.program,"u_modelView"),this.projectionLocation=GLctx.getUniformLocation(this.program,"u_projection"),this.hasTextures=r,this.hasNormal=GLImmediate.enabledClientAttributes[GLImmediate.NORMAL]&&GLImmediate.clientAttributes[GLImmediate.NORMAL].size>0&&this.normalLocation>=0,this.hasColor=0===this.colorLocation||this.colorLocation>0,this.floatType=GLctx.FLOAT,this.fogColorLocation=GLctx.getUniformLocation(this.program,"u_fogColor"),this.fogEndLocation=GLctx.getUniformLocation(this.program,"u_fogEnd"),this.fogScaleLocation=GLctx.getUniformLocation(this.program,"u_fogScale"),this.fogDensityLocation=GLctx.getUniformLocation(this.program,"u_fogDensity"),this.hasFog=!!(this.fogColorLocation||this.fogEndLocation||this.fogScaleLocation||this.fogDensityLocation)},prepare:function(){var e
if(GL.currArrayBuffer)e=GL.currArrayBuffer
else{var t=GLImmediate.firstVertex*GLImmediate.stride,r=GLImmediate.lastVertex*GLImmediate.stride
assert(r<=GL.MAX_TEMP_BUFFER_SIZE,"too much vertex data"),e=GL.getTempVertexBuffer(r)}GL.currArrayBuffer||(e!=GLImmediate.lastArrayBuffer&&(GLctx.bindBuffer(GLctx.ARRAY_BUFFER,e),GLImmediate.lastArrayBuffer=e),GLctx.bufferSubData(GLctx.ARRAY_BUFFER,t,GLImmediate.vertexData.subarray(t>>2,r>>2))),GL.currProgram||GLImmediate.fixedFunctionProgram!=this.program&&(GLctx.useProgram(this.program),GLImmediate.fixedFunctionProgram=this.program),this.modelViewLocation&&this.modelViewMatrixVersion!=GLImmediate.matrixVersion[0]&&(this.modelViewMatrixVersion=GLImmediate.matrixVersion[0],GLctx.uniformMatrix4fv(this.modelViewLocation,!1,GLImmediate.matrix[0])),this.projectionLocation&&this.projectionMatrixVersion!=GLImmediate.matrixVersion[1]&&(this.projectionMatrixVersion=GLImmediate.matrixVersion[1],GLctx.uniformMatrix4fv(this.projectionLocation,!1,GLImmediate.matrix[1]))
var n=GLImmediate.clientAttributes,i=n[GLImmediate.VERTEX]
if(GLctx.vertexAttribPointer(this.positionLocation,i.size,i.type,!1,GLImmediate.stride,i.offset),GLctx.enableVertexAttribArray(this.positionLocation),this.hasNormal){var o=n[GLImmediate.NORMAL]
GLctx.vertexAttribPointer(this.normalLocation,o.size,o.type,!0,GLImmediate.stride,o.offset),GLctx.enableVertexAttribArray(this.normalLocation)}if(this.hasTextures)for(var a=0;a<GLImmediate.MAX_TEXTURES;a++){var s=this.texCoordLocations[a]
if(!(void 0===s||0>s)){var u=n[GLImmediate.TEXTURE0+a]
u.size?(GLctx.vertexAttribPointer(s,u.size,u.type,!1,GLImmediate.stride,u.offset),GLctx.enableVertexAttribArray(s)):(GLctx.vertexAttrib4f(s,0,0,0,1),GLctx.disableVertexAttribArray(s))
var c=2+a
this.textureMatrixLocations[a]&&this.textureMatrixVersion[c]!=GLImmediate.matrixVersion[c]&&(this.textureMatrixVersion[c]=GLImmediate.matrixVersion[c],GLctx.uniformMatrix4fv(this.textureMatrixLocations[a],!1,GLImmediate.matrix[c]))}}if(GLImmediate.enabledClientAttributes[GLImmediate.COLOR]){var l=n[GLImmediate.COLOR]
GLctx.vertexAttribPointer(this.colorLocation,l.size,l.type,!0,GLImmediate.stride,l.offset),GLctx.enableVertexAttribArray(this.colorLocation)}else this.hasColor&&(GLctx.disableVertexAttribArray(this.colorLocation),GLctx.vertexAttrib4fv(this.colorLocation,GLImmediate.clientColor))
this.hasFog&&(this.fogColorLocation&&GLctx.uniform4fv(this.fogColorLocation,GLEmulation.fogColor),this.fogEndLocation&&GLctx.uniform1f(this.fogEndLocation,GLEmulation.fogEnd),this.fogScaleLocation&&GLctx.uniform1f(this.fogScaleLocation,1/(GLEmulation.fogEnd-GLEmulation.fogStart)),this.fogDensityLocation&&GLctx.uniform1f(this.fogDensityLocation,GLEmulation.fogDensity))},cleanup:function(){if(GLctx.disableVertexAttribArray(this.positionLocation),this.hasTextures)for(var e=0;e<GLImmediate.MAX_TEXTURES;e++)GLImmediate.enabledClientAttributes[GLImmediate.TEXTURE0+e]&&this.texCoordLocations[e]>=0&&GLctx.disableVertexAttribArray(this.texCoordLocations[e])
this.hasColor&&GLctx.disableVertexAttribArray(this.colorLocation),this.hasNormal&&GLctx.disableVertexAttribArray(this.normalLocation),GL.currProgram||(GLctx.useProgram(null),GLImmediate.fixedFunctionProgram=0),GL.currArrayBuffer||(GLctx.bindBuffer(GLctx.ARRAY_BUFFER,null),GLImmediate.lastArrayBuffer=null),GLImmediate.matricesModified=!0}}
return o.init(),o},setupFuncs:function(){GLImmediate.MapTreeLib=GLImmediate.spawnMapTreeLib(),GLImmediate.spawnMapTreeLib=null,GLImmediate.TexEnvJIT=GLImmediate.spawnTexEnvJIT(),GLImmediate.spawnTexEnvJIT=null,GLImmediate.setupHooks()},setupHooks:function(){GLEmulation.hasRunInit||GLEmulation.init()
var e=_glActiveTexture
_glActiveTexture=_emscripten_glActiveTexture=function(t){GLImmediate.TexEnvJIT.hook_activeTexture(t),e(t)}
var t=_glEnable
_glEnable=_emscripten_glEnable=function(e){GLImmediate.TexEnvJIT.hook_enable(e),t(e)}
var r=_glDisable
_glDisable=_emscripten_glDisable=function(e){GLImmediate.TexEnvJIT.hook_disable(e),r(e)},"undefined"!=typeof _glTexEnvf?_glTexEnvf:function(){},_glTexEnvf=_emscripten_glTexEnvf=function(e,t,r){GLImmediate.TexEnvJIT.hook_texEnvf(e,t,r)},"undefined"!=typeof _glTexEnvi?_glTexEnvi:function(){},_glTexEnvi=_emscripten_glTexEnvi=function(e,t,r){GLImmediate.TexEnvJIT.hook_texEnvi(e,t,r)},"undefined"!=typeof _glTexEnvfv?_glTexEnvfv:function(){},_glTexEnvfv=_emscripten_glTexEnvfv=function(e,t,r){GLImmediate.TexEnvJIT.hook_texEnvfv(e,t,r)},_glGetTexEnviv=function(e,t,r){GLImmediate.TexEnvJIT.hook_getTexEnviv(e,t,r)},_glGetTexEnvfv=function(e,t,r){GLImmediate.TexEnvJIT.hook_getTexEnvfv(e,t,r)}
var n=_glGetIntegerv
_glGetIntegerv=_emscripten_glGetIntegerv=function(e,t){switch(e){case 35725:var r=GLctx.getParameter(GLctx.CURRENT_PROGRAM)
if(r==GLImmediate.fixedFunctionProgram)return void(HEAP32[t>>2]=0)}n(e,t)}},initted:!1,init:function(){if(err("WARNING: using emscripten GL immediate mode emulation. This is very limited in what it supports"),GLImmediate.initted=!0,Module.useWebGL){GLImmediate.MAX_TEXTURES=Module.GL_MAX_TEXTURE_IMAGE_UNITS||GLctx.getParameter(GLctx.MAX_TEXTURE_IMAGE_UNITS),GLImmediate.TexEnvJIT.init(GLctx,GLImmediate.MAX_TEXTURES),GLImmediate.NUM_ATTRIBUTES=3+GLImmediate.MAX_TEXTURES,GLImmediate.clientAttributes=[],GLEmulation.enabledClientAttribIndices=[]
for(var e=0;e<GLImmediate.NUM_ATTRIBUTES;e++)GLImmediate.clientAttributes.push({}),GLEmulation.enabledClientAttribIndices.push(!1)
GLImmediate.matrix=[],GLImmediate.matrixStack=[],GLImmediate.matrixVersion=[]
for(var e=0;e<2+GLImmediate.MAX_TEXTURES;e++)GLImmediate.matrixStack.push([]),GLImmediate.matrixVersion.push(0),GLImmediate.matrix.push(GLImmediate.matrixLib.mat4.create()),GLImmediate.matrixLib.mat4.identity(GLImmediate.matrix[e])
GLImmediate.rendererCache=GLImmediate.MapTreeLib.create(),GLImmediate.tempData=new Float32Array(GL.MAX_TEMP_BUFFER_SIZE>>2),GLImmediate.indexData=new Uint16Array(GL.MAX_TEMP_BUFFER_SIZE>>1),GLImmediate.vertexDataU8=new Uint8Array(GLImmediate.tempData.buffer),GL.generateTempBuffers(!0,GL.currentContext),GLImmediate.clientColor=new Float32Array([1,1,1,1])}},prepareClientAttributes:function(e,t){if(!GLImmediate.modifiedClientAttributes)return void(GLImmediate.vertexCounter=GLImmediate.stride*e/4)
GLImmediate.modifiedClientAttributes=!1
var r=2147483647,n=0,i=2147483647,o=0,a=GLImmediate.liveClientAttributes
a.length=0
for(var s=0;s<3+GLImmediate.MAX_TEXTURES;s++)if(GLImmediate.enabledClientAttributes[s]){var u=GLImmediate.clientAttributes[s]
a.push(u),r=Math.min(r,u.pointer),u.sizeBytes=u.size*GL.byteSizeByType[u.type-GL.byteSizeByTypeRoot],n+=u.sizeBytes,i=Math.min(i,u.stride),o=Math.max(o,u.stride)}if((i!=o||n>o)&&!t){GLImmediate.restrideBuffer||(GLImmediate.restrideBuffer=_malloc(GL.MAX_TEMP_BUFFER_SIZE))
var c=GLImmediate.restrideBuffer
n=0
for(var s=0;s<a.length;s++){var u=a[s],l=u.sizeBytes
l%4!=0&&(l+=4-l%4),u.offset=n,n+=l}for(var s=0;s<a.length;s++){var u=a[s],d=Math.max(u.sizeBytes,u.stride)
if(0==(3&d)&&0==(3&u.sizeBytes))for(var m=u.sizeBytes>>2,f=Math.max(u.sizeBytes,u.stride)>>2,_=0;e>_;_++)for(var p=0;m>p;p++)HEAP32[(c+u.offset+n*_>>2)+p]=HEAP32[(u.pointer>>2)+_*f+p]
else for(var _=0;e>_;_++)for(var p=0;p<u.sizeBytes;p++)HEAP8[c+u.offset+n*_+p]=HEAP8[u.pointer+_*d+p]
u.pointer=c+u.offset}GLImmediate.stride=n,GLImmediate.vertexPointer=c}else{GL.currArrayBuffer?GLImmediate.vertexPointer=0:GLImmediate.vertexPointer=r
for(var s=0;s<a.length;s++){var u=a[s]
u.offset=u.pointer-GLImmediate.vertexPointer}GLImmediate.stride=Math.max(o,n)}t||(GLImmediate.vertexCounter=GLImmediate.stride*e/4)},flush:function(e,t,r){assert(e>=0||!e),t=t||0,r=r||0
var n=GLImmediate.getRenderer(),i=4*GLImmediate.vertexCounter/GLImmediate.stride
if(i){assert(i%1==0,"`numVertexes` must be an integer.")
var o=!1,a=0
if(e){if(a=e,!GL.currArrayBuffer&&GLImmediate.firstVertex>GLImmediate.lastVertex){assert(!GL.currElementArrayBuffer)
for(var s=0;e>s;s++){var u=HEAPU16[r+2*s>>1]
GLImmediate.firstVertex=Math.min(GLImmediate.firstVertex,u),GLImmediate.lastVertex=Math.max(GLImmediate.lastVertex,u+1)}}if(!GL.currElementArrayBuffer){assert(e<<1<=GL.MAX_TEMP_BUFFER_SIZE,"too many immediate mode indexes (a)")
var c=GL.getTempIndexBuffer(e<<1)
GLctx.bindBuffer(GLctx.ELEMENT_ARRAY_BUFFER,c),GLctx.bufferSubData(GLctx.ELEMENT_ARRAY_BUFFER,0,HEAPU16.subarray(r>>1,r+(e<<1)>>1)),r=0,o=!0}}else if(GLImmediate.mode>6){if(7!=GLImmediate.mode)throw"unsupported immediate mode "+GLImmediate.mode
assert(GLImmediate.firstVertex%4==0),r=3*GLImmediate.firstVertex
var l=i/4
a=6*l,assert(r+(a<<1)<=GL.MAX_TEMP_BUFFER_SIZE,"too many immediate mode indexes (b)"),GLctx.bindBuffer(GLctx.ELEMENT_ARRAY_BUFFER,GL.currentContext.tempQuadIndexBuffer),o=!0}n.prepare(),a?GLctx.drawElements(GLctx.TRIANGLES,a,GLctx.UNSIGNED_SHORT,r):GLctx.drawArrays(GLImmediate.mode,t,i),o&&GLctx.bindBuffer(GLctx.ELEMENT_ARRAY_BUFFER,GL.buffers[GL.currElementArrayBuffer]||null),n.cleanup()}}}
GLImmediate.matrixLib=function(){var e={},t={},r={},n={},i=Float32Array
return e.create=function(e){var t=new i(3)
return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):t[0]=t[1]=t[2]=0,t},e.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.add=function(e,t,r){return r&&e!==r?(r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r):(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e)},e.subtract=function(e,t,r){return r&&e!==r?(r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r):(e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e)},e.multiply=function(e,t,r){return r&&e!==r?(r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r):(e[0]*=t[0],e[1]*=t[1],e[2]*=t[2],e)},e.negate=function(e,t){return t||(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.scale=function(e,t,r){return r&&e!==r?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r):(e[0]*=t,e[1]*=t,e[2]*=t,e)},e.normalize=function(e,t){t||(t=e)
var r=e[0],n=e[1],i=e[2],o=Math.sqrt(r*r+n*n+i*i)
return o?1===o?(t[0]=r,t[1]=n,t[2]=i,t):(o=1/o,t[0]=r*o,t[1]=n*o,t[2]=i*o,t):(t[0]=0,t[1]=0,t[2]=0,t)},e.cross=function(e,t,r){r||(r=e)
var n=e[0],i=e[1],o=e[2],a=t[0],s=t[1],u=t[2]
return r[0]=i*u-o*s,r[1]=o*a-n*u,r[2]=n*s-i*a,r},e.length=function(e){var t=e[0],r=e[1],n=e[2]
return Math.sqrt(t*t+r*r+n*n)},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.direction=function(e,t,r){r||(r=e)
var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],a=Math.sqrt(n*n+i*i+o*o)
return a?(a=1/a,r[0]=n*a,r[1]=i*a,r[2]=o*a,r):(r[0]=0,r[1]=0,r[2]=0,r)},e.lerp=function(e,t,r,n){return n||(n=e),n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n[2]=e[2]+r*(t[2]-e[2]),n},e.dist=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2]
return Math.sqrt(r*r+n*n+i*i)},e.unproject=function(e,t,n,o,a){a||(a=e)
var s=r.create(),u=new i(4)
return u[0]=2*(e[0]-o[0])/o[2]-1,u[1]=2*(e[1]-o[1])/o[3]-1,u[2]=2*e[2]-1,u[3]=1,r.multiply(n,t,s),r.inverse(s)?(r.multiplyVec4(s,u),0===u[3]?null:(a[0]=u[0]/u[3],a[1]=u[1]/u[3],a[2]=u[2]/u[3],a)):null},e.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+"]"},t.create=function(e){var t=new i(9)
return e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]),t},t.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.identity=function(e){return e||(e=t.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){if(!t||e===t){var r=e[1],n=e[2],i=e[5]
return e[1]=e[3],e[2]=e[6],e[3]=r,e[5]=e[7],e[6]=n,e[7]=i,e}return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t},t.toMat4=function(e,t){return t||(t=r.create()),t[15]=1,t[14]=0,t[13]=0,t[12]=0,t[11]=0,t[10]=e[8],t[9]=e[7],t[8]=e[6],t[7]=0,t[6]=e[5],t[5]=e[4],t[4]=e[3],t[3]=0,t[2]=e[2],t[1]=e[1],t[0]=e[0],t},t.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+"]"},r.create=function(e){var t=new i(16)
return e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t},r.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.identity=function(e){return e||(e=r.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.transpose=function(e,t){if(!t||e===t){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11]
return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=r,e[6]=e[9],e[7]=e[13],e[8]=n,e[9]=o,e[11]=e[14],e[12]=i,e[13]=a,e[14]=s,e}return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},r.determinant=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],d=e[10],m=e[11],f=e[12],_=e[13],p=e[14],E=e[15]
return f*l*s*i-c*_*s*i-f*a*d*i+o*_*d*i+c*a*p*i-o*l*p*i-f*l*n*u+c*_*n*u+f*r*d*u-t*_*d*u-c*r*p*u+t*l*p*u+f*a*n*m-o*_*n*m-f*r*s*m+t*_*s*m+o*r*p*m-t*a*p*m-c*a*n*E+o*l*n*E+c*r*s*E-t*l*s*E-o*r*d*E+t*a*d*E},r.inverse=function(e,t){t||(t=e)
var r,n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],m=e[9],f=e[10],_=e[11],p=e[12],E=e[13],h=e[14],S=e[15],v=n*u-i*s,g=n*c-o*s,L=n*l-a*s,y=i*c-o*u,F=i*l-a*u,b=o*l-a*c,w=d*E-m*p,A=d*h-f*p,M=d*S-_*p,T=m*h-f*E,x=m*S-_*E,D=f*S-_*h,I=v*D-g*x+L*T+y*M-F*A+b*w
return I?(r=1/I,t[0]=(u*D-c*x+l*T)*r,t[1]=(-i*D+o*x-a*T)*r,t[2]=(E*b-h*F+S*y)*r,t[3]=(-m*b+f*F-_*y)*r,t[4]=(-s*D+c*M-l*A)*r,t[5]=(n*D-o*M+a*A)*r,t[6]=(-p*b+h*L-S*g)*r,t[7]=(d*b-f*L+_*g)*r,t[8]=(s*x-u*M+l*w)*r,t[9]=(-n*x+i*M-a*w)*r,t[10]=(p*F-E*L+S*v)*r,t[11]=(-d*F+m*L-_*v)*r,t[12]=(-s*T+u*A-c*w)*r,t[13]=(n*T-i*A+o*w)*r,t[14]=(-p*y+E*g-h*v)*r,t[15]=(d*y-m*g+f*v)*r,t):null},r.toRotationMat=function(e,t){return t||(t=r.create()),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.toMat3=function(e,r){return r||(r=t.create()),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r},r.toInverseMat3=function(e,r){var n,i=e[0],o=e[1],a=e[2],s=e[4],u=e[5],c=e[6],l=e[8],d=e[9],m=e[10],f=m*u-c*d,_=-m*s+c*l,p=d*s-u*l,E=i*f+o*_+a*p
return E?(n=1/E,r||(r=t.create()),r[0]=f*n,r[1]=(-m*o+a*d)*n,r[2]=(c*o-a*u)*n,r[3]=_*n,r[4]=(m*i-a*l)*n,r[5]=(-c*i+a*s)*n,r[6]=p*n,r[7]=(-d*i+o*l)*n,r[8]=(u*i-o*s)*n,r):null},r.multiply=function(e,t,r){r||(r=e)
var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],m=e[9],f=e[10],_=e[11],p=e[12],E=e[13],h=e[14],S=e[15],v=t[0],g=t[1],L=t[2],y=t[3],F=t[4],b=t[5],w=t[6],A=t[7],M=t[8],T=t[9],x=t[10],D=t[11],I=t[12],P=t[13],O=t[14],R=t[15]
return r[0]=v*n+g*s+L*d+y*p,r[1]=v*i+g*u+L*m+y*E,r[2]=v*o+g*c+L*f+y*h,r[3]=v*a+g*l+L*_+y*S,r[4]=F*n+b*s+w*d+A*p,r[5]=F*i+b*u+w*m+A*E,r[6]=F*o+b*c+w*f+A*h,r[7]=F*a+b*l+w*_+A*S,r[8]=M*n+T*s+x*d+D*p,r[9]=M*i+T*u+x*m+D*E,r[10]=M*o+T*c+x*f+D*h,r[11]=M*a+T*l+x*_+D*S,r[12]=I*n+P*s+O*d+R*p,r[13]=I*i+P*u+O*m+R*E,r[14]=I*o+P*c+O*f+R*h,r[15]=I*a+P*l+O*_+R*S,r},r.multiplyVec3=function(e,t,r){r||(r=t)
var n=t[0],i=t[1],o=t[2]
return r[0]=e[0]*n+e[4]*i+e[8]*o+e[12],r[1]=e[1]*n+e[5]*i+e[9]*o+e[13],r[2]=e[2]*n+e[6]*i+e[10]*o+e[14],r},r.multiplyVec4=function(e,t,r){r||(r=t)
var n=t[0],i=t[1],o=t[2],a=t[3]
return r[0]=e[0]*n+e[4]*i+e[8]*o+e[12]*a,r[1]=e[1]*n+e[5]*i+e[9]*o+e[13]*a,r[2]=e[2]*n+e[6]*i+e[10]*o+e[14]*a,r[3]=e[3]*n+e[7]*i+e[11]*o+e[15]*a,r},r.translate=function(e,t,r){var n,i,o,a,s,u,c,l,d,m,f,_,p=t[0],E=t[1],h=t[2]
return r&&e!==r?(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],m=e[9],f=e[10],_=e[11],r[0]=n,r[1]=i,r[2]=o,r[3]=a,r[4]=s,r[5]=u,r[6]=c,r[7]=l,r[8]=d,r[9]=m,r[10]=f,r[11]=_,r[12]=n*p+s*E+d*h+e[12],r[13]=i*p+u*E+m*h+e[13],r[14]=o*p+c*E+f*h+e[14],r[15]=a*p+l*E+_*h+e[15],r):(e[12]=e[0]*p+e[4]*E+e[8]*h+e[12],e[13]=e[1]*p+e[5]*E+e[9]*h+e[13],e[14]=e[2]*p+e[6]*E+e[10]*h+e[14],e[15]=e[3]*p+e[7]*E+e[11]*h+e[15],e)},r.scale=function(e,t,r){var n=t[0],i=t[1],o=t[2]
return r&&e!==r?(r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*o,r[9]=e[9]*o,r[10]=e[10]*o,r[11]=e[11]*o,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r):(e[0]*=n,e[1]*=n,e[2]*=n,e[3]*=n,e[4]*=i,e[5]*=i,e[6]*=i,e[7]*=i,e[8]*=o,e[9]*=o,e[10]*=o,e[11]*=o,e)},r.rotate=function(e,t,r,n){var i,o,a,s,u,c,l,d,m,f,_,p,E,h,S,v,g,L,y,F,b,w,A,M,T=r[0],x=r[1],D=r[2],I=Math.sqrt(T*T+x*x+D*D)
return I?(1!==I&&(I=1/I,T*=I,x*=I,D*=I),i=Math.sin(t),o=Math.cos(t),a=1-o,s=e[0],u=e[1],c=e[2],l=e[3],d=e[4],m=e[5],f=e[6],_=e[7],p=e[8],E=e[9],h=e[10],S=e[11],v=T*T*a+o,g=x*T*a+D*i,L=D*T*a-x*i,y=T*x*a-D*i,F=x*x*a+o,b=D*x*a+T*i,w=T*D*a+x*i,A=x*D*a-T*i,M=D*D*a+o,n?e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]):n=e,n[0]=s*v+d*g+p*L,n[1]=u*v+m*g+E*L,n[2]=c*v+f*g+h*L,n[3]=l*v+_*g+S*L,n[4]=s*y+d*F+p*b,n[5]=u*y+m*F+E*b,n[6]=c*y+f*F+h*b,n[7]=l*y+_*F+S*b,n[8]=s*w+d*A+p*M,n[9]=u*w+m*A+E*M,n[10]=c*w+f*A+h*M,n[11]=l*w+_*A+S*M,n):null},r.rotateX=function(e,t,r){var n=Math.sin(t),i=Math.cos(t),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],d=e[10],m=e[11]
return r?e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]):r=e,r[4]=o*i+c*n,r[5]=a*i+l*n,r[6]=s*i+d*n,r[7]=u*i+m*n,r[8]=o*-n+c*i,r[9]=a*-n+l*i,r[10]=s*-n+d*i,r[11]=u*-n+m*i,r},r.rotateY=function(e,t,r){var n=Math.sin(t),i=Math.cos(t),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],d=e[10],m=e[11]
return r?e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]):r=e,r[0]=o*i+c*-n,r[1]=a*i+l*-n,r[2]=s*i+d*-n,r[3]=u*i+m*-n,r[8]=o*n+c*i,r[9]=a*n+l*i,r[10]=s*n+d*i,r[11]=u*n+m*i,r},r.rotateZ=function(e,t,r){var n=Math.sin(t),i=Math.cos(t),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],d=e[6],m=e[7]
return r?e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]):r=e,r[0]=o*i+c*n,r[1]=a*i+l*n,r[2]=s*i+d*n,r[3]=u*i+m*n,r[4]=o*-n+c*i,r[5]=a*-n+l*i,r[6]=s*-n+d*i,r[7]=u*-n+m*i,r},r.frustum=function(e,t,n,i,o,a,s){s||(s=r.create())
var u=t-e,c=i-n,l=a-o
return s[0]=2*o/u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*o/c,s[6]=0,s[7]=0,s[8]=(t+e)/u,s[9]=(i+n)/c,s[10]=-(a+o)/l,s[11]=-1,s[12]=0,s[13]=0,s[14]=-(a*o*2)/l,s[15]=0,s},r.perspective=function(e,t,n,i,o){var a=n*Math.tan(e*Math.PI/360),s=a*t
return r.frustum(-s,s,-a,a,n,i,o)},r.ortho=function(e,t,n,i,o,a,s){s||(s=r.create())
var u=t-e,c=i-n,l=a-o
return s[0]=2/u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/c,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-2/l,s[11]=0,s[12]=-(e+t)/u,s[13]=-(i+n)/c,s[14]=-(a+o)/l,s[15]=1,s},r.lookAt=function(e,t,n,i){i||(i=r.create())
var o,a,s,u,c,l,d,m,f,_,p=e[0],E=e[1],h=e[2],S=n[0],v=n[1],g=n[2],L=t[0],y=t[1],F=t[2]
return p===L&&E===y&&h===F?r.identity(i):(d=p-L,m=E-y,f=h-F,_=1/Math.sqrt(d*d+m*m+f*f),d*=_,m*=_,f*=_,o=v*f-g*m,a=g*d-S*f,s=S*m-v*d,_=Math.sqrt(o*o+a*a+s*s),_?(_=1/_,o*=_,a*=_,s*=_):(o=0,a=0,s=0),u=m*s-f*a,c=f*o-d*s,l=d*a-m*o,_=Math.sqrt(u*u+c*c+l*l),_?(_=1/_,u*=_,c*=_,l*=_):(u=0,c=0,l=0),i[0]=o,i[1]=u,i[2]=d,i[3]=0,i[4]=a,i[5]=c,i[6]=m,i[7]=0,i[8]=s,i[9]=l,i[10]=f,i[11]=0,i[12]=-(o*p+a*E+s*h),i[13]=-(u*p+c*E+l*h),i[14]=-(d*p+m*E+f*h),i[15]=1,i)},r.fromRotationTranslation=function(e,t,n){n||(n=r.create())
var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,d=i*u,m=i*c,f=i*l,_=o*c,p=o*l,E=a*l,h=s*u,S=s*c,v=s*l
return n[0]=1-(_+E),n[1]=m+v,n[2]=f-S,n[3]=0,n[4]=m-v,n[5]=1-(d+E),n[6]=p+h,n[7]=0,n[8]=f+S,n[9]=p-h,n[10]=1-(d+_),n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},r.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+"]"},n.create=function(e){var t=new i(4)
return e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t},n.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.calculateW=function(e,t){var r=e[0],n=e[1],i=e[2]
return t&&e!==t?(t[0]=r,t[1]=n,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t):(e[3]=-Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e)},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},n.inverse=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0
return t&&e!==t?(t[0]=-e[0]*s,t[1]=-e[1]*s,t[2]=-e[2]*s,t[3]=e[3]*s,t):(e[0]*=-s,e[1]*=-s,e[2]*=-s,e[3]*=s,e)},n.conjugate=function(e,t){return t&&e!==t?(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t):(e[0]*=-1,e[1]*=-1,e[2]*=-1,e)},n.length=function(e){var t=e[0],r=e[1],n=e[2],i=e[3]
return Math.sqrt(t*t+r*r+n*n+i*i)},n.normalize=function(e,t){t||(t=e)
var r=e[0],n=e[1],i=e[2],o=e[3],a=Math.sqrt(r*r+n*n+i*i+o*o)
return 0===a?(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t):(a=1/a,t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a,t)},n.add=function(e,t,r){return r&&e!==r?(r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r):(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e)},n.multiply=function(e,t,r){r||(r=e)
var n=e[0],i=e[1],o=e[2],a=e[3],s=t[0],u=t[1],c=t[2],l=t[3]
return r[0]=n*l+a*s+i*c-o*u,r[1]=i*l+a*u+o*s-n*c,r[2]=o*l+a*c+n*u-i*s,r[3]=a*l-n*s-i*u-o*c,r},n.multiplyVec3=function(e,t,r){r||(r=t)
var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2],c=e[3],l=c*n+s*o-u*i,d=c*i+u*n-a*o,m=c*o+a*i-s*n,f=-a*n-s*i-u*o
return r[0]=l*c+f*-a+d*-u-m*-s,r[1]=d*c+f*-s+m*-a-l*-u,r[2]=m*c+f*-u+l*-s-d*-a,r},n.scale=function(e,t,r){return r&&e!==r?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r):(e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e)},n.toMat3=function(e,r){r||(r=t.create())
var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,c=o+o,l=n*s,d=n*u,m=n*c,f=i*u,_=i*c,p=o*c,E=a*s,h=a*u,S=a*c
return r[0]=1-(f+p),r[1]=d+S,r[2]=m-h,r[3]=d-S,r[4]=1-(l+p),r[5]=_+E,r[6]=m+h,r[7]=_-E,r[8]=1-(l+f),r},n.toMat4=function(e,t){t||(t=r.create())
var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,c=o+o,l=n*s,d=n*u,m=n*c,f=i*u,_=i*c,p=o*c,E=a*s,h=a*u,S=a*c
return t[0]=1-(f+p),t[1]=d+S,t[2]=m-h,t[3]=0,t[4]=d-S,t[5]=1-(l+p),t[6]=_+E,t[7]=0,t[8]=m+h,t[9]=_-E,t[10]=1-(l+f),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.slerp=function(e,t,r,n){n||(n=e)
var i,o,a,s,u=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]
return Math.abs(u)>=1?(n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]),n):(i=Math.acos(u),o=Math.sqrt(1-u*u),Math.abs(o)<.001?(n[0]=.5*e[0]+.5*t[0],n[1]=.5*e[1]+.5*t[1],n[2]=.5*e[2]+.5*t[2],n[3]=.5*e[3]+.5*t[3],n):(a=Math.sin((1-r)*i)/o,s=Math.sin(r*i)/o,n[0]=e[0]*a+t[0]*s,n[1]=e[1]*a+t[1]*s,n[2]=e[2]*a+t[2]*s,n[3]=e[3]*a+t[3]*s,n))},n.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"},{vec3:e,mat3:t,mat4:r,quat4:n}}()
var _llvm_cos_f64=Math_cos,_llvm_sin_f64=Math_sin,_llvm_trunc_f64=Math_trunc,___tm_current=5310688,___tm_timezone=(stringToUTF8("GMT",5310736,4),5310736),_sqrt=Math_sqrt,__MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31],__MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31]
if(FS.staticInit(),ENVIRONMENT_HAS_NODE){var fs=require("fs"),NODEJS_PATH=require("path")
NODEFS.staticInit()}Module.requestFullScreen=function(e,t,r){err("Module.requestFullScreen is deprecated. Please call Module.requestFullscreen instead."),Module.requestFullScreen=Module.requestFullscreen,Browser.requestFullScreen(e,t,r)},Module.requestFullscreen=function(e,t,r){Browser.requestFullscreen(e,t,r)},Module.requestAnimationFrame=function(e){Browser.requestAnimationFrame(e)},Module.setCanvasSize=function(e,t,r){Browser.setCanvasSize(e,t,r)},Module.pauseMainLoop=function(){Browser.mainLoop.pause()},Module.resumeMainLoop=function(){Browser.mainLoop.resume()},Module.getUserMedia=function(){Browser.getUserMedia()},Module.createContext=function(e,t,r,n){return Browser.createContext(e,t,r,n)},_emscripten_get_now=ENVIRONMENT_IS_NODE?function(){var e=process.hrtime()
return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:"object"==typeof performance&&performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now,GLImmediate.setupFuncs(),Browser.moduleContextCreatedCallbacks.push(function(){GLImmediate.init()})
var GLctx
GL.init(),GLEmulation.init()
var ASSERTIONS=!0,asmGlobalArg={},asmLibraryArg={f:setTempRet0,d:getTempRet0,b:abortStackOverflow,lb:nullFunc_dd,ab:nullFunc_ddd,Ra:nullFunc_di,Ha:nullFunc_did,Id:nullFunc_i,Ed:nullFunc_ii,yd:nullFunc_iidi,sd:nullFunc_iidiiii,id:nullFunc_iii,bd:nullFunc_iiii,Wc:nullFunc_iiiid,Sc:nullFunc_iiiii,Kc:nullFunc_iiiiid,Ec:nullFunc_iiiiii,yc:nullFunc_iiiiiid,tc:nullFunc_iiiiiii,mc:nullFunc_iiiiiiii,ic:nullFunc_iiiiiiiii,bc:nullFunc_iiiiiiiiii,Wb:nullFunc_iiiiiiiiiii,Tb:nullFunc_iiiiiiiiiiii,Sb:nullFunc_iiiiiiiiiiiii,Rb:nullFunc_iiiiiiiiiiiiii,Qb:nullFunc_iiiiiiiiiiiiiii,Pb:nullFunc_iiiiiiiiiiiiiiii,Ob:nullFunc_iiiiiiiiiiiiiiiii,Nb:nullFunc_iiiiiiiiiiiiiiiiii,Mb:nullFunc_iiiiiiiiiiiiiiiiiii,Lb:nullFunc_iiiiiiiiiiiiiiiiiiii,Kb:nullFunc_iiiiiiiiiiiiiiiiiiiii,Jb:nullFunc_iiiiij,Ib:nullFunc_iiiij,Hb:nullFunc_iiiijj,Gb:nullFunc_iiiji,Fb:nullFunc_iiijj,Eb:nullFunc_iiji,Db:nullFunc_iijijji,Cb:nullFunc_iijijjji,Bb:nullFunc_jii,Ab:nullFunc_jiii,zb:nullFunc_jiiii,yb:nullFunc_jiiiii,xb:nullFunc_jiij,wb:nullFunc_jij,vb:nullFunc_jiji,ub:nullFunc_jijii,tb:nullFunc_jijiii,sb:nullFunc_jijiiii,rb:nullFunc_jijiiiii,qb:nullFunc_jijij,pb:nullFunc_jijj,ob:nullFunc_jijji,nb:nullFunc_jijjiii,mb:nullFunc_v,kb:nullFunc_vi,jb:nullFunc_vid,ib:nullFunc_vidddiii,hb:nullFunc_vidi,gb:nullFunc_vii,fb:nullFunc_viid,eb:nullFunc_viii,db:nullFunc_viiidd,cb:nullFunc_viiii,bb:nullFunc_viiiii,$a:nullFunc_viiiiii,_a:nullFunc_viiiiiii,Za:nullFunc_viiiiiiii,Ya:nullFunc_viiiiiiiii,Xa:nullFunc_viiiiiiiiii,Wa:nullFunc_viiiiiiiiiii,Va:nullFunc_viiiiiiiiiiii,Ua:nullFunc_viiiiiiiiiiiii,Ta:nullFunc_viiiiiiiiiiiiii,Sa:nullFunc_viiiiiiiiiiiiiii,Qa:nullFunc_viiiiiiiiiiiiiiii,Pa:nullFunc_viiiiiiiiiiiiiiiii,Oa:nullFunc_viiiiiiiiiiiiiiiiii,Na:nullFunc_viiiiiiiiiiiiiiiiiii,Ma:nullFunc_viiiiiiiiiiiiiiiiiiii,La:nullFunc_viijii,Ka:nullFunc_vij,Ja:nullFunc_viji,Ia:nullFunc_vijjii,H:invoke_dd,W:invoke_di,y:invoke_i,k:invoke_ii,Ga:invoke_iidi,i:invoke_iii,r:invoke_iiii,N:invoke_iiiii,ha:invoke_iiiiii,x:invoke_v,j:invoke_vi,o:invoke_vii,oa:invoke_viid,l:invoke_viii,A:invoke_viiidd,M:invoke_viiii,ga:invoke_viiiii,Hd:_SDL_GL_SetAttribute,L:_SDL_GL_SwapBuffers,Gd:_SDL_GetError,Fd:_SDL_Init,K:_SDL_Quit,g:___assert_fail,Dd:___buildEnvironment,Cd:___clock_gettime,n:___cxa_allocate_exception,Bd:___cxa_pure_virtual,m:___cxa_throw,Ad:___cxa_uncaught_exceptions,na:___lock,zd:___map_file,Fa:___setErrNo,ma:___syscall10,xd:___syscall114,wd:___syscall12,Ea:___syscall140,vd:___syscall145,Da:___syscall146,ud:___syscall183,td:___syscall191,Ca:___syscall195,rd:___syscall196,qd:___syscall197,pd:___syscall199,od:___syscall20,nd:___syscall201,md:___syscall220,V:___syscall221,ld:___syscall3,kd:___syscall33,jd:___syscall340,hd:___syscall38,gd:___syscall39,fd:___syscall4,Ba:___syscall40,ed:___syscall41,dd:___syscall42,fa:___syscall5,ea:___syscall54,R:___syscall6,cd:___syscall63,ad:___syscall77,$c:___syscall83,_c:___syscall85,Zc:___syscall91,U:___unlock,$:__exit,h:_abort,Yc:_atexit,Xc:_ceil,v:_clock,Vc:_difftime,Uc:_dlclose,Aa:_dlerror,da:_dlopen,la:_dlsym,c:_emcctime,ka:_emscripten_asm_const_d,za:_emscripten_asm_const_i,Q:_emscripten_asm_const_ii,Tc:_emscripten_asm_const_iii,ya:_emscripten_asm_const_iiii,Rc:_emscripten_asm_const_iiiii,Qc:_emscripten_get_canvas_size,Pc:_emscripten_get_heap_size,Oc:_emscripten_longjmp,Nc:_emscripten_memcpy_big,Mc:_emscripten_resize_heap,ja:_execve,F:_exit,Lc:_fabs,Jc:_floor,Ic:_fork,E:_getenv,xa:_getpwnam,Hc:_getpwuid,ca:_gettimeofday,p:_glBegin,Gc:_glBlendFunc,Fc:_glClear,wa:_glClearColor,w:_glColor3f,Dc:_glDepthFunc,C:_glDisable,z:_glEnable,q:_glEnd,Cc:_glFinish,Bc:_glFlush,Ac:_glFrustum,zc:_glGetFloatv,va:_glGetIntegerv,_:_glLightfv,B:_glLineWidth,T:_glLoadIdentity,G:_glMatrixMode,xc:_glNormal3f,wc:_glOrtho,vc:_glPolygonMode,uc:_glPolygonOffset,ba:_glPopMatrix,aa:_glPushMatrix,sc:_glRotated,ua:_glScaled,rc:_glScalef,qc:_glShadeModel,ta:_glTranslated,sa:_glTranslatef,D:_glVertex3f,pc:_glViewport,oc:_glinit,nc:_kill,Ub:_llvm_bswap_i64,S:_llvm_cos_f64,lc:_llvm_exp2_f64,u:_llvm_log10_f64,kc:_llvm_log2_f64,P:_llvm_sin_f64,s:_llvm_stackrestore,t:_llvm_stacksave,Z:_llvm_trap,J:_llvm_trunc_f64,jc:_localtime,hc:_localtime_r,e:_longjmp,gc:_mp_js_hook,O:_mp_js_ticks_ms,fc:_nanosleep,ia:_popen,ec:_pthread_cond_wait,I:_raise,dc:_setenv,cc:_sigaction,ac:_sigemptyset,$b:_sqrt,_b:_strftime,Zb:_strftime_l,ra:_sysconf,Y:_system,X:_time,Yb:_unsetenv,qa:_usleep,Xb:_utimes,pa:_waitpid,Vb:abortOnCannotGrowMemory,a:DYNAMICTOP_PTR},asm=Module.asm(asmGlobalArg,asmLibraryArg,buffer)
Module.asm=asm
var __ZN4giac13giac_rendererEPKc=Module.__ZN4giac13giac_rendererEPKc=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Jd.apply(null,arguments)},__ZSt18uncaught_exceptionv=Module.__ZSt18uncaught_exceptionv=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Kd.apply(null,arguments)},___errno_location=Module.___errno_location=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Ld.apply(null,arguments)},__get_daylight=Module.__get_daylight=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Md.apply(null,arguments)},__get_environ=Module.__get_environ=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Nd.apply(null,arguments)},__get_timezone=Module.__get_timezone=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Od.apply(null,arguments)},__get_tzname=Module.__get_tzname=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Pd.apply(null,arguments)},_caseval=Module._caseval=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Qd.apply(null,arguments)},_fflush=Module._fflush=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Rd.apply(null,arguments)},_free=Module._free=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Sd.apply(null,arguments)},_llvm_bswap_i32=Module._llvm_bswap_i32=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Td.apply(null,arguments)},_malloc=Module._malloc=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Ud.apply(null,arguments)},_memcpy=Module._memcpy=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Vd.apply(null,arguments)},_memset=Module._memset=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Wd.apply(null,arguments)},_mp_js_do_str=Module._mp_js_do_str=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Xd.apply(null,arguments)},_mp_js_init=Module._mp_js_init=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Yd.apply(null,arguments)},_nws_caseval=Module._nws_caseval=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.Zd.apply(null,arguments)},_quickjs_ck_eval=Module._quickjs_ck_eval=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm._d.apply(null,arguments)},_setThrew=Module._setThrew=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.$d.apply(null,arguments)},establishStackSpace=Module.establishStackSpace=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.re.apply(null,arguments)},globalCtors=Module.globalCtors=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.se.apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.te.apply(null,arguments)},stackRestore=Module.stackRestore=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ue.apply(null,arguments)},stackSave=Module.stackSave=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ve.apply(null,arguments)},dynCall_dd=Module.dynCall_dd=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ae.apply(null,arguments)},dynCall_di=Module.dynCall_di=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.be.apply(null,arguments)},dynCall_i=Module.dynCall_i=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ce.apply(null,arguments)},dynCall_ii=Module.dynCall_ii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.de.apply(null,arguments)},dynCall_iidi=Module.dynCall_iidi=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ee.apply(null,arguments)},dynCall_iii=Module.dynCall_iii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.fe.apply(null,arguments)},dynCall_iiii=Module.dynCall_iiii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ge.apply(null,arguments)},dynCall_iiiii=Module.dynCall_iiiii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.he.apply(null,arguments)},dynCall_iiiiii=Module.dynCall_iiiiii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ie.apply(null,arguments)},dynCall_v=Module.dynCall_v=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.je.apply(null,arguments)},dynCall_vi=Module.dynCall_vi=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ke.apply(null,arguments)},dynCall_vii=Module.dynCall_vii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.le.apply(null,arguments)},dynCall_viid=Module.dynCall_viid=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.me.apply(null,arguments)},dynCall_viii=Module.dynCall_viii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.ne.apply(null,arguments)},dynCall_viiidd=Module.dynCall_viiidd=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.oe.apply(null,arguments)},dynCall_viiii=Module.dynCall_viiii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.pe.apply(null,arguments)},dynCall_viiiii=Module.dynCall_viiiii=function(){return assert(runtimeInitialized,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),assert(!runtimeExited,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Module.asm.qe.apply(null,arguments)}
Module.asm=asm,Object.getOwnPropertyDescriptor(Module,"intArrayFromString")||(Module.intArrayFromString=function(){abort("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"intArrayToString")||(Module.intArrayToString=function(){abort("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Module.ccall=ccall,Module.cwrap=cwrap,Object.getOwnPropertyDescriptor(Module,"setValue")||(Module.setValue=function(){abort("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"getValue")||(Module.getValue=function(){abort("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"allocate")||(Module.allocate=function(){abort("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"getMemory")||(Module.getMemory=function(){abort("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"AsciiToString")||(Module.AsciiToString=function(){abort("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stringToAscii")||(Module.stringToAscii=function(){abort("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"UTF8ArrayToString")||(Module.UTF8ArrayToString=function(){abort("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"UTF8ToString")||(Module.UTF8ToString=function(){abort("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stringToUTF8Array")||(Module.stringToUTF8Array=function(){abort("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stringToUTF8")||(Module.stringToUTF8=function(){abort("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"lengthBytesUTF8")||(Module.lengthBytesUTF8=function(){abort("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"UTF16ToString")||(Module.UTF16ToString=function(){abort("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stringToUTF16")||(Module.stringToUTF16=function(){abort("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"lengthBytesUTF16")||(Module.lengthBytesUTF16=function(){abort("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"UTF32ToString")||(Module.UTF32ToString=function(){abort("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stringToUTF32")||(Module.stringToUTF32=function(){abort("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"lengthBytesUTF32")||(Module.lengthBytesUTF32=function(){abort("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"allocateUTF8")||(Module.allocateUTF8=function(){abort("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stackTrace")||(Module.stackTrace=function(){abort("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"addOnPreRun")||(Module.addOnPreRun=function(){abort("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"addOnInit")||(Module.addOnInit=function(){abort("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"addOnPreMain")||(Module.addOnPreMain=function(){abort("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"addOnExit")||(Module.addOnExit=function(){abort("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"addOnPostRun")||(Module.addOnPostRun=function(){abort("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Module.writeStringToMemory=writeStringToMemory,Object.getOwnPropertyDescriptor(Module,"writeArrayToMemory")||(Module.writeArrayToMemory=function(){abort("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"writeAsciiToMemory")||(Module.writeAsciiToMemory=function(){abort("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"addRunDependency")||(Module.addRunDependency=function(){abort("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"removeRunDependency")||(Module.removeRunDependency=function(){abort("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"ENV")||(Module.ENV=function(){abort("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"FS")||(Module.FS=function(){abort("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"FS_createFolder")||(Module.FS_createFolder=function(){abort("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"FS_createPath")||(Module.FS_createPath=function(){abort("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"FS_createDataFile")||(Module.FS_createDataFile=function(){abort("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"FS_createPreloadedFile")||(Module.FS_createPreloadedFile=function(){abort("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"FS_createLazyFile")||(Module.FS_createLazyFile=function(){abort("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"FS_createLink")||(Module.FS_createLink=function(){abort("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"FS_createDevice")||(Module.FS_createDevice=function(){abort("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"FS_unlink")||(Module.FS_unlink=function(){abort("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(Module,"GL")||(Module.GL=function(){abort("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"dynamicAlloc")||(Module.dynamicAlloc=function(){abort("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"warnOnce")||(Module.warnOnce=function(){abort("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"loadDynamicLibrary")||(Module.loadDynamicLibrary=function(){abort("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"loadWebAssemblyModule")||(Module.loadWebAssemblyModule=function(){abort("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"getLEB")||(Module.getLEB=function(){abort("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"getFunctionTables")||(Module.getFunctionTables=function(){abort("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"alignFunctionTables")||(Module.alignFunctionTables=function(){abort("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"registerFunctions")||(Module.registerFunctions=function(){abort("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"addFunction")||(Module.addFunction=function(){abort("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"removeFunction")||(Module.removeFunction=function(){abort("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"getFuncWrapper")||(Module.getFuncWrapper=function(){abort("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"prettyPrint")||(Module.prettyPrint=function(){abort("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"makeBigInt")||(Module.makeBigInt=function(){abort("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"dynCall")||(Module.dynCall=function(){abort("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"getCompilerSetting")||(Module.getCompilerSetting=function(){abort("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stackSave")||(Module.stackSave=function(){abort("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stackRestore")||(Module.stackRestore=function(){abort("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"stackAlloc")||(Module.stackAlloc=function(){abort("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"establishStackSpace")||(Module.establishStackSpace=function(){abort("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"print")||(Module.print=function(){abort("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"printErr")||(Module.printErr=function(){abort("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"getTempRet0")||(Module.getTempRet0=function(){abort("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"setTempRet0")||(Module.setTempRet0=function(){abort("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"callMain")||(Module.callMain=function(){abort("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Module.Pointer_stringify=Pointer_stringify,Object.getOwnPropertyDescriptor(Module,"intArrayFromBase64")||(Module.intArrayFromBase64=function(){abort("'intArrayFromBase64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"tryParseAsDataURI")||(Module.tryParseAsDataURI=function(){abort("'tryParseAsDataURI' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(Module,"ALLOC_NORMAL")||Object.defineProperty(Module,"ALLOC_NORMAL",{get:function(){abort("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(Module,"ALLOC_STACK")||Object.defineProperty(Module,"ALLOC_STACK",{get:function(){abort("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(Module,"ALLOC_DYNAMIC")||Object.defineProperty(Module,"ALLOC_DYNAMIC",{get:function(){abort("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(Module,"ALLOC_NONE")||Object.defineProperty(Module,"ALLOC_NONE",{get:function(){abort("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.run=run
var abortDecorators=[]
if(Module.abort=abort,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()()
Module.noExitRuntime=!0,run()
</script>
<script>
    Module['onRuntimeInitialized'] = function () {
        Module.ready = true;
        onmyload()
    }
    var historyc = [];
    var hpt = 0;
    var UI = {
        n2d: 0,
        python: 0,
        histcount: 0,
        usemathjax: false,
        lastcmd: '',
        canvas_pushed: false,
        canvas_lastx: 0,
        canvas_lasty: 0,
        canvas_mousemove: function (event, no) {
            if (UI.canvas_pushed) {
                if (UI.canvas_lastx != event.clientX) {
                    if (event.clientX > UI.canvas_lastx)
                        giac3d('r' + no);
                    else
                        giac3d('l' + no);
                    UI.canvas_lastx = event.clientX;
                }
                if (UI.canvas_lasty != event.clientY) {
                    if (event.clientY > UI.canvas_lasty)
                        giac3d('d' + no);
                    else
                        giac3d('u' + no);
                    UI.canvas_lasty = event.clientY;
                }
            }
        },
        count_newline: function (s) {
            var ss = s.length, i, res = 1;
            for (i = 0; i < ss; i++) {
                if (s[i] == '\n') res++;
            }
            return res;
        },
        ltgt: function (s) {
            var ss = s.length, i, res = '', c = 0;
            for (i = 0; i < ss - 4; i++) {
                if (s[i] == '\n') c++;
                if (s[i] != '&' || s[i + 2] != 't' || s[i + 3] != ';') {
                    res += s[i];
                    continue;
                }
                if (s[i + 1] == 'l') {
                    res += '<';
                    i += 3;
                    continue;
                }
                if (s[i + 1] == 'g') {
                    res += '>';
                    i += 3;
                    continue;
                }
                res += s[i];
            }
            for (; i < ss; i++) res += s[i];
            return [res, c];
        },
        rmquote: function (tmp) {
            var s = tmp.length;
            if (s > 2 && tmp.charCodeAt(0) == 34 && tmp.charCodeAt(s - 1) == 34)
                tmp = tmp.substr(1, s - 2);
            return tmp;
        },
        renderhelp: function (s) {
            var pos0 = s.search("</b>");
            //console.log(s);
            var found = (s.substr(pos0 + 7, 20) != "Best match has score");
            var lh = s.substr(3, pos0 - 3);
            var unlocalized_cmd = lh;
            var sorig = s;
            pos1 = s.search("<br>");
            if (pos1 < 0) return sorig;
            var explication = s.substr(0, pos1);
            s = s.substr(pos1 + 4, s.length - pos1 - 4);
            pos1 = s.search("<br>");
            if (pos1 < 0) return sorig;
            var syntaxe = s.substr(0, pos1);
            s = s.substr(pos1 + 4, s.length - pos1 - 4);
            pos1 = s.search("<br>");
            if (pos1 < 0) return sorig;
            var voiraussi = s.substr(0, pos1);
            var examples = s.substr(pos1 + 4, s.length - pos1 - 4);
            s = '';//'<b>'+unlocalized_cmd+':</b> ';
            if (found)
                s += explication + '<br>See also: ' + voiraussi + '<br><b>Examples : </b>' + examples;
            else
                s += explication.substr(0, pos0);
            return s;
        },
        quick: function (field) {
            var tmp1 = field.previousSibling.value;
            var tmp = UI.caseval(tmp1);
            tmp = UI.rmquote(tmp);
            tmp = UI.latexeval(tmp);
            Module.print(String.fromCharCode(2));
            Module.print("<tt>");
            Module.print(tmp1);
            Module.print("</tt><br>&nbsp;&nbsp;");
            if (tmp.length > 3 && tmp.substr(0, 3) == '<b>') {
                Module.print(UI.renderhelp(tmp)); tmp = '';
            } else Module.print(tmp);
            Module.print("<br>");
            Module.print(String.fromCharCode(3));
            field.nextSibling.innerHTML = '&nbsp;' + tmp;
        },
        giaceval: function (text) {
            if (UI.python) text = '@@' + text;
            if (!Module.ready) { window.setTimeout(UI.giaceval, 100, text); return " ... "; }
            var dogiaceval = Module.cwrap('caseval', 'string', ['string']);
            return dogiaceval(text);
        },
        caseval: function (text) {
            UI.lastcmd = text;
            var s = "not evaled", err;
            try {
                s = UI.giaceval(text);
            } catch (err) { s = err.message; }
            var is_2d = s.length > 4 && s.substr(0, 4) == 'gr2d';
            if (is_2d) {
                s = '<canvas id="gr2d_' + UI.n2d + '" width=400 height=250>' + s + '</canvas>';
                //console.log(UI.n2d,s);
                UI.n2d++;
            }
            var is_3d = s.length > 5 && s.substr(0, 5) == 'gl3d ';
            if (is_3d) {
                var n3d = s.substr(5, s.length - 5);
                s = '<canvas id="gl3d_' + n3d + '" onmousedown="UI.canvas_pushed=true;UI.canvas_lastx=event.clientX; UI.canvas_lasty=event.clientY;" onmouseup="UI.canvas_pushed=false;" onmousemove="UI.canvas_mousemove(event,' + n3d + ')" width=400 height=250></canvas>';
            }
            return s;
        },
        pourcentmod: function (a, b) {
            return a - Math.floor(a / b) * b;
        },
        color_list: ['black',
            'red',
            'green',
            'yellow',
            'blue',
            'magenta',
            'cyan',
            'white',
            'silver',
            'gray',
            'maroon',
            'purple',
            'fuchsia',
            'lime',
            'olive',
            'navy',
            'teal',
            'aqua',
            'antiquewhite',
            'aquamarine',
            'azure',
            'beige',
            'bisque',
            'blanchedalmond',
            'blueviolet',
            'brown',
            'burlywood',
            'cadetblue',
            'chartreuse',
            'chocolate',
            'coral',
            'cornflowerblue',
            'cornsilk',
            'crimson',
            'cyan',
            'darkblue',
            'darkcyan',
            'darkgoldenrod',
            'darkgray',
            'darkgreen',
            'darkgrey',
            'darkkhaki',
            'darkmagenta',
            'darkolivegreen',
            'darkorange',
            'darkorchid',
            'darkred',
            'darksalmon',
            'darkseagreen',
            'darkslateblue',
            'darkslategray',
            'darkslategrey',
            'darkturquoise',
            'darkviolet',
            'deeppink',
            'deepskyblue',
            'dimgray',
            'dimgrey',
            'dodgerblue',
            'firebrick',
            'floralwhite',
            'forestgreen',
            'gainsboro',
            'ghostwhite',
            'gold',
            'goldenrod',
            'greenyellow',
            'grey',
            'honeydew',
            'hotpink',
            'indianred',
            'indigo',
            'ivory',
            'khaki',
            'lavender',
            'lavenderblush',
            'lawngreen',
            'lemonchiffon',
            'lightblue',
            'lightcoral',
            'lightcyan',
            'lightgoldenrodyellow',
            'lightgray',
            'lightgreen',
            'lightgrey',
            'lightpink',
            'lightsalmon',
            'lightseagreen',
            'lightskyblue',
            'lightslategray',
            'lightslategrey',
            'lightsteelblue',
            'lightyellow',
            'limegreen',
            'linen',
            'mediumaquamarine',
            'mediumblue',
            'mediumorchid',
            'mediumpurple',
            'mediumseagreen',
            'mediumslateblue',
            'mediumspringgreen',
            'mediumturquoise',
            'mediumvioletred',
            'midnightblue',
            'mintcream',
            'mistyrose',
            'moccasin',
            'navajowhite',
            'oldlace',
            'olivedrab',
            'orangered',
            'orchid',
            'palegoldenrod',
            'palegreen',
            'paleturquoise',
            'palevioletred',
            'papayawhip',
            'peachpuff',
            'peru',
            'pink',
            'plum',
            'powderblue',
            'rosybrown',
            'royalblue',
            'saddlebrown',
            'salmon',
            'sandybrown',
            'seagreen',
            'seashell',
            'sienna',
            'skyblue',
            'slateblue',
            'slategray',
            'slategrey',
            'snow',
            'springgreen',
            'steelblue',
            'tan',
            'thistle',
            'tomato',
            'turquoise',
            'violet',
            'wheat',
            'whitesmoke',
            'yellowgreen'],
        arc_en_ciel: function (k) {
            var r, g, b;
            k += 21;
            k = pourcentmod(k, 126);
            if (k < 0)
                k += 126;
            if (k < 21) {
                r = 251;
                g = 0;
                b = 12 * k;
            }
            if (k >= 21 && k < 42) {
                r = 251 - (12 * (k - 21));
                g = 0;
                b = 251;
            }
            if (k >= 42 && k < 63) {
                r = 0;
                g = (k - 42) * 12;
                b = 251;
            }
            if (k >= 63 && k < 84) {
                r = 0;
                g = 251;
                b = 251 - (k - 63) * 12;
            }
            if (k >= 84 && k < 105) {
                r = (k - 84) * 12;
                g = 251;
                b = 0;
            }
            if (k >= 105 && k < 126) {
                r = 251;
                g = 251 - (k - 105) * 12;
                b = 0;
            }
            return 'rgb(' + r + ',' + g + ',' + b + ')';
        },
        turtle_color: function (c) {
            if (c >= 0x100) {
                if (c < 0x17e)
                    return UI.arc_en_ciel(c);
                var r = 8 * ((c >> 11) & 0x1f);
                var g = 4 * ((c >> 5) & 0x3f);
                var b = 8 * (c & 0x1f);
                return 'rgb(' + r + ',' + g + ',' + b + ')';
            }
            return UI.color_list[c];
        },
        pixon_draw: function (id, s) {
            var v = eval(s);
            if (!Array.isArray(v)) return;
            var canvas = document.getElementById(id);
            var l = v.length, w = 0, h = 0;
            if (l < 2) return;
            var scale = v[0];
            for (var k = 1; k < l; k++) {
                var cur = v[k];
                var x = cur[0], y = cur[1];
                if (cur.length == 3 && typeof cur[2] != "number") {
                    x += 100;
                    y += 16;
                }
                if (cur.length == 4) {
                    var tmp = cur[3];
                    if (typeof tmp == "number") {
                        if (tmp > 0) y += tmp; else x -= tmp;
                    } else {
                        x += 100;
                        y += 16;
                    }
                }
                if (x > w) w = x;
                if (y > h) h = y;
            }
            w = (w + 1) * scale;
            h = (h + 1) * scale;
            canvas.width = w;
            canvas.height = h;
            //console.log(h,w);
            if (canvas.getContext) {
                var ctx = canvas.getContext('2d');
                for (var k = 1; k < l; k++) {
                    var cur = v[k], cl;
                    //console.log(cur);
                    if (!Array.isArray(cur) || (cl = cur.length) < 2) continue;
                    // cur[0]=x, cur[1]=y, cur[2]=color, cur[3]=w if +, h if -
                    var x = cur[0] * scale;
                    var y = cur[1] * scale;
                    if (cl > 2 && typeof cur[2] == "string") {
                        console.log(cur[2]);
                        ctx.font = '16px serif';
                        ctx.fillStyle = 'black';
                        ctx.fillText(cur[2], x, y + 16, 100);
                        continue;
                    }
                    ctx.fillStyle = (cl > 2) ? UI.turtle_color(cur[2]) : 'black';
                    if (cl < 4) {
                        ctx.fillRect(x, y, scale, scale);
                        continue;
                    }
                    if (typeof cur[3] == "string") {
                        ctx.font = '16px serif';
                        ctx.fillText(cur[3], x, y + 16, 100);
                        continue;
                    }
                    var h = cur[3] * scale, w = scale;
                    if (h < 0) {
                        w = -h;
                        h = scale;
                    }
                    ctx.fillRect(x, y, w, h);
                }
            }
        },
        turtle_dx: 0, // shift frame
        turtle_dy: 0,
        turtle_z: 1,  // zoom factor
        turtle_maillage: 1,
        turtle_draw: function (id, s) {
            if (s.length < 7) return;
            s = s.substr(5, s.length - 6);
            if (s.length > 7 && s.substr(s, 6) == "pixon(") {
                UI.pixon_draw(id, s.substr(6, s.length - 7));
                return;
            }
            if (s.length < 6 || s.substr(s, 5) != "logo(")
                return;
            s = s.substr(5, s.length - 6);
            //console.log(s);
            var v = eval(s);
            if (!Array.isArray(v)) return;
            //console.log(v[0]);
            var canvas = document.getElementById(id);
            var w = canvas.width, h = canvas.height;
            if (canvas.getContext) {
                var ctx = canvas.getContext('2d');
                var turtlezoom = UI.turtle_z, turtlex = UI.turtle_dx, turtley = UI.turtle_dy;
                // maillage
                if (UI.turtle_maillage & 3) {
                    ctx.fillStyle = 'black';
                    var xdecal = Math.floor(turtlex / 10.0) * 10;
                    var ydecal = Math.floor(turtley / 10.0) * 10;
                    if ((UI.turtle_maillage & 0x3) == 1) {
                        for (var i = xdecal; i < w + xdecal; i += 10) {
                            for (var j = ydecal; j < h + ydecal; j += 10) {
                                var X = Math.floor((i - turtlex) * turtlezoom + .5);
                                var Y = Math.floor((j - turtley) * turtlezoom + .5);
                                // console.log(X,Y);
                                ctx.fillRect(X, h - Y, 1, 1);
                            }
                        }
                    } else {
                        var dj = Math.sqrt(3.0) * 10, i0 = xdecal;
                        for (var j = ydecal; j < h + ydecal; j += dj) {
                            var J = Math.floor(h - (j - turtley) * turtlezoom);
                            for (var i = i0; i < w + xdecal; i += 10) {
                                ctx.fillRect(Math.floor((i - turtlex) * turtlezoom + .5), J, 1, 1);
                            }
                            i0 += dj;
                            while (i0 >= 10)
                                i0 -= 10;
                        }
                    }
                }
                var l = v.length, i;
                var prec = v[l - 1];
                ctx.font = '16px serif';
                ctx.fillStyle = 'yellow';
                ctx.fillRect(w - 40, 0, 40, 50);
                ctx.fillStyle = 'black';
                ctx.fillText('x:' + prec[0], w - 40, 15);
                ctx.fillText('y:' + prec[1], w - 40, 31);
                ctx.fillText('t:' + prec[2], w - 40, 49);
                for (k = 1; k < l; k++) {
                    prec = v[k - 1];
                    var cur = v[k];
                    var preccouleur = prec[3] >> 11; // -> FIXME colors
                    var curcouleur = prec[3] >> 11; // -> FIXME colors
                    if (cur[5].length) {
                        ctx.font = cur[4] + 'px serif';
                        ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur);
                        ctx.fillText(cur[5], turtlezoom * (cur[0] - turtlex), h - turtlezoom * (cur[1] - turtley));
                        continue;
                    }
                    var radius = cur[4], precradius = prec[4];
                    var x1 = Math.floor(turtlezoom * (prec[0] - turtlex) + .5),
                        y1 = Math.floor(turtlezoom * (prec[1] - turtley) + .5),
                        x2 = Math.floor(turtlezoom * (cur[0] - turtlex) + .5),
                        y2 = Math.floor(turtlezoom * (cur[1] - turtley) + .5);
                    if (radius > 0) {
                        var r = radius & 0x1ff, theta1, theta2, rempli, x, y, R, angle;
                        theta1 = prec[2] + ((radius >> 9) & 0x1ff);
                        theta2 = prec[2] + ((radius >> 18) & 0x1ff);
                        rempli = (radius >> 27) & 1;
                        var seg = (radius >> 28) & 1;
                        R = Math.floor(turtlezoom * r + .5);
                        angle1 = Math.PI / 180 * (theta1 - 90);
                        angle2 = Math.PI / 180 * (theta2 - 90);
                        x = Math.floor(turtlezoom * (cur[0] - turtlex - r * Math.cos(angle2)) + .5);
                        y = Math.floor(turtlezoom * (cur[1] - turtley - r * Math.sin(angle2)) + .5);
                        ctx.beginPath();
                        if (seg)
                            ctx.moveTo(x2, h - y2);
                        else {
                            ctx.moveTo(x, h - y);
                            ctx.lineTo(x2, h - y2);
                        }
                        //console.log(x,y,x1,y1,angle1,angle2);
                        ctx.arc(x, h - y, R, -angle2, -angle1);
                        ctx.closePath();
                        ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur);
                        if (rempli)
                            ctx.fill();
                        else
                            ctx.stroke();
                        continue;
                    }
                    if (prec[3] & 1) {
                        ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(preccouleur);
                        ctx.beginPath();
                        ctx.moveTo(x1, h - y1);
                        ctx.lineTo(x2, h - y2);
                        ctx.closePath();
                        ctx.stroke();
                    }
                    if (radius < -1 && k + radius >= 0) {
                        ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur);
                        ctx.beginPath();
                        var x0 = Math.floor(turtlezoom * (cur[0] - turtlex) + .5), y0 = Math.floor(turtlezoom * (cur[1] - turtley) + .5);
                        ctx.moveTo(x0, h - y0);
                        for (var i = -1; i >= radius; i--) {
                            prec = v[k + i];
                            var x = Math.floor(turtlezoom * (prec[0] - turtlex) + .5);
                            var y = Math.floor(turtlezoom * (prec[1] - turtley) + .5);
                            ctx.lineTo(x, h - y);
                        }
                        ctx.closePath();
                        ctx.fill(); // automatically close path
                    }
                }
                var cur = v[l - 1];
                if (cur[3] & 2) {
                    // dessin de la tortue
                    var x = Math.floor(turtlezoom * (cur[0] - turtlex) + .5);
                    var y = Math.floor(turtlezoom * (cur[1] - turtley) + .5);
                    var cost = Math.cos(cur[2] * Math.PI / 180);
                    var sint = Math.sin(cur[2] * Math.PI / 180);
                    var turtle_length = (cur[3] >> 3) & 0xff;
                    var Dx = Math.floor(turtlezoom * turtle_length * cost / 2 + .5);
                    var Dy = Math.floor(turtlezoom * turtle_length * sint / 2 + .5);
                    //console.log('tortue',cur,w,h,turtlezoom,x,y,Dx,Dy);
                    ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur);
                    ctx.beginPath();
                    ctx.moveTo(x + Dy, h - (y - Dx));
                    ctx.lineTo(x - Dy, h - (y + Dx));
                    ctx.closePath();
                    ctx.stroke();
                    if (!(cur[3] & 1))
                        ctx.strokeStyle = ctx.fillStyle = UI.turtle_color(curcouleur + 1);
                    ctx.beginPath();
                    ctx.moveTo(x + Dy, h - (y - Dx));
                    ctx.lineTo(x + 3 * Dx, h - (y + 3 * Dy));
                    ctx.closePath();
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(x - Dy, h - (y + Dx));
                    ctx.lineTo(x + 3 * Dx, h - (y + 3 * Dy));
                    ctx.closePath();
                    ctx.stroke();
                }
            }
        },
        render_canvas: function (field) {
            var n = field.id;
            if (n && n.length > 4 && n.substr(0, 4) == 'gr2d') {
                var s = field.innerHTML;
                //console.log(s);
                UI.turtle_draw(n, s);
            }
            if (n && n.length > 5 && n.substr(0, 5) == 'gl3d_') {
                Module.print(n);
                var n3d = n.substr(5, n.length - 5);
                giac3d(n3d);
                return;
            }
            var f = field.firstChild;
            for (; f; f = f.nextSibling) {
                UI.render_canvas(f);
            }
        },
        eval_form: function (field) {
            UI.giaceval('assume(' + field.name.value + '=round(' + field.valname.value + ',12))');
            var s = UI.caseval(field.prog.value);
            var is_svg = s.substr(1, 4) == '<svg';
            if (is_svg) field.parentNode.lastChild.innerHTML = s.substr(1, s.length - 2);
            else field.parentNode.lastChild.innerHTML = s;
            UI.render_canvas(field.parentNode.lastChild);
        },
        latexeval: function (text) {
            var tmp = text;
            if (tmp.length > 10 && tmp.substr(0, 10) == 'GIAC_ERROR') return '"' + tmp.substr(11, tmp.length - 11) + '"';
            if (tmp.length > 5 && tmp.substr(0, 5) == 'gl3d_') return tmp;
            if (tmp.length > 5 && tmp.substr(1, 4) == '<svg') return tmp.substr(1, tmp.length - 2);
            if (tmp.length > 5 && tmp.substr(0, 4) == '<svg') return tmp;
            if (tmp.length > 3 && tmp.substr(0, 3) == '<b>') return tmp;
            if (UI.usemathjax) {
                tmp = UI.giaceval('latex(quote(' + tmp + '))');
                var dollar = String.fromCharCode(36);
                tmp = dollar + dollar + tmp.substr(1, tmp.length - 2) + dollar + dollar;
                return tmp;
            }
            tmp = UI.giaceval('mathml(quote(' + tmp + ',1))');
            tmp = tmp.substr(1, tmp.length - 2);
            return tmp;
        },
        ckenter: function (event, field, mode) {
            var key = event.keyCode;
            if (key != 13 || event.shiftKey) return true;
            if (mode == 3) { UI.quick(field.nextSibling); event.preventDefault(); field.select(); return true; }
            var tmp = field.value;
            Module.print(tmp);
            tmp = UI.caseval(tmp);
            if (mode == 1) {
                tmp = UI.rmquote(tmp);
            }
            if (mode == 2) {
                tmp = UI.latexeval(tmp);
            }
            field.nextSibling.nextSibling.innerHTML = tmp;
            UI.render_canvas(field.nextSibling.nextSibling);
            if (UI.usemathjax) MathJax.Hub.Queue(["Typeset", MathJax.Hub, field.nextSibling.nextSibling]);
            if (event.preventDefault) event.preventDefault();
            return false;
        },
        exec: function (field) {
            if (field.nodeName == "BUTTON" && field.innerHTML != 'Clone' && field.innerHTML != 'Restart' && field.innerHTML != 'Exec. all') {
                field.click();
                return;
            }
            if (field.nodeName == "FORM") {
                UI.eval_form(field);
                return;
            }
            var f = field.firstChild;
            while (f) {
                UI.exec(f);
                f = f.nextSibling;
            }
        },
        execonload: function (field) {
            if (!Module.ready) { window.setTimeout(UI.execonload, 100, field); }
            var f = field.nextSibling;
            if (f && f.innerHTML == "onload" && field.nodeName == "BUTTON") {
                field.click();
                return;
            }
            f = field.firstChild;
            while (f) {
                UI.execonload(f);
                f = f.nextSibling;
            }
        },
        textarealtgt: function (field) {
            if (field.nodeName == "TEXTAREA") {
                var tmp = UI.ltgt(field.value);
                field.value = tmp[0];
                field.rows = tmp[1] + 1;
                return;
            }
            var f = field.firstChild;
            while (f) {
                UI.textarealtgt(f);
                f = f.nextSibling;
            }
        }
    };
    function onmyload() {
        window.dogiaceval = Module.cwrap('caseval', 'string', ['string']);
        myexec("ok");
        main();
    }
    function myexec(text) {
        if (!window.useT) {
            const mymath = document.createElement('div');
            output.appendChild(mymath)
            mymath.innerHTML = dogiaceval(text).replace(/^"+/, "").replace(/"+$/, "");
            output.appendChild(document.createElement('hr'));
            return;
        }
        let result = dogiaceval('latex(' + text + ')').replace(/^"+/, "").replace(/"+$/, "");

        const mymath = document.createElement('div');
        output.appendChild(mymath)
        try {
            katex.render(result, mymath);
        } catch {
            mymath.innerHTML = dogiaceval(text);
        }
        output.appendChild(document.createElement('hr'));
    }
    function print(str) {
        document.getElementById("output").appendChild(document.createTextNode(str));
    }
    function println(str) {
        document.getElementById("output").appendChild(document.createTextNode(str + "\n"));
    }
    function input() {
        var input_element;
        var input_str;

        return new Promise(function (resolve) {
            input_element = document.createElement("INPUT");
            input_element.setAttribute("type", "text");
            input_element.setAttribute("length", "150");
            document.getElementById("output").appendChild(input_element);
            input_element.focus();
            input_str = undefined;
            input_element.addEventListener("keydown", function (event) {
                if (event.keyCode == 13) {
                    input_str = input_element.value;
                    document.getElementById("output").removeChild(input_element);
                    print('> ' + input_str);
                    print("\n");
                    if(historyc[historyc.length-1]!=input_str) hpt = historyc.push(input_str);
                     
                    resolve(input_str);
                }
                if (event.keyCode == 38) {
                    event.preventDefault();
                    if(hpt > 0) {
                        input_element.value = historyc[--hpt];
                        input_element.selectionStart = input_element.selectionEnd = input_element.value.length
                    }
                    return false
                }
                if(event.keyCode == 40){
                    event.preventDefault();
                    if(hpt < historyc.length-1){ 
                        input_element.value = historyc[++hpt];
                        input_element.selectionStart = input_element.selectionEnd = input_element.value.length
                    }
                    return false
                }
                if(event.keyCode == 64 && event.ctrlKey){
                    input_element.value = "";
                }
                if (event.keyCode == 112) {
                    event.preventDefault();
                    if (input_element.value) {
                        input_str = 'help(' + input_element.value + ")";
                        document.getElementById("output").removeChild(input_element);
                        print('> ' + input_str);
                        print("\n");
                        resolve(input_str);
                    }
                    return false
                }
            });
        });
    }

    function tab(space) {
        var str = "";
        while (space-- > 0)
            str += " ";
        return str;
    }
    async function main() {
        dogiaceval("python_compat(4)");
        dogiaceval('set_language(8)');
        dogiaceval("Digits:=12; angle_radian:=1; complex_mode:=0; with_sqrt(0); step_infolevel(0);")
        while (1) {
            str = await input();
            try {
                if (str == 'cls') {
                    historyc.length = hpt = 0;
                    output.innerHTML = '';
                    continue;
                } else if (str == 'useT') {
                    if (window.useT) {
                        output.appendChild(document.createTextNode('关闭latex'));
                    } else {
                        output.appendChild(document.createTextNode('开启latex'));
                    }
                    output.appendChild(document.createElement('hr'))

                    window.useT = window.useT ? 0 : 1;
                } else {
                    myexec(str);
                }
            } catch (e) {
                output.appendChild(document.createTextNode('出错了,可能是使用了SDL（3D函数）'));
                output.appendChild(document.createElement('hr'))
            }
        }
    }
</script>